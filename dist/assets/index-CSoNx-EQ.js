(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,s,i){var o,a={},c=null,d=null;if(s!=null)for(o in s.ref!==void 0&&(d=s.ref),s.key!==void 0&&(c=""+s.key),s)J.call(s,o)&&!L$1.hasOwnProperty(o)&&(a[o]=s[o]);var h=arguments.length-2;if(h===1)a.children=i;else if(1<h){for(var g=Array(h),b=0;b<h;b++)g[b]=arguments[b+2];a.children=g}if(e&&e.defaultProps)for(o in h=e.defaultProps,h)a[o]===void 0&&(a[o]=h[o]);return{$$typeof:l$1,type:e,key:c,ref:d,props:a,_owner:K$1.current}}function N$1(e,s){return{$$typeof:l$1,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return s[i]})}var P$1=/\/+/g;function Q$1(e,s){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):s.toString(36)}function R$1(e,s,i,o,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,a=a(d),e=o===""?"."+Q$1(d,0):o,I$1(a)?(i="",e!=null&&(i=e.replace(P$1,"$&/")+"/"),R$1(a,s,i,"",function(b){return b})):a!=null&&(O$1(a)&&(a=N$1(a,i+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+e)),s.push(a)),1;if(d=0,o=o===""?".":o+":",I$1(e))for(var h=0;h<e.length;h++){c=e[h];var g=o+Q$1(c,h);d+=R$1(c,s,i,g,a)}else if(g=A$1(e),typeof g=="function")for(e=g.call(e),h=0;!(c=e.next()).done;)c=c.value,g=o+Q$1(c,h++),d+=R$1(c,s,i,g,a);else if(c==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,s,i){if(e==null)return e;var o=[],a=0;return R$1(e,o,"","",function(c){return s.call(i,c,a++)}),o}function T$1(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,s,i){S$1(e,function(){s.apply(this,arguments)},i)},count:function(e){var s=0;return S$1(e,function(){s++}),s},toArray:function(e){return S$1(e,function(s){return s})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(e,s,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=C$1({},e.props),a=e.key,c=e.ref,d=e._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,d=K$1.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(g in s)J.call(s,g)&&!L$1.hasOwnProperty(g)&&(o[g]=s[g]===void 0&&h!==void 0?h[g]:s[g])}var g=arguments.length-2;if(g===1)o.children=i;else if(1<g){h=Array(g);for(var b=0;b<g;b++)h[b]=arguments[b+2];o.children=h}return{$$typeof:l$1,type:e.type,key:a,ref:c,props:o,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var s=M$1.bind(null,e);return s.type=e,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,s){return{$$typeof:x,type:e,compare:s===void 0?null:s}};react_production_min.startTransition=function(e){var s=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=s}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(e,s){return U$1.current.useCallback(e,s)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,s){return U$1.current.useEffect(e,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,s,i){return U$1.current.useImperativeHandle(e,s,i)};react_production_min.useInsertionEffect=function(e,s){return U$1.current.useInsertionEffect(e,s)};react_production_min.useLayoutEffect=function(e,s){return U$1.current.useLayoutEffect(e,s)};react_production_min.useMemo=function(e,s){return U$1.current.useMemo(e,s)};react_production_min.useReducer=function(e,s,i){return U$1.current.useReducer(e,s,i)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,s,i){return U$1.current.useSyncExternalStore(e,s,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,i){var o,a={},c=null,d=null;i!==void 0&&(c=""+i),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(d=s.ref);for(o in s)m$1.call(s,o)&&!p$1.hasOwnProperty(o)&&(a[o]=s[o]);if(e&&e.defaultProps)for(o in s=e.defaultProps,s)a[o]===void 0&&(a[o]=s[o]);return{$$typeof:k,type:e,key:c,ref:d,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(pt,xt){var Et=pt.length;pt.push(xt);e:for(;0<Et;){var bt=Et-1>>>1,Tt=pt[bt];if(0<a(Tt,xt))pt[bt]=xt,pt[Et]=Tt,Et=bt;else break e}}function i(pt){return pt.length===0?null:pt[0]}function o(pt){if(pt.length===0)return null;var xt=pt[0],Et=pt.pop();if(Et!==xt){pt[0]=Et;e:for(var bt=0,Tt=pt.length,Ut=Tt>>>1;bt<Ut;){var Ft=2*(bt+1)-1,qt=pt[Ft],Ot=Ft+1,St=pt[Ot];if(0>a(qt,Et))Ot<Tt&&0>a(St,qt)?(pt[bt]=St,pt[Ot]=Et,bt=Ot):(pt[bt]=qt,pt[Ft]=Et,bt=Ft);else if(Ot<Tt&&0>a(St,Et))pt[bt]=St,pt[Ot]=Et,bt=Ot;else break e}}return xt}function a(pt,xt){var Et=pt.sortIndex-xt.sortIndex;return Et!==0?Et:pt.id-xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();e.unstable_now=function(){return d.now()-h}}var g=[],b=[],j=1,_=null,$=3,et=!1,tt=!1,nt=!1,it=typeof setTimeout=="function"?setTimeout:null,rt=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function st(pt){for(var xt=i(b);xt!==null;){if(xt.callback===null)o(b);else if(xt.startTime<=pt)o(b),xt.sortIndex=xt.expirationTime,s(g,xt);else break;xt=i(b)}}function ot(pt){if(nt=!1,st(pt),!tt)if(i(g)!==null)tt=!0,vt(ut);else{var xt=i(b);xt!==null&&Ct(ot,xt.startTime-pt)}}function ut(pt,xt){tt=!1,nt&&(nt=!1,rt(at),at=-1),et=!0;var Et=$;try{for(st(xt),_=i(g);_!==null&&(!(_.expirationTime>xt)||pt&&!ft());){var bt=_.callback;if(typeof bt=="function"){_.callback=null,$=_.priorityLevel;var Tt=bt(_.expirationTime<=xt);xt=e.unstable_now(),typeof Tt=="function"?_.callback=Tt:_===i(g)&&o(g),st(xt)}else o(g);_=i(g)}if(_!==null)var Ut=!0;else{var Ft=i(b);Ft!==null&&Ct(ot,Ft.startTime-xt),Ut=!1}return Ut}finally{_=null,$=Et,et=!1}}var ht=!1,dt=null,at=-1,ct=5,lt=-1;function ft(){return!(e.unstable_now()-lt<ct)}function mt(){if(dt!==null){var pt=e.unstable_now();lt=pt;var xt=!0;try{xt=dt(!0,pt)}finally{xt?gt():(ht=!1,dt=null)}}else ht=!1}var gt;if(typeof _e=="function")gt=function(){_e(mt)};else if(typeof MessageChannel<"u"){var jt=new MessageChannel,yt=jt.port2;jt.port1.onmessage=mt,gt=function(){yt.postMessage(null)}}else gt=function(){it(mt,0)};function vt(pt){dt=pt,ht||(ht=!0,gt())}function Ct(pt,xt){at=it(function(){pt(e.unstable_now())},xt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pt){pt.callback=null},e.unstable_continueExecution=function(){tt||et||(tt=!0,vt(ut))},e.unstable_forceFrameRate=function(pt){0>pt||125<pt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<pt?Math.floor(1e3/pt):5},e.unstable_getCurrentPriorityLevel=function(){return $},e.unstable_getFirstCallbackNode=function(){return i(g)},e.unstable_next=function(pt){switch($){case 1:case 2:case 3:var xt=3;break;default:xt=$}var Et=$;$=xt;try{return pt()}finally{$=Et}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pt,xt){switch(pt){case 1:case 2:case 3:case 4:case 5:break;default:pt=3}var Et=$;$=pt;try{return xt()}finally{$=Et}},e.unstable_scheduleCallback=function(pt,xt,Et){var bt=e.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?bt+Et:bt):Et=bt,pt){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=Et+Tt,pt={id:j++,callback:xt,priorityLevel:pt,startTime:Et,expirationTime:Tt,sortIndex:-1},Et>bt?(pt.sortIndex=Et,s(b,pt),i(g)===null&&pt===i(b)&&(nt?(rt(at),at=-1):nt=!0,Ct(ot,Et-bt))):(pt.sortIndex=Tt,s(g,pt),tt||et||(tt=!0,vt(ut))),pt},e.unstable_shouldYield=ft,e.unstable_wrapCallback=function(pt){var xt=$;return function(){var Et=$;$=xt;try{return pt.apply(this,arguments)}finally{$=Et}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,s){ha(e,s),ha(e+"Capture",s)}function ha(e,s){for(ea[e]=s,e=0;e<s.length;e++)da.add(s[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,s,i,o){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,s,i,o){if(s===null||typeof s>"u"||pa(e,s,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(e,s,i,o,a,c,d){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=e,this.type=s,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];z[s]=new v(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,s,i,o){var a=z.hasOwnProperty(s)?z[s]:null;(a!==null?a.type!==0:o||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,i,a,o)&&(i=null),o||a===null?oa(s)&&(i===null?e.removeAttribute(s):e.setAttribute(s,""+i)):a.mustUseProperty?e[a.propertyName]=i===null?a.type===3?!1:"":i:(s=a.attributeName,o=a.attributeNamespace,i===null?e.removeAttribute(s):(a=a.type,i=a===3||a===4&&i===!0?"":""+i,o?e.setAttributeNS(o,s,i):e.setAttribute(s,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+e}var Na=!1;function Oa(e,s){if(!e||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(b){var o=b}Reflect.construct(e,[],s)}else{try{s.call()}catch(b){o=b}e.call(s.prototype)}else{try{throw Error()}catch(b){o=b}e()}}catch(b){if(b&&o&&typeof b.stack=="string"){for(var a=b.stack.split(`
`),c=o.stack.split(`
`),d=a.length-1,h=c.length-1;1<=d&&0<=h&&a[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(a[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||a[d]!==c[h]){var g=`
`+a[d].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return s=e.displayName||null,s!==null?s:Qa(e.type)||"Memo";case Ha:s=e._payload,e=e._init;try{return Qa(e(s))}catch{}}return null}function Ra(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(e){var s=Ta(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),o=""+e[s];if(!e.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,c=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,c.call(this,d)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),o="";return e&&(o=Ta(e)?e.checked?"true":"false":e.value),e=o,e!==i?(s.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,s){var i=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Za(e,s){var i=s.defaultValue==null?"":s.defaultValue,o=s.checked!=null?s.checked:s.defaultChecked;i=Sa(s.value!=null?s.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(e,s){s=s.checked,s!=null&&ta(e,"checked",s,!1)}function bb(e,s){ab(e,s);var i=Sa(s.value),o=s.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?cb(e,s.type,i):s.hasOwnProperty("defaultValue")&&cb(e,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function db(e,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var o=s.type;if(!(o!=="submit"&&o!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,i||s===e.value||(e.value=s),e.defaultValue=s}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function cb(e,s,i){(s!=="number"||Xa(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var eb=Array.isArray;function fb(e,s,i,o){if(e=e.options,s){s={};for(var a=0;a<i.length;a++)s["$"+i[a]]=!0;for(i=0;i<e.length;i++)a=s.hasOwnProperty("$"+e[i].value),e[i].selected!==a&&(e[i].selected=a),a&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Sa(i),s=null,a=0;a<e.length;a++){if(e[a].value===i){e[a].selected=!0,o&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function gb(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}s=i}s==null&&(s=""),i=s}e._wrapperState={initialValue:Sa(i)}}function ib(e,s){var i=Sa(s.value),o=Sa(s.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),s.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function jb(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,o,a){MSApp.execUnsafeLocalFunction(function(){return e(s,i,o,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ob(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),pb[s]=pb[e]})});function rb(e,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||pb.hasOwnProperty(e)&&pb[e]?(""+s).trim():s+"px"}function sb(e,s){e=e.style;for(var i in s)if(s.hasOwnProperty(i)){var o=i.indexOf("--")===0,a=rb(i,s[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,a):e[i]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,s){if(s){if(tb[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function vb(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var s=e.stateNode;s&&(s=Db(s),yb(e.stateNode,e.type,s))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,s=Ab;if(Ab=zb=null,Bb(e),s)for(e=0;e<s.length;e++)Bb(s[e])}}function Gb(e,s){return e(s)}function Hb(){}var Ib=!1;function Jb(e,s,i){if(Ib)return e(s,i);Ib=!0;try{return Gb(e,s,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,s){var i=e.stateNode;if(i===null)return null;var o=Db(i);if(o===null)return null;i=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p(231,s,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,s,i,o,a,c,d,h,g){var b=Array.prototype.slice.call(arguments,3);try{s.apply(i,b)}catch(j){this.onError(j)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,s,i,o,a,c,d,h,g){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,s,i,o,a,c,d,h,g){if(Tb.apply(this,arguments),Ob){if(Ob){var b=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=b)}}function Vb(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function Wb(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var s=e.alternate;if(!s){if(s=Vb(e),s===null)throw Error(p(188));return s!==e?null:e}for(var i=e,o=s;;){var a=i.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){i=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===i)return Xb(a),e;if(c===o)return Xb(a),s;c=c.sibling}throw Error(p(188))}if(i.return!==o.return)i=a,o=c;else{for(var d=!1,h=a.child;h;){if(h===i){d=!0,i=a,o=c;break}if(h===o){d=!0,o=a,i=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===i){d=!0,i=c,o=a;break}if(h===o){d=!0,o=c,i=a;break}h=h.sibling}if(!d)throw Error(p(189))}}if(i.alternate!==o)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?e:s}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=$b(e);if(s!==null)return s;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,s){var i=e.pendingLanes;if(i===0)return 0;var o=0,a=e.suspendedLanes,c=e.pingedLanes,d=i&268435455;if(d!==0){var h=d&~a;h!==0?o=tc(h):(c&=d,c!==0&&(o=tc(c)))}else d=i&~a,d!==0?o=tc(d):c!==0&&(o=tc(c));if(o===0)return 0;if(s!==0&&s!==o&&!(s&a)&&(a=o&-o,c=s&-s,a>=c||a===16&&(c&4194240)!==0))return s;if(o&4&&(o|=i&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=o;0<s;)i=31-oc(s),a=1<<i,o|=e[i],s&=~a;return o}function vc(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,s){for(var i=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,g=a[d];g===-1?(!(h&i)||h&o)&&(a[d]=vc(h,s)):g<=s&&(e.expiredLanes|=h),c&=~h}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function Ac(e,s,i){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-oc(s),e[s]=i}function Bc(e,s){var i=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var a=31-oc(i),c=1<<a;s[a]=0,o[a]=-1,e[a]=-1,i&=~c}}function Cc(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var o=31-oc(i),a=1<<o;a&s|e[o]&s&&(e[o]|=s),i&=~a}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,s){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(e,s,i,o,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:s,domEventName:i,eventSystemFlags:o,nativeEvent:c,targetContainers:[a]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),e):(e.eventSystemFlags|=o,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function Uc(e,s,i,o,a){switch(s){case"focusin":return Lc=Tc(Lc,e,s,i,o,a),!0;case"dragenter":return Mc=Tc(Mc,e,s,i,o,a),!0;case"mouseover":return Nc=Tc(Nc,e,s,i,o,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,s,i,o,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,s,i,o,a)),!0}return!1}function Vc(e){var s=Wc(e.target);if(s!==null){var i=Vb(s);if(i!==null){if(s=i.tag,s===13){if(s=Wb(i),s!==null){e.blockedOn=s,Ic(e.priority,function(){Gc(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Yc(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);wb=o,i.target.dispatchEvent(o),wb=null}else return s=Cb(i),s!==null&&Fc(s),e.blockedOn=i,!1;s.shift()}return!0}function Zc(e,s,i){Xc(e)&&i.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,s){e.blockedOn===s&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function s(a){return ad(a,e)}if(0<Kc.length){ad(Kc[0],e);for(var i=1;i<Kc.length;i++){var o=Kc[i];o.blockedOn===e&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(s),Pc.forEach(s),i=0;i<Qc.length;i++)o=Qc[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,s,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,s,i,o)}finally{C=a,cd.transition=c}}function gd(e,s,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,s,i,o)}finally{C=a,cd.transition=c}}function fd(e,s,i,o){if(dd){var a=Yc(e,s,i,o);if(a===null)hd(e,s,o,id$2,i),Sc(e,o);else if(Uc(a,e,s,i,o))o.stopPropagation();else if(Sc(e,o),s&4&&-1<Rc.indexOf(e)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(e,s,i,o),c===null&&hd(e,s,o,id$2,i),c===a)break;a=c}a!==null&&o.stopPropagation()}else hd(e,s,o,null,i)}}var id$2=null;function Yc(e,s,i,o){if(id$2=null,e=xb(o),e=Wc(e),e!==null)if(s=Vb(e),s===null)e=null;else if(i=s.tag,i===13){if(e=Wb(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return id$2=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,s=ld,i=s.length,o,a="value"in kd?kd.value:kd.textContent,c=a.length;for(e=0;e<i&&s[e]===a[e];e++);var d=i-e;for(o=1;o<=d&&s[i-o]===a[c-o];o++);return md=a.slice(e,1<o?1-o:void 0)}function od(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function s(i,o,a,c,d){this._reactName=i,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(i=e[h],this[h]=i?i(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Od[e])?!!s[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var s=Md[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,s){switch(e){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,s){switch(e){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return e=s.data,e===ee&&fe?null:e;default:return null}}function ke(e,s){if(ie)return e==="compositionend"||!ae&&ge(e,s)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!le[e.type]:s==="textarea"}function ne(e,s,i,o){Eb(o),s=oe(s,"onChange"),0<s.length&&(i=new td("onChange","change",null,i,o),e.push({event:i,listeners:s}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var s=ue(e);if(Wa(s))return e}function ve(e,s){if(e==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,e,xb(e)),Jb(re,s)}}function Ce(e,s,i){e==="focusin"?(Ae(),pe=s,qe=i,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,s){if(e==="click")return te(s)}function Fe(e,s){if(e==="input"||e==="change")return te(s)}function Ge(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,s){if(He(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),o=Object.keys(s);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var a=i[o];if(!ja.call(s,a)||!He(e[a],s[a]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,s){var i=Je(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=s&&o>=s)return{node:i,offset:s-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Le(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var e=window,s=Xa();s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)e=s.contentWindow;else break;s=Xa(e.document)}return s}function Ne(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Oe(e){var s=Me(),i=e.focusedElem,o=e.selectionRange;if(s!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(o!==null&&Ne(i)){if(s=o.start,e=o.end,e===void 0&&(e=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(e,i.value.length);else if(e=(s=i.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=i.textContent.length,c=Math.min(o.start,a);o=o.end===void 0?c:Math.min(o.end,a),!e.extend&&c>o&&(a=o,o=c,c=a),a=Ke(i,c);var d=Ke(i,o);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),c>o?(e.addRange(s),e.extend(d.node,d.offset)):(s.setEnd(d.node,d.offset),e.addRange(s)))}}for(s=[],e=i;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)e=s[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,s,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(s=new td("onSelect","select",null,s,i),e.push({event:s,listeners:o}),s.target=Qe)))}function Ve(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var s=We[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in Ye)return Xe[e]=s[i];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,s){df.set(e,s),fa(s,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,s,i){var o=e.type||"unknown-event";e.currentTarget=i,Ub(o,s,void 0,e),e.currentTarget=null}function se(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],a=o.event;o=o.listeners;e:{var c=void 0;if(s)for(var d=o.length-1;0<=d;d--){var h=o[d],g=h.instance,b=h.currentTarget;if(h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,b),c=g}else for(d=0;d<o.length;d++){if(h=o[d],g=h.instance,b=h.currentTarget,h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,b),c=g}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,s){var i=s[of];i===void 0&&(i=s[of]=new Set);var o=e+"__bubble";i.has(o)||(pf(s,e,2,!1),i.add(o))}function qf(e,s,i){var o=0;s&&(o|=4),pf(i,e,o,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,e),qf(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(e,s,i,o){switch(jd(s)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}i=a.bind(null,s,i,e),a=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),o?a!==void 0?e.addEventListener(s,i,{capture:!0,passive:a}):e.addEventListener(s,i,!0):a!==void 0?e.addEventListener(s,i,{passive:a}):e.addEventListener(s,i,!1)}function hd(e,s,i,o,a){var c=o;if(!(s&1)&&!(s&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var h=o.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(g=d.tag,g===5||g===6){o=c=d;continue e}h=h.parentNode}}o=o.return}Jb(function(){var b=c,j=xb(i),_=[];e:{var $=df.get(e);if($!==void 0){var et=td,tt=e;switch(e){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":et=Rd;break;case"focusin":tt="focus",et=Fd;break;case"focusout":tt="blur",et=Fd;break;case"beforeblur":case"afterblur":et=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Vd;break;case $e:case af:case bf:et=Hd;break;case cf:et=Xd;break;case"scroll":et=vd;break;case"wheel":et=Zd;break;case"copy":case"cut":case"paste":et=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Td}var nt=(s&4)!==0,it=!nt&&e==="scroll",rt=nt?$!==null?$+"Capture":null:$;nt=[];for(var _e=b,st;_e!==null;){st=_e;var ot=st.stateNode;if(st.tag===5&&ot!==null&&(st=ot,rt!==null&&(ot=Kb(_e,rt),ot!=null&&nt.push(tf(_e,ot,st)))),it)break;_e=_e.return}0<nt.length&&($=new et($,tt,null,i,j),_.push({event:$,listeners:nt}))}}if(!(s&7)){e:{if($=e==="mouseover"||e==="pointerover",et=e==="mouseout"||e==="pointerout",$&&i!==wb&&(tt=i.relatedTarget||i.fromElement)&&(Wc(tt)||tt[uf]))break e;if((et||$)&&($=j.window===j?j:($=j.ownerDocument)?$.defaultView||$.parentWindow:window,et?(tt=i.relatedTarget||i.toElement,et=b,tt=tt?Wc(tt):null,tt!==null&&(it=Vb(tt),tt!==it||tt.tag!==5&&tt.tag!==6)&&(tt=null)):(et=null,tt=b),et!==tt)){if(nt=Bd,ot="onMouseLeave",rt="onMouseEnter",_e="mouse",(e==="pointerout"||e==="pointerover")&&(nt=Td,ot="onPointerLeave",rt="onPointerEnter",_e="pointer"),it=et==null?$:ue(et),st=tt==null?$:ue(tt),$=new nt(ot,_e+"leave",et,i,j),$.target=it,$.relatedTarget=st,ot=null,Wc(j)===b&&(nt=new nt(rt,_e+"enter",tt,i,j),nt.target=st,nt.relatedTarget=it,ot=nt),it=ot,et&&tt)t:{for(nt=et,rt=tt,_e=0,st=nt;st;st=vf(st))_e++;for(st=0,ot=rt;ot;ot=vf(ot))st++;for(;0<_e-st;)nt=vf(nt),_e--;for(;0<st-_e;)rt=vf(rt),st--;for(;_e--;){if(nt===rt||rt!==null&&nt===rt.alternate)break t;nt=vf(nt),rt=vf(rt)}nt=null}else nt=null;et!==null&&wf(_,$,et,nt,!1),tt!==null&&it!==null&&wf(_,it,tt,nt,!0)}}e:{if($=b?ue(b):window,et=$.nodeName&&$.nodeName.toLowerCase(),et==="select"||et==="input"&&$.type==="file")var ut=ve;else if(me($))if(we)ut=Fe;else{ut=De;var ht=Ce}else(et=$.nodeName)&&et.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ut=Ee);if(ut&&(ut=ut(e,b))){ne(_,ut,i,j);break e}ht&&ht(e,$,b),e==="focusout"&&(ht=$._wrapperState)&&ht.controlled&&$.type==="number"&&cb($,"number",$.value)}switch(ht=b?ue(b):window,e){case"focusin":(me(ht)||ht.contentEditable==="true")&&(Qe=ht,Re=b,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_,i,j);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_,i,j)}var dt;if(ae)e:{switch(e){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else ie?ge(e,i)&&(at="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(at="onCompositionStart");at&&(de&&i.locale!=="ko"&&(ie||at!=="onCompositionStart"?at==="onCompositionEnd"&&ie&&(dt=nd()):(kd=j,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ht=oe(b,at),0<ht.length&&(at=new Ld(at,e,null,i,j),_.push({event:at,listeners:ht}),dt?at.data=dt:(dt=he(i),dt!==null&&(at.data=dt)))),(dt=ce?je(e,i):ke(e,i))&&(b=oe(b,"onBeforeInput"),0<b.length&&(j=new Ld("onBeforeInput","beforeinput",null,i,j),_.push({event:j,listeners:b}),j.data=dt))}se(_,s)})}function tf(e,s,i){return{instance:e,listener:s,currentTarget:i}}function oe(e,s){for(var i=s+"Capture",o=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(e,i),c!=null&&o.unshift(tf(e,c,a)),c=Kb(e,s),c!=null&&o.push(tf(e,c,a))),e=e.return}return o}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,s,i,o,a){for(var c=s._reactName,d=[];i!==null&&i!==o;){var h=i,g=h.alternate,b=h.stateNode;if(g!==null&&g===o)break;h.tag===5&&b!==null&&(h=b,a?(g=Kb(i,c),g!=null&&d.unshift(tf(i,g,h))):a||(g=Kb(i,c),g!=null&&d.push(tf(i,g,h)))),i=i.return}d.length!==0&&e.push({event:s,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,s,i){if(s=zf(s),zf(e)!==s&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,s){var i=s,o=0;do{var a=i.nextSibling;if(e.removeChild(i),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(o===0){e.removeChild(a),bd(s);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=a}while(i);bd(s)}function Lf(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var s=e[Of];if(s)return s;for(var i=e.parentNode;i;){if(s=i[uf]||i[Of]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=Mf(e);e!==null;){if(i=e[Of])return i;e=Mf(e)}return s}e=i,i=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,s){Tf++,Sf[Tf]=e.current,e.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,s){var i=e.type.contextTypes;if(!i)return Vf;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===s)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in i)a[c]=s[c];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,s,i){if(H.current!==Vf)throw Error(p(168));G(H,s),G(Wf,i)}function bg(e,s,i){var o=e.stateNode;if(s=s.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var a in o)if(!(a in s))throw Error(p(108,Ra(e)||"Unknown",a));return A({},i,o)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,s,i){var o=e.stateNode;if(!o)throw Error(p(169));i?(e=bg(e,s,Xf),o.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,s=C;try{var i=eg;for(C=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),a}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,s){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=s}function ug(e,s,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var o=rg;e=sg;var a=32-oc(o)-1;o&=~(1<<a),i+=1;var c=32-oc(s)+a;if(30<c){var d=a-a%5;c=(o&(1<<d)-1).toString(32),o>>=d,a-=d,rg=1<<32-oc(s)+a|i<<a|o,sg=c+e}else rg=1<<c|i<<a|o,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,s){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=e,s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)}function Cg(e,s){switch(e.tag){case 5:var i=e.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xg=e,yg=Lf(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xg=e,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=s,i.return=e,e.child=i,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var s=yg;if(s){var i=s;if(!Cg(e,s)){if(Dg(e))throw Error(p(418));s=Lf(i.nextSibling);var o=xg;s&&Cg(e,s)?Ag(o,i):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ef(e.type,e.memoizedProps)),s&&(s=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;s;)Ag(e,s),s=Lf(s.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(s===0){yg=Lf(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,s,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var o=i.stateNode}if(!o)throw Error(p(147,e));var a=o,c=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(d){var h=a.refs;d===null?delete h[c]:h[c]=d},s._stringRef=c,s)}if(typeof e!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,e))}return e}function Mg(e,s){throw e=Object.prototype.toString.call(s),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ng(e){var s=e._init;return s(e._payload)}function Og(e){function s(rt,_e){if(e){var st=rt.deletions;st===null?(rt.deletions=[_e],rt.flags|=16):st.push(_e)}}function i(rt,_e){if(!e)return null;for(;_e!==null;)s(rt,_e),_e=_e.sibling;return null}function o(rt,_e){for(rt=new Map;_e!==null;)_e.key!==null?rt.set(_e.key,_e):rt.set(_e.index,_e),_e=_e.sibling;return rt}function a(rt,_e){return rt=Pg(rt,_e),rt.index=0,rt.sibling=null,rt}function c(rt,_e,st){return rt.index=st,e?(st=rt.alternate,st!==null?(st=st.index,st<_e?(rt.flags|=2,_e):st):(rt.flags|=2,_e)):(rt.flags|=1048576,_e)}function d(rt){return e&&rt.alternate===null&&(rt.flags|=2),rt}function h(rt,_e,st,ot){return _e===null||_e.tag!==6?(_e=Qg(st,rt.mode,ot),_e.return=rt,_e):(_e=a(_e,st),_e.return=rt,_e)}function g(rt,_e,st,ot){var ut=st.type;return ut===ya?j(rt,_e,st.props.children,ot,st.key):_e!==null&&(_e.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&Ng(ut)===_e.type)?(ot=a(_e,st.props),ot.ref=Lg(rt,_e,st),ot.return=rt,ot):(ot=Rg(st.type,st.key,st.props,null,rt.mode,ot),ot.ref=Lg(rt,_e,st),ot.return=rt,ot)}function b(rt,_e,st,ot){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==st.containerInfo||_e.stateNode.implementation!==st.implementation?(_e=Sg(st,rt.mode,ot),_e.return=rt,_e):(_e=a(_e,st.children||[]),_e.return=rt,_e)}function j(rt,_e,st,ot,ut){return _e===null||_e.tag!==7?(_e=Tg(st,rt.mode,ot,ut),_e.return=rt,_e):(_e=a(_e,st),_e.return=rt,_e)}function _(rt,_e,st){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=Qg(""+_e,rt.mode,st),_e.return=rt,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case va:return st=Rg(_e.type,_e.key,_e.props,null,rt.mode,st),st.ref=Lg(rt,null,_e),st.return=rt,st;case wa:return _e=Sg(_e,rt.mode,st),_e.return=rt,_e;case Ha:var ot=_e._init;return _(rt,ot(_e._payload),st)}if(eb(_e)||Ka(_e))return _e=Tg(_e,rt.mode,st,null),_e.return=rt,_e;Mg(rt,_e)}return null}function $(rt,_e,st,ot){var ut=_e!==null?_e.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return ut!==null?null:h(rt,_e,""+st,ot);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return st.key===ut?g(rt,_e,st,ot):null;case wa:return st.key===ut?b(rt,_e,st,ot):null;case Ha:return ut=st._init,$(rt,_e,ut(st._payload),ot)}if(eb(st)||Ka(st))return ut!==null?null:j(rt,_e,st,ot,null);Mg(rt,st)}return null}function et(rt,_e,st,ot,ut){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return rt=rt.get(st)||null,h(_e,rt,""+ot,ut);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case va:return rt=rt.get(ot.key===null?st:ot.key)||null,g(_e,rt,ot,ut);case wa:return rt=rt.get(ot.key===null?st:ot.key)||null,b(_e,rt,ot,ut);case Ha:var ht=ot._init;return et(rt,_e,st,ht(ot._payload),ut)}if(eb(ot)||Ka(ot))return rt=rt.get(st)||null,j(_e,rt,ot,ut,null);Mg(_e,ot)}return null}function tt(rt,_e,st,ot){for(var ut=null,ht=null,dt=_e,at=_e=0,ct=null;dt!==null&&at<st.length;at++){dt.index>at?(ct=dt,dt=null):ct=dt.sibling;var lt=$(rt,dt,st[at],ot);if(lt===null){dt===null&&(dt=ct);break}e&&dt&&lt.alternate===null&&s(rt,dt),_e=c(lt,_e,at),ht===null?ut=lt:ht.sibling=lt,ht=lt,dt=ct}if(at===st.length)return i(rt,dt),I&&tg(rt,at),ut;if(dt===null){for(;at<st.length;at++)dt=_(rt,st[at],ot),dt!==null&&(_e=c(dt,_e,at),ht===null?ut=dt:ht.sibling=dt,ht=dt);return I&&tg(rt,at),ut}for(dt=o(rt,dt);at<st.length;at++)ct=et(dt,rt,at,st[at],ot),ct!==null&&(e&&ct.alternate!==null&&dt.delete(ct.key===null?at:ct.key),_e=c(ct,_e,at),ht===null?ut=ct:ht.sibling=ct,ht=ct);return e&&dt.forEach(function(ft){return s(rt,ft)}),I&&tg(rt,at),ut}function nt(rt,_e,st,ot){var ut=Ka(st);if(typeof ut!="function")throw Error(p(150));if(st=ut.call(st),st==null)throw Error(p(151));for(var ht=ut=null,dt=_e,at=_e=0,ct=null,lt=st.next();dt!==null&&!lt.done;at++,lt=st.next()){dt.index>at?(ct=dt,dt=null):ct=dt.sibling;var ft=$(rt,dt,lt.value,ot);if(ft===null){dt===null&&(dt=ct);break}e&&dt&&ft.alternate===null&&s(rt,dt),_e=c(ft,_e,at),ht===null?ut=ft:ht.sibling=ft,ht=ft,dt=ct}if(lt.done)return i(rt,dt),I&&tg(rt,at),ut;if(dt===null){for(;!lt.done;at++,lt=st.next())lt=_(rt,lt.value,ot),lt!==null&&(_e=c(lt,_e,at),ht===null?ut=lt:ht.sibling=lt,ht=lt);return I&&tg(rt,at),ut}for(dt=o(rt,dt);!lt.done;at++,lt=st.next())lt=et(dt,rt,at,lt.value,ot),lt!==null&&(e&&lt.alternate!==null&&dt.delete(lt.key===null?at:lt.key),_e=c(lt,_e,at),ht===null?ut=lt:ht.sibling=lt,ht=lt);return e&&dt.forEach(function(mt){return s(rt,mt)}),I&&tg(rt,at),ut}function it(rt,_e,st,ot){if(typeof st=="object"&&st!==null&&st.type===ya&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case va:e:{for(var ut=st.key,ht=_e;ht!==null;){if(ht.key===ut){if(ut=st.type,ut===ya){if(ht.tag===7){i(rt,ht.sibling),_e=a(ht,st.props.children),_e.return=rt,rt=_e;break e}}else if(ht.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Ha&&Ng(ut)===ht.type){i(rt,ht.sibling),_e=a(ht,st.props),_e.ref=Lg(rt,ht,st),_e.return=rt,rt=_e;break e}i(rt,ht);break}else s(rt,ht);ht=ht.sibling}st.type===ya?(_e=Tg(st.props.children,rt.mode,ot,st.key),_e.return=rt,rt=_e):(ot=Rg(st.type,st.key,st.props,null,rt.mode,ot),ot.ref=Lg(rt,_e,st),ot.return=rt,rt=ot)}return d(rt);case wa:e:{for(ht=st.key;_e!==null;){if(_e.key===ht)if(_e.tag===4&&_e.stateNode.containerInfo===st.containerInfo&&_e.stateNode.implementation===st.implementation){i(rt,_e.sibling),_e=a(_e,st.children||[]),_e.return=rt,rt=_e;break e}else{i(rt,_e);break}else s(rt,_e);_e=_e.sibling}_e=Sg(st,rt.mode,ot),_e.return=rt,rt=_e}return d(rt);case Ha:return ht=st._init,it(rt,_e,ht(st._payload),ot)}if(eb(st))return tt(rt,_e,st,ot);if(Ka(st))return nt(rt,_e,st,ot);Mg(rt,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,_e!==null&&_e.tag===6?(i(rt,_e.sibling),_e=a(_e,st),_e.return=rt,rt=_e):(i(rt,_e),_e=Qg(st,rt.mode,ot),_e.return=rt,rt=_e),d(rt)):i(rt,_e)}return it}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var s=Wg.current;E(Wg),e._currentValue=s}function bh(e,s,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),e===i)break;e=e.return}}function ch(e,s){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(dh=!0),e.firstContext=null)}function eh(e){var s=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return s}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,s,i,o){var a=s.interleaved;return a===null?(i.next=i,gh(s)):(i.next=a.next,a.next=i),s.interleaved=i,ih(e,o)}function ih(e,s){e.lanes|=s;var i=e.alternate;for(i!==null&&(i.lanes|=s),i=e,e=e.return;e!==null;)e.childLanes|=s,i=e.alternate,i!==null&&(i.childLanes|=s),i=e,e=e.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(e,s,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,K&2){var a=o.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),o.pending=s,ih(e,i)}return a=o.interleaved,a===null?(s.next=s,gh(o)):(s.next=a.next,a.next=s),o.interleaved=s,ih(e,i)}function oh(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var o=s.lanes;o&=e.pendingLanes,i|=o,s.lanes=i,Cc(e,i)}}function ph(e,s){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var a=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?a=c=d:c=c.next=d,i=i.next}while(i!==null);c===null?a=c=s:c=c.next=s}else a=c=s;i={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}function qh(e,s,i,o){var a=e.updateQueue;jh=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var g=h,b=g.next;g.next=null,d===null?c=b:d.next=b,d=g;var j=e.alternate;j!==null&&(j=j.updateQueue,h=j.lastBaseUpdate,h!==d&&(h===null?j.firstBaseUpdate=b:h.next=b,j.lastBaseUpdate=g))}if(c!==null){var _=a.baseState;d=0,j=b=g=null,h=c;do{var $=h.lane,et=h.eventTime;if((o&$)===$){j!==null&&(j=j.next={eventTime:et,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var tt=e,nt=h;switch($=s,et=i,nt.tag){case 1:if(tt=nt.payload,typeof tt=="function"){_=tt.call(et,_,$);break e}_=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=nt.payload,$=typeof tt=="function"?tt.call(et,_,$):tt,$==null)break e;_=A({},_,$);break e;case 2:jh=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,$=a.effects,$===null?a.effects=[h]:$.push(h))}else et={eventTime:et,lane:$,tag:h.tag,payload:h.payload,callback:h.callback,next:null},j===null?(b=j=et,g=_):j=j.next=et,d|=$;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;$=h,h=$.next,$.next=null,a.lastBaseUpdate=$,a.shared.pending=null}}while(!0);if(j===null&&(g=_),a.baseState=g,a.firstBaseUpdate=b,a.lastBaseUpdate=j,s=a.shared.interleaved,s!==null){a=s;do d|=a.lane,a=a.next;while(a!==s)}else c===null&&(a.shared.lanes=0);rh|=d,e.lanes=d,e.memoizedState=_}}function sh(e,s,i){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var o=e[s],a=o.callback;if(a!==null){if(o.callback=null,o=i,typeof a!="function")throw Error(p(191,a));a.call(o)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,s){switch(G(wh,s),G(vh$1,e),G(uh,th),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lb(s,e)}E(uh),G(uh,s)}function zh(){E(uh),E(vh$1),E(wh)}function Ah(e){xh(wh.current);var s=xh(uh.current),i=lb(s,e.type);s!==i&&(G(vh$1,e),G(uh,i))}function Bh(e){vh$1.current===e&&(E(uh),E(vh$1))}var L=Uf(0);function Ch(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!He(e[i],s[i]))return!1;return!0}function Nh(e,s,i,o,a,c){if(Hh=c,M=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=i(o,a),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,s.updateQueue=null,Fh.current=Qh,e=i(o,a)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,s)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var s=O===null?M.memoizedState:O.next;if(s!==null)O=s,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,s){return typeof s=="function"?s(e):s}function Wh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var o=N,a=o.baseQueue,c=i.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}o.baseQueue=a=c,i.pending=null}if(a!==null){c=a.next,o=o.baseState;var h=d=null,g=null,b=c;do{var j=b.lane;if((Hh&j)===j)g!==null&&(g=g.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),o=b.hasEagerState?b.eagerState:e(o,b.action);else{var _={lane:j,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};g===null?(h=g=_,d=o):g=g.next=_,M.lanes|=j,rh|=j}b=b.next}while(b!==null&&b!==c);g===null?d=o:g.next=h,He(o,s.memoizedState)||(dh=!0),s.memoizedState=o,s.baseState=d,s.baseQueue=g,i.lastRenderedState=o}if(e=i.interleaved,e!==null){a=e;do c=a.lane,M.lanes|=c,rh|=c,a=a.next;while(a!==e)}else a===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function Xh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var o=i.dispatch,a=i.pending,c=s.memoizedState;if(a!==null){i.pending=null;var d=a=a.next;do c=e(c,d.action),d=d.next;while(d!==a);He(c,s.memoizedState)||(dh=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),i.lastRenderedState=c}return[c,o]}function Yh(){}function Zh(e,s){var i=M,o=Uh(),a=s(),c=!He(o.memoizedState,a);if(c&&(o.memoizedState=a,dh=!0),o=o.queue,$h(ai.bind(null,i,o,e),[e]),o.getSnapshot!==s||c||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,o,a,s),void 0,null),Q===null)throw Error(p(349));Hh&30||di(i,s,a)}return a}function di(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function ci(e,s,i,o){s.value=i,s.getSnapshot=o,ei(s)&&fi(e)}function ai(e,s,i){return i(function(){ei(s)&&fi(e)})}function ei(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!He(e,i)}catch{return!0}}function fi(e){var s=ih(e,1);s!==null&&gi(s,e,1,-1)}function hi(e){var s=Th();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},s.queue=e,e=e.dispatch=ii.bind(null,M,e),[s.memoizedState,e]}function bi(e,s,i,o){return e={tag:e,create:s,destroy:i,deps:o,next:null},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.lastEffect=e.next=e):(i=s.lastEffect,i===null?s.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,s.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,s,i,o){var a=Th();M.flags|=e,a.memoizedState=bi(1|s,i,void 0,o===void 0?null:o)}function li(e,s,i,o){var a=Uh();o=o===void 0?null:o;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,o!==null&&Mh(o,d.deps)){a.memoizedState=bi(s,i,c,o);return}}M.flags|=e,a.memoizedState=bi(1|s,i,c,o)}function mi(e,s){return ki(8390656,8,e,s)}function $h(e,s){return li(2048,8,e,s)}function ni(e,s){return li(4,2,e,s)}function oi(e,s){return li(4,4,e,s)}function pi(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function qi(e,s,i){return i=i!=null?i.concat([e]):null,li(4,4,pi.bind(null,s,e),i)}function ri(){}function si(e,s){var i=Uh();s=s===void 0?null:s;var o=i.memoizedState;return o!==null&&s!==null&&Mh(s,o[1])?o[0]:(i.memoizedState=[e,s],e)}function ti(e,s){var i=Uh();s=s===void 0?null:s;var o=i.memoizedState;return o!==null&&s!==null&&Mh(s,o[1])?o[0]:(e=e(),i.memoizedState=[e,s],e)}function ui(e,s,i){return Hh&21?(He(i,s)||(i=yc(),M.lanes|=i,rh|=i,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=i)}function vi(e,s){var i=C;C=i!==0&&4>i?i:4,e(!0);var o=Gh.transition;Gh.transition={};try{e(!1),s()}finally{C=i,Gh.transition=o}}function wi(){return Uh().memoizedState}function xi(e,s,i){var o=yi(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(s,i);else if(i=hh(e,s,i,o),i!==null){var a=R();gi(i,e,o,a),Bi(i,s,o)}}function ii(e,s,i){var o=yi(e),a={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(s,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var d=s.lastRenderedState,h=c(d,i);if(a.hasEagerState=!0,a.eagerState=h,He(h,d)){var g=s.interleaved;g===null?(a.next=a,gh(s)):(a.next=g.next,g.next=a),s.interleaved=a;return}}catch{}finally{}i=hh(e,s,a,o),i!==null&&(a=R(),gi(i,e,o,a),Bi(i,s,o))}}function zi(e){var s=e.alternate;return e===M||s!==null&&s===M}function Ai(e,s){Jh=Ih=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Bi(e,s,i){if(i&4194240){var o=s.lanes;o&=e.pendingLanes,i|=o,s.lanes=i,Cc(e,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,s){return Th().memoizedState=[e,s===void 0?null:s],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,s,i){return i=i!=null?i.concat([e]):null,ki(4194308,4,pi.bind(null,s,e),i)},useLayoutEffect:function(e,s){return ki(4194308,4,e,s)},useInsertionEffect:function(e,s){return ki(4,2,e,s)},useMemo:function(e,s){var i=Th();return s=s===void 0?null:s,e=e(),i.memoizedState=[e,s],e},useReducer:function(e,s,i){var o=Th();return s=i!==void 0?i(s):s,o.memoizedState=o.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},o.queue=e,e=e.dispatch=xi.bind(null,M,e),[o.memoizedState,e]},useRef:function(e){var s=Th();return e={current:e},s.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),s=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,i){var o=M,a=Th();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=s(),Q===null)throw Error(p(349));Hh&30||di(o,s,i)}a.memoizedState=i;var c={value:i,getSnapshot:s};return a.queue=c,mi(ai.bind(null,o,c,e),[e]),o.flags|=2048,bi(9,ci.bind(null,o,c,i,s),void 0,null),i},useId:function(){var e=Th(),s=Q.identifierPrefix;if(I){var i=sg,o=rg;i=(o&~(1<<32-oc(o)-1)).toString(32)+i,s=":"+s+"R"+i,i=Kh++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=Lh++,s=":"+s+"r"+i.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return ui(s,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return N===null?s.memoizedState=e:ui(s,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,s){if(e&&e.defaultProps){s=A({},s),e=e.defaultProps;for(var i in e)s[i]===void 0&&(s[i]=e[i]);return s}return s}function Di(e,s,i,o){s=e.memoizedState,i=i(o,s),i=i==null?s:A({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,s,i){e=e._reactInternals;var o=R(),a=yi(e),c=mh(o,a);c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,a),s!==null&&(gi(s,e,a,o),oh(s,e,a))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var o=R(),a=yi(e),c=mh(o,a);c.tag=1,c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,a),s!==null&&(gi(s,e,a,o),oh(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=R(),o=yi(e),a=mh(i,o);a.tag=2,s!=null&&(a.callback=s),s=nh(e,a,o),s!==null&&(gi(s,e,o,i),oh(s,e,o))}};function Fi(e,s,i,o,a,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,c,d):s.prototype&&s.prototype.isPureReactComponent?!Ie(i,o)||!Ie(a,c):!0}function Gi(e,s,i){var o=!1,a=Vf,c=s.contextType;return typeof c=="object"&&c!==null?c=eh(c):(a=Zf(s)?Xf:H.current,o=s.contextTypes,c=(o=o!=null)?Yf(e,a):Vf),s=new s(i,c),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,e.stateNode=s,s._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),s}function Hi(e,s,i,o){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,o),s.state!==e&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(e,s,i,o){var a=e.stateNode;a.props=i,a.state=e.memoizedState,a.refs={},kh(e);var c=s.contextType;typeof c=="object"&&c!==null?a.context=eh(c):(c=Zf(s)?Xf:H.current,a.context=Yf(e,c)),a.state=e.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Di(e,s,c,i),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Ei.enqueueReplaceState(a,a.state,null),qh(e,i,a,o),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,s){try{var i="",o=s;do i+=Pa(o),o=o.return;while(o);var a=i}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:s,stack:a,digest:null}}function Ki(e,s,i){return{value:e,source:null,stack:i??null,digest:s??null}}function Li(e,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,s,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var o=s.value;return i.callback=function(){Oi||(Oi=!0,Pi=o),Li(e,s)},i}function Qi(e,s,i){i=mh(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var a=s.value;i.payload=function(){return o(a)},i.callback=function(){Li(e,s)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Li(e,s),typeof o!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=s.stack;this.componentDidCatch(s.value,{componentStack:d!==null?d:""})}),i}function Si(e,s,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Mi;var a=new Set;o.set(s,a)}else a=o.get(s),a===void 0&&(a=new Set,o.set(s,a));a.has(i)||(a.add(i),e=Ti.bind(null,e,s,i),s.then(e,e))}function Ui(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Vi(e,s,i,o,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=mh(-1,1),s.tag=2,nh(i,s,1))),i.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,s,i,o){s.child=e===null?Vg(s,null,i,o):Ug(s,e.child,i,o)}function Yi(e,s,i,o,a){i=i.render;var c=s.ref;return ch(s,a),o=Nh(e,s,i,o,c,a),i=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Zi(e,s,a)):(I&&i&&vg(s),s.flags|=1,Xi(e,s,o,a),s.child)}function $i(e,s,i,o,a){if(e===null){var c=i.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=c,bj(e,s,c,o,a)):(e=Rg(i.type,null,o,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(c=e.child,!(e.lanes&a)){var d=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(d,o)&&e.ref===s.ref)return Zi(e,s,a)}return s.flags|=1,e=Pg(c,o),e.ref=s.ref,e.return=s,s.child=e}function bj(e,s,i,o,a){if(e!==null){var c=e.memoizedProps;if(Ie(c,o)&&e.ref===s.ref)if(dh=!1,s.pendingProps=o=c,(e.lanes&a)!==0)e.flags&131072&&(dh=!0);else return s.lanes=e.lanes,Zi(e,s,a)}return cj(e,s,i,o,a)}function dj(e,s,i){var o=s.pendingProps,a=o.children,c=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return e=c!==null?c.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:i,G(ej,fj),fj|=o}else c!==null?(o=c.baseLanes|i,s.memoizedState=null):o=i,G(ej,fj),fj|=o;return Xi(e,s,a,i),s.child}function gj(e,s){var i=s.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function cj(e,s,i,o,a){var c=Zf(i)?Xf:H.current;return c=Yf(s,c),ch(s,a),i=Nh(e,s,i,o,c,a),o=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,Zi(e,s,a)):(I&&o&&vg(s),s.flags|=1,Xi(e,s,i,a),s.child)}function hj(e,s,i,o,a){if(Zf(i)){var c=!0;cg(s)}else c=!1;if(ch(s,a),s.stateNode===null)ij(e,s),Gi(s,i,o),Ii(s,i,o,a),o=!0;else if(e===null){var d=s.stateNode,h=s.memoizedProps;d.props=h;var g=d.context,b=i.contextType;typeof b=="object"&&b!==null?b=eh(b):(b=Zf(i)?Xf:H.current,b=Yf(s,b));var j=i.getDerivedStateFromProps,_=typeof j=="function"||typeof d.getSnapshotBeforeUpdate=="function";_||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==o||g!==b)&&Hi(s,d,o,b),jh=!1;var $=s.memoizedState;d.state=$,qh(s,o,d,a),g=s.memoizedState,h!==o||$!==g||Wf.current||jh?(typeof j=="function"&&(Di(s,i,j,o),g=s.memoizedState),(h=jh||Fi(s,i,h,o,$,g,b))?(_||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=g),d.props=o,d.state=g,d.context=b,o=h):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{d=s.stateNode,lh(e,s),h=s.memoizedProps,b=s.type===s.elementType?h:Ci(s.type,h),d.props=b,_=s.pendingProps,$=d.context,g=i.contextType,typeof g=="object"&&g!==null?g=eh(g):(g=Zf(i)?Xf:H.current,g=Yf(s,g));var et=i.getDerivedStateFromProps;(j=typeof et=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==_||$!==g)&&Hi(s,d,o,g),jh=!1,$=s.memoizedState,d.state=$,qh(s,o,d,a);var tt=s.memoizedState;h!==_||$!==tt||Wf.current||jh?(typeof et=="function"&&(Di(s,i,et,o),tt=s.memoizedState),(b=jh||Fi(s,i,b,o,$,tt,g)||!1)?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,tt,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,tt,g)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=tt),d.props=o,d.state=tt,d.context=g,o=b):(typeof d.componentDidUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&$===e.memoizedState||(s.flags|=1024),o=!1)}return jj(e,s,i,o,c,a)}function jj(e,s,i,o,a,c){gj(e,s);var d=(s.flags&128)!==0;if(!o&&!d)return a&&dg(s,i,!1),Zi(e,s,c);o=s.stateNode,Wi.current=s;var h=d&&typeof i.getDerivedStateFromError!="function"?null:o.render();return s.flags|=1,e!==null&&d?(s.child=Ug(s,e.child,null,c),s.child=Ug(s,null,h,c)):Xi(e,s,h,c),s.memoizedState=o.state,a&&dg(s,i,!0),s.child}function kj(e){var s=e.stateNode;s.pendingContext?ag(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(e,s.context,!1),yh(e,s.containerInfo)}function lj(e,s,i,o,a){return Ig(),Jg(a),s.flags|=256,Xi(e,s,i,o),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,s,i){var o=s.pendingProps,a=L.current,c=!1,d=(s.flags&128)!==0,h;if((h=d)||(h=e!==null&&e.memoizedState===null?!1:(a&2)!==0),h?(c=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),G(L,a&1),e===null)return Eg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(d=o.children,e=o.fallback,c?(o=s.mode,c=s.child,d={mode:"hidden",children:d},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,o,0,null),e=Tg(e,o,i,null),c.return=s,e.return=s,c.sibling=e,s.child=c,s.child.memoizedState=nj(i),s.memoizedState=mj,e):qj(s,d));if(a=e.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return rj(e,s,d,o,h,a,i);if(c){c=o.fallback,d=s.mode,a=e.child,h=a.sibling;var g={mode:"hidden",children:o.children};return!(d&1)&&s.child!==a?(o=s.child,o.childLanes=0,o.pendingProps=g,s.deletions=null):(o=Pg(a,g),o.subtreeFlags=a.subtreeFlags&14680064),h!==null?c=Pg(h,c):(c=Tg(c,d,i,null),c.flags|=2),c.return=s,o.return=s,o.sibling=c,s.child=o,o=c,c=s.child,d=e.child.memoizedState,d=d===null?nj(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~i,s.memoizedState=mj,o}return c=e.child,e=c.sibling,o=Pg(c,{mode:"visible",children:o.children}),!(s.mode&1)&&(o.lanes=i),o.return=s,o.sibling=null,e!==null&&(i=s.deletions,i===null?(s.deletions=[e],s.flags|=16):i.push(e)),s.child=o,s.memoizedState=null,o}function qj(e,s){return s=pj({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function sj(e,s,i,o){return o!==null&&Jg(o),Ug(s,e.child,null,i),e=qj(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rj(e,s,i,o,a,c,d){if(i)return s.flags&256?(s.flags&=-257,o=Ki(Error(p(422))),sj(e,s,d,o)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(c=o.fallback,a=s.mode,o=pj({mode:"visible",children:o.children},a,0,null),c=Tg(c,a,d,null),c.flags|=2,o.return=s,c.return=s,o.sibling=c,s.child=o,s.mode&1&&Ug(s,e.child,null,d),s.child.memoizedState=nj(d),s.memoizedState=mj,c);if(!(s.mode&1))return sj(e,s,d,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var h=o.dgst;return o=h,c=Error(p(419)),o=Ki(c,o,void 0),sj(e,s,d,o)}if(h=(d&e.childLanes)!==0,dh||h){if(o=Q,o!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,ih(e,a),gi(o,e,a,-1))}return tj(),o=Ki(Error(p(421))),sj(e,s,d,o)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=uj.bind(null,e),a._reactRetry=s,null):(e=c.treeContext,yg=Lf(a.nextSibling),xg=s,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=s),s=qj(s,o.children),s.flags|=4096,s)}function vj(e,s,i){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s),bh(e.return,s,i)}function wj(e,s,i,o,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:a}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=i,c.tailMode=a)}function xj(e,s,i){var o=s.pendingProps,a=o.revealOrder,c=o.tail;if(Xi(e,s,o.children,i),o=L.current,o&2)o=o&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,i,s);else if(e.tag===19)vj(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(G(L,o),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(i=s.child,a=null;i!==null;)e=i.alternate,e!==null&&Ch(e)===null&&(a=i),i=i.sibling;i=a,i===null?(a=s.child,s.child=null):(a=i.sibling,i.sibling=null),wj(s,!1,a,i,c);break;case"backwards":for(i=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Ch(e)===null){s.child=a;break}e=a.sibling,a.sibling=i,i=a,a=e}wj(s,!0,i,null,c);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Zi(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),rh|=s.lanes,!(i&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(p(153));if(s.child!==null){for(e=s.child,i=Pg(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=Pg(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function yj(e,s,i){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var o=s.type._context,a=s.memoizedProps.value;G(Wg,o._currentValue),o._currentValue=a;break;case 13:if(o=s.memoizedState,o!==null)return o.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):i&s.child.childLanes?oj(e,s,i):(G(L,L.current&1),e=Zi(e,s,i),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(o=(i&s.childLanes)!==0,e.flags&128){if(o)return xj(e,s,i);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(L,L.current),o)break;return null;case 22:case 23:return s.lanes=0,dj(e,s,i)}return Zi(e,s,i)}var zj,Aj,Bj,Cj;zj=function(e,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(e,s,i,o){var a=e.memoizedProps;if(a!==o){e=s.stateNode,xh(uh.current);var c=null;switch(i){case"input":a=Ya(e,a),o=Ya(e,o),c=[];break;case"select":a=A({},a,{value:void 0}),o=A({},o,{value:void 0}),c=[];break;case"textarea":a=gb(e,a),o=gb(e,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bf)}ub(i,o);var d;i=null;for(b in a)if(!o.hasOwnProperty(b)&&a.hasOwnProperty(b)&&a[b]!=null)if(b==="style"){var h=a[b];for(d in h)h.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ea.hasOwnProperty(b)?c||(c=[]):(c=c||[]).push(b,null));for(b in o){var g=o[b];if(h=a!=null?a[b]:void 0,o.hasOwnProperty(b)&&g!==h&&(g!=null||h!=null))if(b==="style")if(h){for(d in h)!h.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in g)g.hasOwnProperty(d)&&h[d]!==g[d]&&(i||(i={}),i[d]=g[d])}else i||(c||(c=[]),c.push(b,i)),i=g;else b==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(c=c||[]).push(b,g)):b==="children"?typeof g!="string"&&typeof g!="number"||(c=c||[]).push(b,""+g):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(ea.hasOwnProperty(b)?(g!=null&&b==="onScroll"&&D("scroll",e),c||h===g||(c=[])):(c=c||[]).push(b,g))}i&&(c=c||[]).push("style",i);var b=c;(s.updateQueue=b)&&(s.flags|=4)}};Cj=function(e,s,i,o){i!==o&&(s.flags|=4)};function Dj(e,s){if(!I)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function S(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(s)for(var a=e.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=o,e.childLanes=i,s}function Ej(e,s,i){var o=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return o=s.stateNode,zh(),E(Wf),E(H),Eh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Gg(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,s),S(s),null;case 5:Bh(s);var a=xh(wh.current);if(i=s.type,e!==null&&s.stateNode!=null)Bj(e,s,i,o,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!o){if(s.stateNode===null)throw Error(p(166));return S(s),null}if(e=xh(uh.current),Gg(s)){o=s.stateNode,i=s.type;var c=s.memoizedProps;switch(o[Of]=s,o[Pf]=c,e=(s.mode&1)!==0,i){case"dialog":D("cancel",o),D("close",o);break;case"iframe":case"object":case"embed":D("load",o);break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],o);break;case"source":D("error",o);break;case"img":case"image":case"link":D("error",o),D("load",o);break;case"details":D("toggle",o);break;case"input":Za(o,c),D("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},D("invalid",o);break;case"textarea":hb(o,c),D("invalid",o)}ub(i,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?o.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,e),a=["children",h]):typeof h=="number"&&o.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,e),a=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D("scroll",o)}switch(i){case"input":Va(o),db(o,c,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}o=a,s.updateQueue=o,o!==null&&(s.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=d.createElement(i,{is:o.is}):(e=d.createElement(i),i==="select"&&(d=e,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):e=d.createElementNS(e,i),e[Of]=s,e[Pf]=o,zj(e,s,!1,!1),s.stateNode=e;e:{switch(d=vb(i,o),i){case"dialog":D("cancel",e),D("close",e),a=o;break;case"iframe":case"object":case"embed":D("load",e),a=o;break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],e);a=o;break;case"source":D("error",e),a=o;break;case"img":case"image":case"link":D("error",e),D("load",e),a=o;break;case"details":D("toggle",e),a=o;break;case"input":Za(e,o),a=Ya(e,o),D("invalid",e);break;case"option":a=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},a=A({},o,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,o),a=gb(e,o),D("invalid",e);break;default:a=o}ub(i,a),h=a;for(c in h)if(h.hasOwnProperty(c)){var g=h[c];c==="style"?sb(e,g):c==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&nb(e,g)):c==="children"?typeof g=="string"?(i!=="textarea"||g!=="")&&ob(e,g):typeof g=="number"&&ob(e,""+g):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?g!=null&&c==="onScroll"&&D("scroll",e):g!=null&&ta(e,c,g,d))}switch(i){case"input":Va(e),db(e,o,!1);break;case"textarea":Va(e),jb(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Sa(o.value));break;case"select":e.multiple=!!o.multiple,c=o.value,c!=null?fb(e,!!o.multiple,c,!1):o.defaultValue!=null&&fb(e,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(e&&s.stateNode!=null)Cj(e,s,e.memoizedProps,o);else{if(typeof o!="string"&&s.stateNode===null)throw Error(p(166));if(i=xh(wh.current),xh(uh.current),Gg(s)){if(o=s.stateNode,i=s.memoizedProps,o[Of]=s,(c=o.nodeValue!==i)&&(e=xg,e!==null))switch(e.tag){case 3:Af(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,i,(e.mode&1)!==0)}c&&(s.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Of]=s,s.stateNode=o}return S(s),null;case 13:if(E(L),o=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,c=!1;else if(c=Gg(s),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=i,s):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(s.child.flags|=8192,s.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh(),Aj(e,s),e===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(L),c=s.memoizedState,c===null)return S(s),null;if(o=(s.flags&128)!==0,d=c.rendering,d===null)if(o)Dj(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(d=Ch(e),d!==null){for(s.flags|=128,Dj(c,!1),o=d.updateQueue,o!==null&&(s.updateQueue=o,s.flags|=4),s.subtreeFlags=0,o=i,i=s.child;i!==null;)c=i,e=o,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return G(L,L.current&1|2),s.child}e=e.sibling}c.tail!==null&&B()>Gj&&(s.flags|=128,o=!0,Dj(c,!1),s.lanes=4194304)}else{if(!o)if(e=Ch(d),e!==null){if(s.flags|=128,o=!0,i=e.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(s),null}else 2*B()-c.renderingStartTime>Gj&&i!==1073741824&&(s.flags|=128,o=!0,Dj(c,!1),s.lanes=4194304);c.isBackwards?(d.sibling=s.child,s.child=d):(i=c.last,i!==null?i.sibling=d:s.child=d,c.last=d)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=B(),s.sibling=null,i=L.current,G(L,o?i&1|2:i&1),s):(S(s),null);case 22:case 23:return Hj(),o=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(s.flags|=8192),o&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Ij(e,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return zh(),E(Wf),E(H),Eh(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ig()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,s){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){W(e,s,o)}else i.current=null}function Mj(e,s,i){try{i()}catch(o){W(e,s,o)}}var Nj=!1;function Oj(e,s){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var a=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var d=0,h=-1,g=-1,b=0,j=0,_=e,$=null;t:for(;;){for(var et;_!==i||a!==0&&_.nodeType!==3||(h=d+a),_!==c||o!==0&&_.nodeType!==3||(g=d+o),_.nodeType===3&&(d+=_.nodeValue.length),(et=_.firstChild)!==null;)$=_,_=et;for(;;){if(_===e)break t;if($===i&&++b===a&&(h=d),$===c&&++j===o&&(g=d),(et=_.nextSibling)!==null)break;_=$,$=_.parentNode}_=et}i=h===-1||g===-1?null:{start:h,end:g}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:e,selectionRange:i},dd=!1,V=s;V!==null;)if(s=V,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,V=e;else for(;V!==null;){s=V;try{var tt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(tt!==null){var nt=tt.memoizedProps,it=tt.memoizedState,rt=s.stateNode,_e=rt.getSnapshotBeforeUpdate(s.elementType===s.type?nt:Ci(s.type,nt),it);rt.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var st=s.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ot){W(s,s.return,ot)}if(e=s.sibling,e!==null){e.return=s.return,V=e;break}V=s.return}return tt=Nj,Nj=!1,tt}function Pj(e,s,i){var o=s.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&Mj(s,i,c)}a=a.next}while(a!==o)}}function Qj(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==s)}}function Rj(e){var s=e.ref;if(s!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof s=="function"?s(e):s.current=e}}function Sj(e){var s=e.alternate;s!==null&&(e.alternate=null,Sj(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,s,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(e,s):i.insertBefore(e,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(e,i)):(s=i,s.appendChild(e)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bf));else if(o!==4&&(e=e.child,e!==null))for(Vj(e,s,i),e=e.sibling;e!==null;)Vj(e,s,i),e=e.sibling}function Wj(e,s,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Wj(e,s,i),e=e.sibling;e!==null;)Wj(e,s,i),e=e.sibling}var X=null,Xj=!1;function Yj(e,s,i){for(i=i.child;i!==null;)Zj(e,s,i),i=i.sibling}function Zj(e,s,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,s);case 6:var o=X,a=Xj;X=null,Yj(e,s,i),X=o,Xj=a,X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):X.removeChild(i.stateNode));break;case 18:X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?Kf(e.parentNode,i):e.nodeType===1&&Kf(e,i),bd(e)):Kf(X,i.stateNode));break;case 4:o=X,a=Xj,X=i.stateNode.containerInfo,Xj=!0,Yj(e,s,i),X=o,Xj=a;break;case 0:case 11:case 14:case 15:if(!U&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(i,s,d),a=a.next}while(a!==o)}Yj(e,s,i);break;case 1:if(!U&&(Lj(i,s),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(h){W(i,s,h)}Yj(e,s,i);break;case 21:Yj(e,s,i);break;case 22:i.mode&1?(U=(o=U)||i.memoizedState!==null,Yj(e,s,i),U=o):Yj(e,s,i);break;default:Yj(e,s,i)}}function ak(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Kj),s.forEach(function(o){var a=bk.bind(null,e,o);i.has(o)||(i.add(o),o.then(a,a))})}}function ck(e,s){var i=s.deletions;if(i!==null)for(var o=0;o<i.length;o++){var a=i[o];try{var c=e,d=s,h=d;e:for(;h!==null;){switch(h.tag){case 5:X=h.stateNode,Xj=!1;break e;case 3:X=h.stateNode.containerInfo,Xj=!0;break e;case 4:X=h.stateNode.containerInfo,Xj=!0;break e}h=h.return}if(X===null)throw Error(p(160));Zj(c,d,a),X=null,Xj=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(b){W(a,s,b)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,e),s=s.sibling}function dk(e,s){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(s,e),ek(e),o&4){try{Pj(3,e,e.return),Qj(3,e)}catch(nt){W(e,e.return,nt)}try{Pj(5,e,e.return)}catch(nt){W(e,e.return,nt)}}break;case 1:ck(s,e),ek(e),o&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(s,e),ek(e),o&512&&i!==null&&Lj(i,i.return),e.flags&32){var a=e.stateNode;try{ob(a,"")}catch(nt){W(e,e.return,nt)}}if(o&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,d=i!==null?i.memoizedProps:c,h=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(h,d);var b=vb(h,c);for(d=0;d<g.length;d+=2){var j=g[d],_=g[d+1];j==="style"?sb(a,_):j==="dangerouslySetInnerHTML"?nb(a,_):j==="children"?ob(a,_):ta(a,j,_,b)}switch(h){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var $=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var et=c.value;et!=null?fb(a,!!c.multiple,et,!1):$!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(nt){W(e,e.return,nt)}}break;case 6:if(ck(s,e),ek(e),o&4){if(e.stateNode===null)throw Error(p(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(nt){W(e,e.return,nt)}}break;case 3:if(ck(s,e),ek(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(nt){W(e,e.return,nt)}break;case 4:ck(s,e),ek(e);break;case 13:ck(s,e),ek(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(fk=B())),o&4&&ak(e);break;case 22:if(j=i!==null&&i.memoizedState!==null,e.mode&1?(U=(b=U)||j,ck(s,e),U=b):ck(s,e),ek(e),o&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!j&&e.mode&1)for(V=e,j=e.child;j!==null;){for(_=V=j;V!==null;){switch($=V,et=$.child,$.tag){case 0:case 11:case 14:case 15:Pj(4,$,$.return);break;case 1:Lj($,$.return);var tt=$.stateNode;if(typeof tt.componentWillUnmount=="function"){o=$,i=$.return;try{s=o,tt.props=s.memoizedProps,tt.state=s.memoizedState,tt.componentWillUnmount()}catch(nt){W(o,i,nt)}}break;case 5:Lj($,$.return);break;case 22:if($.memoizedState!==null){gk(_);continue}}et!==null?(et.return=$,V=et):gk(_)}j=j.sibling}e:for(j=null,_=e;;){if(_.tag===5){if(j===null){j=_;try{a=_.stateNode,b?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=_.stateNode,g=_.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=rb("display",d))}catch(nt){W(e,e.return,nt)}}}else if(_.tag===6){if(j===null)try{_.stateNode.nodeValue=b?"":_.memoizedProps}catch(nt){W(e,e.return,nt)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;j===_&&(j=null),_=_.return}j===_&&(j=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:ck(s,e),ek(e),o&4&&ak(e);break;case 21:break;default:ck(s,e),ek(e)}}function ek(e){var s=e.flags;if(s&2){try{e:{for(var i=e.return;i!==null;){if(Tj(i)){var o=i;break e}i=i.return}throw Error(p(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(ob(a,""),o.flags&=-33);var c=Uj(e);Wj(e,c,a);break;case 3:case 4:var d=o.stateNode.containerInfo,h=Uj(e);Vj(e,h,d);break;default:throw Error(p(161))}}catch(g){W(e,e.return,g)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hk(e,s,i){V=e,ik(e)}function ik(e,s,i){for(var o=(e.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&o){var d=a.memoizedState!==null||Jj;if(!d){var h=a.alternate,g=h!==null&&h.memoizedState!==null||U;h=Jj;var b=U;if(Jj=d,(U=g)&&!b)for(V=a;V!==null;)d=V,g=d.child,d.tag===22&&d.memoizedState!==null?jk(a):g!==null?(g.return=d,V=g):jk(a);for(;c!==null;)V=c,ik(c),c=c.sibling;V=a,Jj=h,U=b}kk(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):kk(e)}}function kk(e){for(;V!==null;){var s=V;if(s.flags&8772){var i=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var o=s.stateNode;if(s.flags&4&&!U)if(i===null)o.componentDidMount();else{var a=s.elementType===s.type?i.memoizedProps:Ci(s.type,i.memoizedProps);o.componentDidUpdate(a,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&sh(s,c,o);break;case 3:var d=s.updateQueue;if(d!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}sh(s,d,i)}break;case 5:var h=s.stateNode;if(i===null&&s.flags&4){i=h;var g=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&i.focus();break;case"img":g.src&&(i.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var b=s.alternate;if(b!==null){var j=b.memoizedState;if(j!==null){var _=j.dehydrated;_!==null&&bd(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||s.flags&512&&Rj(s)}catch($){W(s,s.return,$)}}if(s===e){V=null;break}if(i=s.sibling,i!==null){i.return=s.return,V=i;break}V=s.return}}function gk(e){for(;V!==null;){var s=V;if(s===e){V=null;break}var i=s.sibling;if(i!==null){i.return=s.return,V=i;break}V=s.return}}function jk(e){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{Qj(4,s)}catch(g){W(s,i,g)}break;case 1:var o=s.stateNode;if(typeof o.componentDidMount=="function"){var a=s.return;try{o.componentDidMount()}catch(g){W(s,a,g)}}var c=s.return;try{Rj(s)}catch(g){W(s,c,g)}break;case 5:var d=s.return;try{Rj(s)}catch(g){W(s,d,g)}}}catch(g){W(s,s.return,g)}if(s===e){V=null;break}var h=s.sibling;if(h!==null){h.return=s.return,V=h;break}V=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,s,i,o){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,i,o),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(e,Z)),Dk(e,o),i===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,s){var i=e.callbackNode;wc(e,s);var o=uc(e,e===Q?Z:0);if(o===0)i!==null&&bc(i),e.callbackNode=null,e.callbackPriority=0;else if(s=o&-o,e.callbackPriority!==s){if(i!=null&&bc(i),s===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(o)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,e))}e.callbackPriority=s,e.callbackNode=i}}function Gk(e,s){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var i=e.callbackNode;if(Hk()&&e.callbackNode!==i)return null;var o=uc(e,e===Q?Z:0);if(o===0)return null;if(o&30||o&e.expiredLanes||s)s=Ik(e,o);else{s=o;var a=K;K|=2;var c=Jk();(Q!==e||Z!==s)&&(uk=null,Gj=B()+500,Kk(e,s));do try{Lk();break}catch(h){Mk(e,h)}while(!0);$g(),mk.current=c,K=a,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(a=xc(e),a!==0&&(o=a,s=Nk(e,a))),s===1)throw i=pk,Kk(e,0),Ck(e,o),Dk(e,B()),i;if(s===6)Ck(e,o);else{if(a=e.current.alternate,!(o&30)&&!Ok(a)&&(s=Ik(e,o),s===2&&(c=xc(e),c!==0&&(o=c,s=Nk(e,c))),s===1))throw i=pk,Kk(e,0),Ck(e,o),Dk(e,B()),i;switch(e.finishedWork=a,e.finishedLanes=o,s){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,o),(o&130023424)===o&&(s=fk+500-B(),10<s)){if(uc(e,0)!==0)break;if(a=e.suspendedLanes,(a&o)!==o){R(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),s);break}Pk(e,tk,uk);break;case 4:if(Ck(e,o),(o&4194240)===o)break;for(s=e.eventTimes,a=-1;0<o;){var d=31-oc(o);c=1<<d,d=s[d],d>a&&(a=d),o&=~c}if(o=a,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*lk(o/1960))-o,10<o){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),o);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===i?Gk.bind(null,e):null}function Nk(e,s){var i=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,s).flags|=256),e=Ik(e,s),e!==2&&(s=tk,tk=i,s!==null&&Fj(s)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var s=e;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var a=i[o],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(e,s){for(s&=~rk,s&=~qk,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var i=31-oc(s),o=1<<i;e[i]=-1,s&=~o}}function Ek(e){if(K&6)throw Error(p(327));Hk();var s=uc(e,0);if(!(s&1))return Dk(e,B()),null;var i=Ik(e,s);if(e.tag!==0&&i===2){var o=xc(e);o!==0&&(s=o,i=Nk(e,o))}if(i===1)throw i=pk,Kk(e,0),Ck(e,s),Dk(e,B()),i;if(i===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,s){var i=K;K|=1;try{return e(s)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var i=ok.transition,o=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=o,ok.transition=i,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,s){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var o=i;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(i=fh[s],o=i.interleaved,o!==null){i.interleaved=null;var a=o.next,c=i.pending;if(c!==null){var d=c.next;c.next=a,o.next=d}i.pending=o}fh=null}return e}function Mk(e,s){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var o=M.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=s,Y=null;break}e:{var c=e,d=i.return,h=i,g=s;if(s=Z,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var b=g,j=h,_=j.tag;if(!(j.mode&1)&&(_===0||_===11||_===15)){var $=j.alternate;$?(j.updateQueue=$.updateQueue,j.memoizedState=$.memoizedState,j.lanes=$.lanes):(j.updateQueue=null,j.memoizedState=null)}var et=Ui(d);if(et!==null){et.flags&=-257,Vi(et,d,h,c,s),et.mode&1&&Si(c,b,s),s=et,g=b;var tt=s.updateQueue;if(tt===null){var nt=new Set;nt.add(g),s.updateQueue=nt}else tt.add(g);break e}else{if(!(s&1)){Si(c,b,s),tj();break e}g=Error(p(426))}}else if(I&&h.mode&1){var it=Ui(d);if(it!==null){!(it.flags&65536)&&(it.flags|=256),Vi(it,d,h,c,s),Jg(Ji(g,h));break e}}c=g=Ji(g,h),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var rt=Ni(c,g,s);ph(c,rt);break e;case 1:h=g;var _e=c.type,st=c.stateNode;if(!(c.flags&128)&&(typeof _e.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Ri===null||!Ri.has(st)))){c.flags|=65536,s&=-s,c.lanes|=s;var ot=Qi(c,h,s);ph(c,ot);break e}}c=c.return}while(c!==null)}Sk(i)}catch(ut){s=ut,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,s){var i=K;K|=2;var o=Jk();(Q!==e||Z!==s)&&(uk=null,Kk(e,s));do try{Tk();break}catch(a){Mk(e,a)}while(!0);if($g(),K=i,mk.current=o,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var s=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,s===null?Sk(e):Y=s,nk.current=null}function Sk(e){var s=e;do{var i=s.alternate;if(e=s.return,s.flags&32768){if(i=Ij(i,s),i!==null){i.flags&=32767,Y=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,s,fj),i!==null){Y=i;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=e}while(s!==null);T===0&&(T=5)}function Pk(e,s,i){var o=C,a=ok.transition;try{ok.transition=null,C=1,Wk(e,s,i,o)}finally{ok.transition=a,C=o}return null}function Wk(e,s,i,o){do Hk();while(wk!==null);if(K&6)throw Error(p(327));i=e.finishedWork;var a=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(e,c),e===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var h=K;K|=4,nk.current=null,Oj(e,i),dk(i,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=i,hk(i),dc(),K=h,C=d,ok.transition=c}else e.current=i;if(vk&&(vk=!1,wk=e,xk=a),c=e.pendingLanes,c===0&&(Ri=null),mc(i.stateNode),Dk(e,B()),s!==null)for(o=e.onRecoverableError,i=0;i<s.length;i++)a=s[i],o(a.value,{componentStack:a.stack,digest:a.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),c=e.pendingLanes,c&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),s=ok.transition,i=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var o=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=e.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var h=c.deletions;if(h!==null){for(var g=0;g<h.length;g++){var b=h[g];for(V=b;V!==null;){var j=V;switch(j.tag){case 0:case 11:case 15:Pj(8,j,c)}var _=j.child;if(_!==null)_.return=j,V=_;else for(;V!==null;){j=V;var $=j.sibling,et=j.return;if(Sj(j),j===b){V=null;break}if($!==null){$.return=et,V=$;break}V=et}}}var tt=c.alternate;if(tt!==null){var nt=tt.child;if(nt!==null){tt.child=null;do{var it=nt.sibling;nt.sibling=null,nt=it}while(nt!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var rt=c.sibling;if(rt!==null){rt.return=c.return,V=rt;break e}V=c.return}}var _e=e.current;for(V=_e;V!==null;){d=V;var st=d.child;if(d.subtreeFlags&2064&&st!==null)st.return=d,V=st;else e:for(d=_e;V!==null;){if(h=V,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(ut){W(h,h.return,ut)}if(h===d){V=null;break e}var ot=h.sibling;if(ot!==null){ot.return=h.return,V=ot;break e}V=h.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}o=!0}return o}finally{C=i,ok.transition=s}}return!1}function Xk(e,s,i){s=Ji(i,s),s=Ni(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s))}function W(e,s,i){if(e.tag===3)Xk(e,e,i);else for(;s!==null;){if(s.tag===3){Xk(s,e,i);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){e=Ji(i,e),e=Qi(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e));break}}s=s.return}}function Ti(e,s,i){var o=e.pingCache;o!==null&&o.delete(s),s=R(),e.pingedLanes|=e.suspendedLanes&i,Q===e&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=i),Dk(e,s)}function Yk(e,s){s===0&&(e.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var i=R();e=ih(e,s),e!==null&&(Ac(e,s,i),Dk(e,i))}function uj(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Yk(e,i)}function bk(e,s){var i=0;switch(e.tag){case 13:var o=e.stateNode,a=e.memoizedState;a!==null&&(i=a.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(s),Yk(e,i)}var Vk;Vk=function(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&i)&&!(s.flags&128))return dh=!1,yj(e,s,i);dh=!!(e.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var o=s.type;ij(e,s),e=s.pendingProps;var a=Yf(s,H.current);ch(s,i),a=Nh(null,s,o,e,a,i);var c=Sh();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(o)?(c=!0,cg(s)):c=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kh(s),a.updater=Ei,s.stateNode=a,a._reactInternals=s,Ii(s,o,e,i),s=jj(null,s,o,!0,c,i)):(s.tag=0,I&&c&&vg(s),Xi(null,s,a,i),s=s.child),s;case 16:o=s.elementType;e:{switch(ij(e,s),e=s.pendingProps,a=o._init,o=a(o._payload),s.type=o,a=s.tag=Zk(o),e=Ci(o,e),a){case 0:s=cj(null,s,o,e,i);break e;case 1:s=hj(null,s,o,e,i);break e;case 11:s=Yi(null,s,o,e,i);break e;case 14:s=$i(null,s,o,Ci(o.type,e),i);break e}throw Error(p(306,o,""))}return s;case 0:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),cj(e,s,o,a,i);case 1:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),hj(e,s,o,a,i);case 3:e:{if(kj(s),e===null)throw Error(p(387));o=s.pendingProps,c=s.memoizedState,a=c.element,lh(e,s),qh(s,o,null,i);var d=s.memoizedState;if(o=d.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){a=Ji(Error(p(423)),s),s=lj(e,s,o,i,a);break e}else if(o!==a){a=Ji(Error(p(424)),s),s=lj(e,s,o,i,a);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,i=Vg(s,null,o,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),o===a){s=Zi(e,s,i);break e}Xi(e,s,o,i)}s=s.child}return s;case 5:return Ah(s),e===null&&Eg(s),o=s.type,a=s.pendingProps,c=e!==null?e.memoizedProps:null,d=a.children,Ef(o,a)?d=null:c!==null&&Ef(o,c)&&(s.flags|=32),gj(e,s),Xi(e,s,d,i),s.child;case 6:return e===null&&Eg(s),null;case 13:return oj(e,s,i);case 4:return yh(s,s.stateNode.containerInfo),o=s.pendingProps,e===null?s.child=Ug(s,null,o,i):Xi(e,s,o,i),s.child;case 11:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),Yi(e,s,o,a,i);case 7:return Xi(e,s,s.pendingProps,i),s.child;case 8:return Xi(e,s,s.pendingProps.children,i),s.child;case 12:return Xi(e,s,s.pendingProps.children,i),s.child;case 10:e:{if(o=s.type._context,a=s.pendingProps,c=s.memoizedProps,d=a.value,G(Wg,o._currentValue),o._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===a.children&&!Wf.current){s=Zi(e,s,i);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var g=h.firstContext;g!==null;){if(g.context===o){if(c.tag===1){g=mh(-1,i&-i),g.tag=2;var b=c.updateQueue;if(b!==null){b=b.shared;var j=b.pending;j===null?g.next=g:(g.next=j.next,j.next=g),b.pending=g}}c.lanes|=i,g=c.alternate,g!==null&&(g.lanes|=i),bh(c.return,i,s),h.lanes|=i;break}g=g.next}}else if(c.tag===10)d=c.type===s.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=i,h=d.alternate,h!==null&&(h.lanes|=i),bh(d,i,s),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===s){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(e,s,a.children,i),s=s.child}return s;case 9:return a=s.type,o=s.pendingProps.children,ch(s,i),a=eh(a),o=o(a),s.flags|=1,Xi(e,s,o,i),s.child;case 14:return o=s.type,a=Ci(o,s.pendingProps),a=Ci(o.type,a),$i(e,s,o,a,i);case 15:return bj(e,s,s.type,s.pendingProps,i);case 17:return o=s.type,a=s.pendingProps,a=s.elementType===o?a:Ci(o,a),ij(e,s),s.tag=1,Zf(o)?(e=!0,cg(s)):e=!1,ch(s,i),Gi(s,o,a),Ii(s,o,a,i),jj(null,s,o,!0,e,i);case 19:return xj(e,s,i);case 22:return dj(e,s,i)}throw Error(p(156,s.tag))};function Fk(e,s){return ac(e,s)}function $k(e,s,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,s,i,o){return new $k(e,s,i,o)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,s){var i=e.alternate;return i===null?(i=Bg(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Rg(e,s,i,o,a,c){var d=2;if(o=e,typeof e=="function")aj(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya:return Tg(i.children,a,c,s);case za:d=8,a|=8;break;case Aa:return e=Bg(12,i,s,a|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,i,s,a),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,i,s,a),e.elementType=Fa,e.lanes=c,e;case Ia:return pj(i,a,c,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,o=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return s=Bg(d,i,s,a),s.elementType=e,s.type=o,s.lanes=c,s}function Tg(e,s,i,o){return e=Bg(7,e,o,s),e.lanes=i,e}function pj(e,s,i,o){return e=Bg(22,e,o,s),e.elementType=Ia,e.lanes=i,e.stateNode={isHidden:!1},e}function Qg(e,s,i){return e=Bg(6,e,null,s),e.lanes=i,e}function Sg(e,s,i){return s=Bg(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function al(e,s,i,o,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function bl(e,s,i,o,a,c,d,h,g){return e=new al(e,s,i,h,g),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Bg(3,null,null,s),e.current=c,c.stateNode=e,c.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),e}function cl(e,s,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:e,containerInfo:s,implementation:i}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(e.tag===1){var i=e.type;if(Zf(i))return bg(e,i,s)}return s}function el(e,s,i,o,a,c,d,h,g){return e=bl(i,o,!0,e,a,c,d,h,g),e.context=dl(null),i=e.current,o=R(),a=yi(i),c=mh(o,a),c.callback=s??null,nh(i,c,a),e.current.lanes=a,Ac(e,a,o),Dk(e,o),e}function fl(e,s,i,o){var a=s.current,c=R(),d=yi(a);return i=dl(i),s.context===null?s.context=i:s.pendingContext=i,s=mh(c,d),s.payload={element:e},o=o===void 0?null:o,o!==null&&(s.callback=o),e=nh(a,s,d),e!==null&&(gi(e,a,d,c),oh(e,a,d)),d}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function il(e,s){hl(e,s),(e=e.alternate)&&hl(e,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(p(409));fl(e,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Rk(function(){fl(null,e,null,null)}),s[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var s=Hc();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Qc.length&&s!==0&&s<Qc[i].priority;i++);Qc.splice(i,0,e),i===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,s,i,o,a){if(a){if(typeof o=="function"){var c=o;o=function(){var b=gl(d);c.call(b)}}var d=el(s,o,e,0,null,!1,!1,"",pl);return e._reactRootContainer=d,e[uf]=d.current,sf(e.nodeType===8?e.parentNode:e),Rk(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof o=="function"){var h=o;o=function(){var b=gl(g);h.call(b)}}var g=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=g,e[uf]=g.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(s,g,i,o)}),g}function rl(e,s,i,o,a){var c=i._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var h=a;a=function(){var g=gl(d);h.call(g)}}fl(s,d,e,a)}else d=ql(i,s,e,a,o);return gl(d)}Ec=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var i=tc(s.pendingLanes);i!==0&&(Cc(s,i|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var o=ih(e,1);if(o!==null){var a=R();gi(o,e,1,a)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var s=ih(e,134217728);if(s!==null){var i=R();gi(s,e,134217728,i)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var s=yi(e),i=ih(e,s);if(i!==null){var o=R();gi(i,e,s,o)}il(e,s)}};Hc=function(){return C};Ic=function(e,s){var i=C;try{return C=e,s()}finally{C=i}};yb=function(e,s,i){switch(s){case"input":if(bb(e,i),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var o=i[s];if(o!==e&&o.form===e.form){var a=Db(o);if(!a)throw Error(p(90));Wa(o),bb(o,a)}}}break;case"textarea":ib(e,i);break;case"select":s=i.value,s!=null&&fb(e,!!i.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p(200));return cl(e,s,null,i)};reactDom_production_min.createRoot=function(e,s){if(!nl(e))throw Error(p(299));var i=!1,o="",a=kl;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=bl(e,1,!1,null,null,i,!1,o,a),e[uf]=s.current,sf(e.nodeType===8?e.parentNode:e),new ll(s)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(s),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!0,i)};reactDom_production_min.hydrateRoot=function(e,s,i){if(!nl(e))throw Error(p(405));var o=i!=null&&i.hydratedSources||null,a=!1,c="",d=kl;if(i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),s=el(s,null,e,1,i??null,a,!1,c,d),e[uf]=s.current,sf(e),o)for(e=0;e<o.length;e++)i=o[e],a=i._getVersion,a=a(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,a]:s.mutableSourceEagerHydrationData.push(i,a);return new ml(s)};reactDom_production_min.render=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!1,i)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,s,i,o){if(!ol(i))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,s,i,!1,o)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(e={}){function s(o,a){let{pathname:c,search:d,hash:h}=o.location;return createLocation("",{pathname:c,search:d,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function i(o,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(s,i,null,e)}function invariant$1(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function warning(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,s){return{usr:e.state,key:e.key,idx:s}}function createLocation(e,s,i=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?parsePath(s):s,state:i,key:s&&s.key||o||createKey()}}function createPath({pathname:e="/",search:s="",hash:i=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function parsePath(e){let s={};if(e){let i=e.indexOf("#");i>=0&&(s.hash=e.substring(i),e=e.substring(0,i));let o=e.indexOf("?");o>=0&&(s.search=e.substring(o),e=e.substring(0,o)),e&&(s.pathname=e)}return s}function getUrlBasedHistory(e,s,i,o={}){let{window:a=document.defaultView,v5Compat:c=!1}=o,d=a.history,h="POP",g=null,b=j();b==null&&(b=0,d.replaceState({...d.state,idx:b},""));function j(){return(d.state||{idx:null}).idx}function _(){h="POP";let it=j(),rt=it==null?null:it-b;b=it,g&&g({action:h,location:nt.location,delta:rt})}function $(it,rt){h="PUSH";let _e=createLocation(nt.location,it,rt);b=j()+1;let st=getHistoryState(_e,b),ot=nt.createHref(_e);try{d.pushState(st,"",ot)}catch(ut){if(ut instanceof DOMException&&ut.name==="DataCloneError")throw ut;a.location.assign(ot)}c&&g&&g({action:h,location:nt.location,delta:1})}function et(it,rt){h="REPLACE";let _e=createLocation(nt.location,it,rt);b=j();let st=getHistoryState(_e,b),ot=nt.createHref(_e);d.replaceState(st,"",ot),c&&g&&g({action:h,location:nt.location,delta:0})}function tt(it){return createBrowserURLImpl(it)}let nt={get action(){return h},get location(){return e(a,d)},listen(it){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,_),g=it,()=>{a.removeEventListener(PopStateEventType,_),g=null}},createHref(it){return s(a,it)},createURL:tt,encodeLocation(it){let rt=tt(it);return{pathname:rt.pathname,search:rt.search,hash:rt.hash}},push:$,replace:et,go(it){return d.go(it)}};return nt}function createBrowserURLImpl(e,s=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(i,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:createPath(e);return o=o.replace(/ $/,"%20"),!s&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function matchRoutes(e,s,i="/"){return matchRoutesImpl(e,s,i,!1)}function matchRoutesImpl(e,s,i,o){let a=typeof s=="string"?parsePath(s):s,c=stripBasename(a.pathname||"/",i);if(c==null)return null;let d=flattenRoutes(e);rankRouteBranches(d);let h=null;for(let g=0;h==null&&g<d.length;++g){let b=decodePath(c);h=matchRouteBranch(d[g],b,o)}return h}function flattenRoutes(e,s=[],i=[],o="",a=!1){let c=(d,h,g=a,b)=>{let j={relativePath:b===void 0?d.path||"":b,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(o)&&g)return;invariant$1(j.relativePath.startsWith(o),`Absolute route path "${j.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(o.length)}let _=joinPaths([o,j.relativePath]),$=i.concat(j);d.children&&d.children.length>0&&(invariant$1(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),flattenRoutes(d.children,s,$,_,g)),!(d.path==null&&!d.index)&&s.push({path:_,score:computeScore(_,d.index),routesMeta:$})};return e.forEach((d,h)=>{var g;if(d.path===""||!((g=d.path)!=null&&g.includes("?")))c(d,h);else for(let b of explodeOptionalSegments(d.path))c(d,h,!0,b)}),s}function explodeOptionalSegments(e){let s=e.split("/");if(s.length===0)return[];let[i,...o]=s,a=i.endsWith("?"),c=i.replace(/\?$/,"");if(o.length===0)return a?[c,""]:[c];let d=explodeOptionalSegments(o.join("/")),h=[];return h.push(...d.map(g=>g===""?c:[c,g].join("/"))),a&&h.push(...d),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function rankRouteBranches(e){e.sort((s,i)=>s.score!==i.score?i.score-s.score:compareIndexes(s.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,s){let i=e.split("/"),o=i.length;return i.some(isSplat)&&(o+=splatPenalty),s&&(o+=indexRouteValue),i.filter(a=>!isSplat(a)).reduce((a,c)=>a+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,s){return e.length===s.length&&e.slice(0,-1).every((o,a)=>o===s[a])?e[e.length-1]-s[s.length-1]:0}function matchRouteBranch(e,s,i=!1){let{routesMeta:o}=e,a={},c="/",d=[];for(let h=0;h<o.length;++h){let g=o[h],b=h===o.length-1,j=c==="/"?s:s.slice(c.length)||"/",_=matchPath({path:g.relativePath,caseSensitive:g.caseSensitive,end:b},j),$=g.route;if(!_&&b&&i&&!o[o.length-1].route.index&&(_=matchPath({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},j)),!_)return null;Object.assign(a,_.params),d.push({params:a,pathname:joinPaths([c,_.pathname]),pathnameBase:normalizePathname(joinPaths([c,_.pathnameBase])),route:$}),_.pathnameBase!=="/"&&(c=joinPaths([c,_.pathnameBase]))}return d}function matchPath(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,o]=compilePath(e.path,e.caseSensitive,e.end),a=s.match(i);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:o.reduce((b,{paramName:j,isOptional:_},$)=>{if(j==="*"){let tt=h[$]||"";d=c.slice(0,c.length-tt.length).replace(/(.)\/+$/,"$1")}const et=h[$];return _&&!et?b[j]=void 0:b[j]=(et||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:d,pattern:e}}function compilePath(e,s=!1,i=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,g)=>(o.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),o]}function decodePath(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function stripBasename(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let i=s.endsWith("/")?s.length-1:s.length,o=e.charAt(i);return o&&o!=="/"?null:e.slice(i)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=e=>ABSOLUTE_URL_REGEX.test(e);function resolvePath(e,s="/"){let{pathname:i,search:o="",hash:a=""}=typeof e=="string"?parsePath(e):e,c;if(i)if(isAbsoluteUrl(i))c=i;else{if(i.includes("//")){let d=i;i=i.replace(/\/\/+/g,"/"),warning(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${i}`)}i.startsWith("/")?c=resolvePathname(i.substring(1),"/"):c=resolvePathname(i,s)}else c=s;return{pathname:c,search:normalizeSearch(o),hash:normalizeHash(a)}}function resolvePathname(e,s){let i=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?i.length>1&&i.pop():a!=="."&&i.push(a)}),i.length>1?i.join("/"):"/"}function getInvalidPathError(e,s,i,o){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((s,i)=>i===0||s.route.path&&s.route.path.length>0)}function getResolveToMatches(e){let s=getPathContributingMatches(e);return s.map((i,o)=>o===s.length-1?i.pathname:i.pathnameBase)}function resolveTo(e,s,i,o=!1){let a;typeof e=="string"?a=parsePath(e):(a={...e},invariant$1(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$1(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$1(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let c=e===""||a.pathname==="",d=c?"/":a.pathname,h;if(d==null)h=i;else{let _=s.length-1;if(!o&&d.startsWith("..")){let $=d.split("/");for(;$[0]==="..";)$.shift(),_-=1;a.pathname=$.join("/")}h=_>=0?s[_]:"/"}let g=resolvePath(a,h),b=d&&d!=="/"&&d.endsWith("/"),j=(c||d===".")&&i.endsWith("/");return!g.pathname.endsWith("/")&&(b||j)&&(g.pathname+="/"),g}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ErrorResponseImpl=class{constructor(e,s,i,o=!1){this.status=e,this.statusText=s||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function getRoutePattern(e){return e.map(s=>s.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(e,s){let i=e;if(typeof i!="string"||!ABSOLUTE_URL_REGEX.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let o=i,a=!1;if(isBrowser$2)try{let c=new URL(window.location.href),d=i.startsWith("//")?new URL(c.protocol+i):new URL(i),h=stripBasename(d.pathname,s);d.origin===c.origin&&h!=null?i=h+d.search+d.hash:a=!0}catch{warning(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:a,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let s=JSON.parse(e.slice(28));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.location=="string"&&typeof s.reloadDocument=="boolean"&&typeof s.replace=="boolean")return s}catch{}}function decodeRouteErrorResponseDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let s=JSON.parse(e.slice(40));if(typeof s=="object"&&s&&typeof s.status=="number"&&typeof s.statusText=="string")return new ErrorResponseImpl(s.status,s.statusText,s.data)}catch{}}function useHref(e,{relative:s}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=reactExports.useContext(NavigationContext),{hash:a,pathname:c,search:d}=useResolvedPath(e,{relative:s}),h=c;return i!=="/"&&(h=c==="/"?i:joinPaths([i,c])),o.createHref({pathname:h,search:d,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:s,navigator:i}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),c=JSON.stringify(getResolveToMatches(o)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{d.current=!0}),reactExports.useCallback((g,b={})=>{if(warning(d.current,navigateEffectWarning),!d.current)return;if(typeof g=="number"){i.go(g);return}let j=resolveTo(g,JSON.parse(c),a,b.relative==="path");e==null&&s!=="/"&&(j.pathname=j.pathname==="/"?s:joinPaths([s,j.pathname])),(b.replace?i.replace:i.push)(j,b.state,b)},[s,i,c,a,e])}reactExports.createContext(null);function useResolvedPath(e,{relative:s}={}){let{matches:i}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),a=JSON.stringify(getResolveToMatches(i));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(a),o,s==="path"),[e,a,o,s])}function useRoutes(e,s){return useRoutesImpl(e,s)}function useRoutesImpl(e,s,i,o,a){var _e;invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=reactExports.useContext(NavigationContext),{matches:d}=reactExports.useContext(RouteContext),h=d[d.length-1],g=h?h.params:{},b=h?h.pathname:"/",j=h?h.pathnameBase:"/",_=h&&h.route;{let st=_&&_.path||"";warningOnce(b,!_||st.endsWith("*")||st.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${st}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${st}"> to <Route path="${st==="/"?"*":`${st}/*`}">.`)}let $=useLocation(),et;if(s){let st=typeof s=="string"?parsePath(s):s;invariant$1(j==="/"||((_e=st.pathname)==null?void 0:_e.startsWith(j)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${st.pathname}" was given in the \`location\` prop.`),et=st}else et=$;let tt=et.pathname||"/",nt=tt;if(j!=="/"){let st=j.replace(/^\//,"").split("/");nt="/"+tt.replace(/^\//,"").split("/").slice(st.length).join("/")}let it=matchRoutes(e,{pathname:nt});warning(_||it!=null,`No routes matched location "${et.pathname}${et.search}${et.hash}" `),warning(it==null||it[it.length-1].route.element!==void 0||it[it.length-1].route.Component!==void 0||it[it.length-1].route.lazy!==void 0,`Matched leaf route at location "${et.pathname}${et.search}${et.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let rt=_renderMatches(it&&it.map(st=>Object.assign({},st,{params:Object.assign({},g,st.params),pathname:joinPaths([j,c.encodeLocation?c.encodeLocation(st.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:st.pathname]),pathnameBase:st.pathnameBase==="/"?j:joinPaths([j,c.encodeLocation?c.encodeLocation(st.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:st.pathnameBase])})),d,i,o,a);return s&&rt?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...et},navigationType:"POP"}},rt):rt}function DefaultErrorComponent(){let e=useRouteError(),s=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},c={padding:"2px 4px",backgroundColor:o},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:c},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:c},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},s),i?reactExports.createElement("pre",{style:a},i):null,d)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.onError?this.props.onError(e,s):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const i=decodeRouteErrorResponseDigest(e.digest);i&&(e=i)}let s=e!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:e},s):s}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:e,error:s}){let{basename:i}=reactExports.useContext(NavigationContext);if(typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){let o=decodeRedirectErrorDigest(s.digest);if(o){let a=errorRedirectHandledMap.get(s);if(a)throw a;let c=parseToInfo(o.location,i);if(isBrowser$2&&!errorRedirectHandledMap.get(s))if(c.isExternal||o.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:o.replace}));throw errorRedirectHandledMap.set(s,d),d}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return e}function RenderedRoute({routeContext:e,match:s,children:i}){let o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},i)}function _renderMatches(e,s=[],i=null,o=null,a=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(s.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let c=e,d=i==null?void 0:i.errors;if(d!=null){let j=c.findIndex(_=>_.route.id&&(d==null?void 0:d[_.route.id])!==void 0);invariant$1(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,j+1))}let h=!1,g=-1;if(i)for(let j=0;j<c.length;j++){let _=c[j];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=j),_.route.id){let{loaderData:$,errors:et}=i,tt=_.route.loader&&!$.hasOwnProperty(_.route.id)&&(!et||et[_.route.id]===void 0);if(_.route.lazy||tt){h=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let b=i&&o?(j,_)=>{var $,et;o(j,{location:i.location,params:((et=($=i.matches)==null?void 0:$[0])==null?void 0:et.params)??{},unstable_pattern:getRoutePattern(i.matches),errorInfo:_})}:void 0;return c.reduceRight((j,_,$)=>{let et,tt=!1,nt=null,it=null;i&&(et=d&&_.route.id?d[_.route.id]:void 0,nt=_.route.errorElement||defaultErrorElement,h&&(g<0&&$===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),tt=!0,it=null):g===$&&(tt=!0,it=_.route.hydrateFallbackElement||null)));let rt=s.concat(c.slice(0,$+1)),_e=()=>{let st;return et?st=nt:tt?st=it:_.route.Component?st=reactExports.createElement(_.route.Component,null):_.route.element?st=_.route.element:st=j,reactExports.createElement(RenderedRoute,{match:_,routeContext:{outlet:j,matches:rt,isDataRoute:i!=null},children:st})};return i&&(_.route.ErrorBoundary||_.route.errorElement||$===0)?reactExports.createElement(RenderErrorBoundary,{location:i.location,revalidation:i.revalidation,component:nt,error:et,children:_e(),routeContext:{outlet:null,matches:rt,isDataRoute:!0},onError:b}):_e()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let s=reactExports.useContext(DataRouterContext);return invariant$1(s,getDataRouterConsoleError(e)),s}function useDataRouterState(e){let s=reactExports.useContext(DataRouterStateContext);return invariant$1(s,getDataRouterConsoleError(e)),s}function useRouteContext(e){let s=reactExports.useContext(RouteContext);return invariant$1(s,getDataRouterConsoleError(e)),s}function useCurrentRouteId(e){let s=useRouteContext(e),i=s.matches[s.matches.length-1];return invariant$1(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var o;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState("useRouteError"),i=useCurrentRouteId("useRouteError");return e!==void 0?e:(o=s.errors)==null?void 0:o[i]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),s=useCurrentRouteId("useNavigate"),i=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{i.current=!0}),reactExports.useCallback(async(a,c={})=>{warning(i.current,navigateEffectWarning),i.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:s,...c}))},[e,s])}var alreadyWarned={};function warningOnce(e,s,i){!s&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,i))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:s,state:i,onError:o}){return useRoutesImpl(e,void 0,i,o,s)}function Navigate({to:e,replace:s,state:i,relative:o}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=reactExports.useContext(NavigationContext);warning(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=reactExports.useContext(RouteContext),{pathname:d}=useLocation(),h=useNavigate(),g=resolveTo(e,getResolveToMatches(c),d,o==="path"),b=JSON.stringify(g);return reactExports.useEffect(()=>{h(JSON.parse(b),{replace:s,state:i,relative:o})},[h,b,o,s,i]),null}function Route(e){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:s=null,location:i,navigationType:o="POP",navigator:a,static:c=!1,unstable_useTransitions:d}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),g=reactExports.useMemo(()=>({basename:h,navigator:a,static:c,unstable_useTransitions:d,future:{}}),[h,a,c,d]);typeof i=="string"&&(i=parsePath(i));let{pathname:b="/",search:j="",hash:_="",state:$=null,key:et="default"}=i,tt=reactExports.useMemo(()=>{let nt=stripBasename(b,h);return nt==null?null:{location:{pathname:nt,search:j,hash:_,state:$,key:et},navigationType:o}},[h,b,j,_,$,et,o]);return warning(tt!=null,`<Router basename="${h}"> is not able to match the URL "${b}${j}${_}" because it does not start with the basename, so the <Router> won't render anything.`),tt==null?null:reactExports.createElement(NavigationContext.Provider,{value:g},reactExports.createElement(LocationContext.Provider,{children:s,value:tt}))}function Routes({children:e,location:s}){return useRoutes(createRoutesFromChildren(e),s)}function createRoutesFromChildren(e,s=[]){let i=[];return reactExports.Children.forEach(e,(o,a)=>{if(!reactExports.isValidElement(o))return;let c=[...s,a];if(o.type===reactExports.Fragment){i.push.apply(i,createRoutesFromChildren(o.props.children,c));return}invariant$1(o.type===Route,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!o.props.index||!o.props.children,"An index route cannot have child routes.");let d={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=createRoutesFromChildren(o.props.children,c)),i.push(d)}),i}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,s){return e.button===0&&(!s||s==="_self")&&!isModifiedEvent(e)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,s){let i,o,a,c,d;if(isFormElement(e)){let h=e.getAttribute("action");o=h?stripBasename(h,s):null,i=e.getAttribute("method")||defaultMethod,a=getFormEncType(e.getAttribute("enctype"))||defaultEncType,c=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||h.getAttribute("action");if(o=g?stripBasename(g,s):null,i=e.getAttribute("formmethod")||h.getAttribute("method")||defaultMethod,a=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(h.getAttribute("enctype"))||defaultEncType,c=new FormData(h,e),!isFormDataSubmitterSupported()){let{name:b,type:j,value:_}=e;if(j==="image"){let $=b?`${b}.`:"";c.append(`${$}x`,"0"),c.append(`${$}y`,"0")}else b&&c.append(b,_)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=defaultMethod,o=null,a=defaultEncType,d=e}return c&&a==="text/plain"&&(d=c,c=void 0),{action:o,method:i.toLowerCase(),encType:a,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function singleFetchUrl(e,s,i,o){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${o}`:a.pathname=`${a.pathname}.${o}`:a.pathname==="/"?a.pathname=`_root.${o}`:s&&stripBasename(a.pathname,s)==="/"?a.pathname=`${s.replace(/\/$/,"")}/_root.${o}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${o}`,a}async function loadRouteModule(e,s){if(e.id in s)return s[e.id];try{let i=await import(e.module);return s[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,s,i){let o=await Promise.all(e.map(async a=>{let c=s.routes[a.route.id];if(c){let d=await loadRouteModule(c,i);return d.links?d.links():[]}return[]}));return dedupeLinkDescriptors(o.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(e,s,i,o,a,c){let d=(g,b)=>i[b]?g.route.id!==i[b].route.id:!0,h=(g,b)=>{var j;return i[b].pathname!==g.pathname||((j=i[b].route.path)==null?void 0:j.endsWith("*"))&&i[b].params["*"]!==g.params["*"]};return c==="assets"?s.filter((g,b)=>d(g,b)||h(g,b)):c==="data"?s.filter((g,b)=>{var _;let j=o.routes[g.route.id];if(!j||!j.hasLoader)return!1;if(d(g,b)||h(g,b))return!0;if(g.route.shouldRevalidate){let $=g.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((_=i[0])==null?void 0:_.params)||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof $=="boolean")return $}return!0}):[]}function getModuleLinkHrefs(e,s,{includeHydrateFallback:i}={}){return dedupeHrefs(e.map(o=>{let a=s.routes[o.route.id];if(!a)return[];let c=[a.module];return a.clientActionModule&&(c=c.concat(a.clientActionModule)),a.clientLoaderModule&&(c=c.concat(a.clientLoaderModule)),i&&a.hydrateFallbackModule&&(c=c.concat(a.hydrateFallbackModule)),a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let s={},i=Object.keys(e).sort();for(let o of i)s[o]=e[o];return s}function dedupeLinkDescriptors(e,s){let i=new Set;return new Set(s),e.reduce((o,a)=>{let c=JSON.stringify(sortKeys(a));return i.has(c)||(i.add(c),o.push({key:c,link:a})),o},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,s){let i=reactExports.useContext(FrameworkContext),[o,a]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:b,onMouseLeave:j,onTouchStart:_}=s,$=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let nt=rt=>{rt.forEach(_e=>{d(_e.isIntersecting)})},it=new IntersectionObserver(nt,{threshold:.5});return $.current&&it.observe($.current),()=>{it.disconnect()}}},[e]),reactExports.useEffect(()=>{if(o){let nt=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(nt)}}},[o]);let et=()=>{a(!0)},tt=()=>{a(!1),d(!1)};return i?e!=="intent"?[c,$,{}]:[c,$,{onFocus:composeEventHandlers(h,et),onBlur:composeEventHandlers(g,tt),onMouseEnter:composeEventHandlers(b,et),onMouseLeave:composeEventHandlers(j,tt),onTouchStart:composeEventHandlers(_,et)}]:[!1,$,{}]}function composeEventHandlers(e,s){return i=>{e&&e(i),i.defaultPrevented||s(i)}}function PrefetchPageLinks({page:e,...s}){let{router:i}=useDataRouterContext2(),o=reactExports.useMemo(()=>matchRoutes(i.routes,e,i.basename),[i.routes,e,i.basename]);return o?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:o,...s}):null}function useKeyedPrefetchLinks(e){let{manifest:s,routeModules:i}=useFrameworkContext(),[o,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(e,s,i).then(d=>{c||a(d)}),()=>{c=!0}},[e,s,i]),o}function PrefetchPageLinksImpl({page:e,matches:s,...i}){let o=useLocation(),{future:a,manifest:c,routeModules:d}=useFrameworkContext(),{basename:h}=useDataRouterContext2(),{loaderData:g,matches:b}=useDataRouterStateContext(),j=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,b,c,o,"data"),[e,s,b,c,o]),_=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,b,c,o,"assets"),[e,s,b,c,o]),$=reactExports.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let nt=new Set,it=!1;if(s.forEach(_e=>{var ot;let st=c.routes[_e.route.id];!st||!st.hasLoader||(!j.some(ut=>ut.route.id===_e.route.id)&&_e.route.id in g&&((ot=d[_e.route.id])!=null&&ot.shouldRevalidate)||st.hasClientLoader?it=!0:nt.add(_e.route.id))}),nt.size===0)return[];let rt=singleFetchUrl(e,h,a.unstable_trailingSlashAwareDataRequests,"data");return it&&nt.size>0&&rt.searchParams.set("_routes",s.filter(_e=>nt.has(_e.route.id)).map(_e=>_e.route.id).join(",")),[rt.pathname+rt.search]},[h,a.unstable_trailingSlashAwareDataRequests,g,o,c,j,s,e,d]),et=reactExports.useMemo(()=>getModuleLinkHrefs(_,c),[_,c]),tt=useKeyedPrefetchLinks(_);return reactExports.createElement(reactExports.Fragment,null,$.map(nt=>reactExports.createElement("link",{key:nt,rel:"prefetch",as:"fetch",href:nt,...i})),et.map(nt=>reactExports.createElement("link",{key:nt,rel:"modulepreload",href:nt,...i})),tt.map(({key:nt,link:it})=>reactExports.createElement("link",{key:nt,nonce:i.nonce,...it})))}function mergeRefs(...e){return s=>{e.forEach(i=>{typeof i=="function"?i(s):i!=null&&(i.current=s)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.12.0")}catch{}function BrowserRouter({basename:e,children:s,unstable_useTransitions:i,window:o}){let a=reactExports.useRef();a.current==null&&(a.current=createBrowserHistory({window:o,v5Compat:!0}));let c=a.current,[d,h]=reactExports.useState({action:c.action,location:c.location}),g=reactExports.useCallback(b=>{i===!1?h(b):reactExports.startTransition(()=>h(b))},[i]);return reactExports.useLayoutEffect(()=>c.listen(g),[c,g]),reactExports.createElement(Router,{basename:e,children:s,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:i})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:s,discover:i="render",prefetch:o="none",relative:a,reloadDocument:c,replace:d,state:h,target:g,to:b,preventScrollReset:j,viewTransition:_,unstable_defaultShouldRevalidate:$,...et},tt){let{basename:nt,unstable_useTransitions:it}=reactExports.useContext(NavigationContext),rt=typeof b=="string"&&ABSOLUTE_URL_REGEX2.test(b),_e=parseToInfo(b,nt);b=_e.to;let st=useHref(b,{relative:a}),[ot,ut,ht]=usePrefetchBehavior(o,et),dt=useLinkClickHandler(b,{replace:d,state:h,target:g,preventScrollReset:j,relative:a,viewTransition:_,unstable_defaultShouldRevalidate:$,unstable_useTransitions:it});function at(lt){s&&s(lt),lt.defaultPrevented||dt(lt)}let ct=reactExports.createElement("a",{...et,...ht,href:_e.absoluteURL||st,onClick:_e.isExternal||c?s:at,ref:mergeRefs(tt,ut),target:g,"data-discover":!rt&&i==="render"?"true":void 0});return ot&&!rt?reactExports.createElement(reactExports.Fragment,null,ct,reactExports.createElement(PrefetchPageLinks,{page:st})):ct});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":s="page",caseSensitive:i=!1,className:o="",end:a=!1,style:c,to:d,viewTransition:h,children:g,...b},j){let _=useResolvedPath(d,{relative:b.relative}),$=useLocation(),et=reactExports.useContext(DataRouterStateContext),{navigator:tt,basename:nt}=reactExports.useContext(NavigationContext),it=et!=null&&useViewTransitionState(_)&&h===!0,rt=tt.encodeLocation?tt.encodeLocation(_).pathname:_.pathname,_e=$.pathname,st=et&&et.navigation&&et.navigation.location?et.navigation.location.pathname:null;i||(_e=_e.toLowerCase(),st=st?st.toLowerCase():null,rt=rt.toLowerCase()),st&&nt&&(st=stripBasename(st,nt)||st);const ot=rt!=="/"&&rt.endsWith("/")?rt.length-1:rt.length;let ut=_e===rt||!a&&_e.startsWith(rt)&&_e.charAt(ot)==="/",ht=st!=null&&(st===rt||!a&&st.startsWith(rt)&&st.charAt(rt.length)==="/"),dt={isActive:ut,isPending:ht,isTransitioning:it},at=ut?s:void 0,ct;typeof o=="function"?ct=o(dt):ct=[o,ut?"active":null,ht?"pending":null,it?"transitioning":null].filter(Boolean).join(" ");let lt=typeof c=="function"?c(dt):c;return reactExports.createElement(Link,{...b,"aria-current":at,className:ct,ref:j,style:lt,to:d,viewTransition:h},typeof g=="function"?g(dt):g)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:s,navigate:i,reloadDocument:o,replace:a,state:c,method:d=defaultMethod,action:h,onSubmit:g,relative:b,preventScrollReset:j,viewTransition:_,unstable_defaultShouldRevalidate:$,...et},tt)=>{let{unstable_useTransitions:nt}=reactExports.useContext(NavigationContext),it=useSubmit(),rt=useFormAction(h,{relative:b}),_e=d.toLowerCase()==="get"?"get":"post",st=typeof h=="string"&&ABSOLUTE_URL_REGEX2.test(h),ot=ut=>{if(g&&g(ut),ut.defaultPrevented)return;ut.preventDefault();let ht=ut.nativeEvent.submitter,dt=(ht==null?void 0:ht.getAttribute("formmethod"))||d,at=()=>it(ht||ut.currentTarget,{fetcherKey:s,method:dt,navigate:i,replace:a,state:c,relative:b,preventScrollReset:j,viewTransition:_,unstable_defaultShouldRevalidate:$});nt&&i!==!1?reactExports.startTransition(()=>at()):at()};return reactExports.createElement("form",{ref:tt,method:_e,action:rt,onSubmit:o?g:ot,...et,"data-discover":!st&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let s=reactExports.useContext(DataRouterContext);return invariant$1(s,getDataRouterConsoleError2(e)),s}function useLinkClickHandler(e,{target:s,replace:i,state:o,preventScrollReset:a,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:g}={}){let b=useNavigate(),j=useLocation(),_=useResolvedPath(e,{relative:c});return reactExports.useCallback($=>{if(shouldProcessLinkClick($,s)){$.preventDefault();let et=i!==void 0?i:createPath(j)===createPath(_),tt=()=>b(e,{replace:et,state:o,preventScrollReset:a,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:h});g?reactExports.startTransition(()=>tt()):tt()}},[j,b,_,i,o,s,e,a,c,d,h,g])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:s}=reactExports.useContext(NavigationContext),i=useRouteId(),o=e.fetch,a=e.navigate;return reactExports.useCallback(async(c,d={})=>{let{action:h,method:g,encType:b,formData:j,body:_}=getFormSubmissionInfo(c,s);if(d.navigate===!1){let $=d.fetcherKey||getUniqueFetcherId();await o($,i,d.action||h,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:j,body:_,formMethod:d.method||g,formEncType:d.encType||b,flushSync:d.flushSync})}else await a(d.action||h,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:j,body:_,formMethod:d.method||g,formEncType:d.encType||b,replace:d.replace,state:d.state,fromRouteId:i,flushSync:d.flushSync,viewTransition:d.viewTransition})},[o,a,s,i])}function useFormAction(e,{relative:s}={}){let{basename:i}=reactExports.useContext(NavigationContext),o=reactExports.useContext(RouteContext);invariant$1(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),c={...useResolvedPath(e||".",{relative:s})},d=useLocation();if(e==null){c.search=d.search;let h=new URLSearchParams(c.search),g=h.getAll("index");if(g.some(j=>j==="")){h.delete("index"),g.filter(_=>_).forEach(_=>h.append("index",_));let j=h.toString();c.search=j?`?${j}`:""}}return(!e||e===".")&&a.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:joinPaths([i,c.pathname])),createPath(c)}function useViewTransitionState(e,{relative:s}={}){let i=reactExports.useContext(ViewTransitionContext);invariant$1(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(e,{relative:s});if(!i.isTransitioning)return!1;let c=stripBasename(i.currentLocation.pathname,o)||i.currentLocation.pathname,d=stripBasename(i.nextLocation.pathname,o)||i.nextLocation.pathname;return matchPath(a.pathname,d)!=null||matchPath(a.pathname,c)!=null}const useStressSensor=(e={})=>{const{rageThreshold:s=4,stallThreshold:i=2e4,jitterThreshold:o=50,onStressDetected:a=()=>{},onStressCleared:c=()=>{},onStressLevelChanged:d=()=>{}}=e,[h,g]=reactExports.useState(0),[b,j]=reactExports.useState(!1),[_,$]=reactExports.useState(!1),[et,tt]=reactExports.useState(!1),[nt,it]=reactExports.useState(!1),rt=reactExports.useRef([]),_e=reactExports.useRef(Date.now()),st=reactExports.useRef([]),ot=reactExports.useRef(null);reactExports.useRef(!document.hidden);const ut=reactExports.useCallback(()=>{const at=Date.now(),ct=rt.current.filter(mt=>at-mt<2e3);if(ct.length<2)return 0;const lt=[];for(let mt=1;mt<ct.length;mt++)lt.push(ct[mt]-ct[mt-1]);const ft=lt.reduce((mt,gt)=>mt+gt,0)/lt.length;return ft>0?Math.min(1e3/ft,100):0},[]),ht=reactExports.useCallback(()=>{const at=st.current;if(at.length<10)return!1;let ct=0,lt=0,ft=null;for(let mt=1;mt<at.length;mt++){const gt=at[mt].x-at[mt-1].x,jt=at[mt].y-at[mt-1].y;ct+=Math.sqrt(gt*gt+jt*jt);const yt=Math.atan2(jt,gt);ft!==null&&Math.abs(yt-ft)>Math.PI/4&&lt++,ft=yt}return ct/(at.length-1)>o||lt/(at.length-1)>3},[o]),dt=reactExports.useCallback(()=>{let at=0,ct=!1,lt=!1,ft=!1;ut()>s&&(at+=40,ct=!0),ht()&&(at+=30,lt=!0),Date.now()-_e.current>i&&(at+=20,ft=!0),document.hidden&&(at+=25),at=Math.min(100,at),g(at),j(at>0),it(ct),tt(lt),$(ft),at>0&&a({level:at,type:ct?"rage":lt?"jitter":"general"})},[ut,ht,s,i,a]);return reactExports.useEffect(()=>{const at=()=>{_e.current=Date.now(),ot.current&&clearTimeout(ot.current),ot.current=setTimeout(dt,i),dt()},ct=ft=>{st.current=[...st.current.slice(-19),{x:ft.clientX,y:ft.clientY}],at()},lt=()=>{rt.current=[...rt.current.slice(-9),Date.now()],at()};return document.addEventListener("mousemove",ct),document.addEventListener("click",lt),document.addEventListener("keydown",at),document.addEventListener("visibilitychange",dt),()=>{document.removeEventListener("mousemove",ct),document.removeEventListener("click",lt),document.removeEventListener("keydown",at),document.removeEventListener("visibilitychange",dt),ot.current&&clearTimeout(ot.current)}},[dt,i]),{stressLevel:h,isStressed:b,isStalled:_,isJittery:et,isRaging:nt,resetStress:()=>g(0)}};function __rest(e,s){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&s.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)s.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(i[o[a]]=e[o[a]]);return i}function __awaiter(e,s,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(j){try{b(o.next(j))}catch(_){d(_)}}function g(j){try{b(o.throw(j))}catch(_){d(_)}}function b(j){j.done?c(j.value):a(j.value).then(h,g)}b((o=o.apply(e,s||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const resolveFetch$3=e=>e?(...s)=>e(...s):(...s)=>fetch(...s);class FunctionsError extends Error{constructor(s,i="FunctionsError",o){super(s),this.name=i,this.context=o}}class FunctionsFetchError extends FunctionsError{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class FunctionsRelayError extends FunctionsError{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class FunctionsHttpError extends FunctionsError{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var FunctionRegion;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));class FunctionsClient{constructor(s,{headers:i={},customFetch:o,region:a=FunctionRegion.Any}={}){this.url=s,this.headers=i,this.region=a,this.fetch=resolveFetch$3(o)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s){return __awaiter(this,arguments,void 0,function*(i,o={}){var a;let c,d;try{const{headers:h,method:g,body:b,signal:j,timeout:_}=o;let $={},{region:et}=o;et||(et=this.region);const tt=new URL(`${this.url}/${i}`);et&&et!=="any"&&($["x-region"]=et,tt.searchParams.set("forceFunctionRegion",et));let nt;b&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?($["Content-Type"]="application/octet-stream",nt=b):typeof b=="string"?($["Content-Type"]="text/plain",nt=b):typeof FormData<"u"&&b instanceof FormData?nt=b:($["Content-Type"]="application/json",nt=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?nt=JSON.stringify(b):nt=b;let it=j;_&&(d=new AbortController,c=setTimeout(()=>d.abort(),_),j?(it=d.signal,j.addEventListener("abort",()=>d.abort())):it=d.signal);const rt=yield this.fetch(tt.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},$),this.headers),h),body:nt,signal:it}).catch(ut=>{throw new FunctionsFetchError(ut)}),_e=rt.headers.get("x-relay-error");if(_e&&_e==="true")throw new FunctionsRelayError(rt);if(!rt.ok)throw new FunctionsHttpError(rt);let st=((a=rt.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),ot;return st==="application/json"?ot=yield rt.json():st==="application/octet-stream"||st==="application/pdf"?ot=yield rt.blob():st==="text/event-stream"?ot=rt:st==="multipart/form-data"?ot=yield rt.formData():ot=yield rt.text(),{data:ot,error:null,response:rt}}catch(h){return{data:null,error:h,response:h instanceof FunctionsHttpError||h instanceof FunctionsRelayError?h.context:void 0}}finally{c&&clearTimeout(c)}})}}var PostgrestError=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},PostgrestBuilder=class{constructor(e){var s,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(i=e.isMaybeSingle)!==null&&i!==void 0?i:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let d=null,h=null,g=null,b=c.status,j=c.statusText;if(c.ok){var _,$;if(i.method!=="HEAD"){var et;const rt=await c.text();rt===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((et=i.headers.get("Accept"))===null||et===void 0)&&et.includes("application/vnd.pgrst.plan+text"))?h=rt:h=JSON.parse(rt))}const nt=(_=i.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),it=($=c.headers.get("content-range"))===null||$===void 0?void 0:$.split("/");nt&&it&&it.length>1&&(g=parseInt(it[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,b=406,j="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var tt;const nt=await c.text();try{d=JSON.parse(nt),Array.isArray(d)&&c.status===404&&(h=[],d=null,b=200,j="OK")}catch{c.status===404&&nt===""?(b=204,j="No Content"):d={message:nt}}if(d&&i.isMaybeSingle&&(!(d==null||(tt=d.details)===null||tt===void 0)&&tt.includes("0 rows"))&&(d=null,b=200,j="OK"),d&&i.shouldThrowOnError)throw new PostgrestError(d)}return{error:d,data:h,count:g,status:b,statusText:j}});return this.shouldThrowOnError||(a=a.catch(c=>{var d;let h="";const g=c==null?void 0:c.cause;if(g){var b,j,_,$;const tt=(b=g==null?void 0:g.message)!==null&&b!==void 0?b:"",nt=(j=g==null?void 0:g.code)!==null&&j!==void 0?j:"";h=`${(_=c==null?void 0:c.name)!==null&&_!==void 0?_:"FetchError"}: ${c==null?void 0:c.message}`,h+=`

Caused by: ${($=g==null?void 0:g.name)!==null&&$!==void 0?$:"Error"}: ${tt}`,nt&&(h+=` (${nt})`),g!=null&&g.stack&&(h+=`
${g.stack}`)}else{var et;h=(et=c==null?void 0:c.stack)!==null&&et!==void 0?et:""}return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,s)}returns(){return this}overrideTypes(){return this}},PostgrestTransformBuilder=class extends PostgrestBuilder{select(e){let s=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:i,foreignTable:o,referencedTable:a=o}={}){const c=a?`${a}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${e}.${s?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:i=s}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this}range(e,s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(c,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:i=!1,buffers:o=!1,wal:a=!1,format:c="text"}={}){var d;const h=[e?"analyze":null,s?"verbose":null,i?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${g}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const PostgrestReservedCharsRegexp=new RegExp("[,()]");var PostgrestFilterBuilder=class extends PostgrestTransformBuilder{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}regexMatch(e,s){return this.url.searchParams.append(e,`match.${s}`),this}regexIMatch(e,s){return this.url.searchParams.append(e,`imatch.${s}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}isDistinct(e,s){return this.url.searchParams.append(e,`isdistinct.${s}`),this}in(e,s){const i=Array.from(new Set(s)).map(o=>typeof o=="string"&&PostgrestReservedCharsRegexp.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}notIn(e,s){const i=Array.from(new Set(s)).map(o=>typeof o=="string"&&PostgrestReservedCharsRegexp.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(e,`not.in.(${i})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:i,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${a}fts${c}.${s}`),this}match(e){return Object.entries(e).forEach(([s,i])=>{this.url.searchParams.append(s,`eq.${i}`)}),this}not(e,s,i){return this.url.searchParams.append(e,`not.${s}.${i}`),this}or(e,{foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${e})`),this}filter(e,s,i){return this.url.searchParams.append(e,`${s}.${i}`),this}},PostgrestQueryBuilder=class{constructor(e,{headers:s={},schema:i,fetch:o}){this.url=e,this.headers=new Headers(s),this.schema=i,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,s){const{head:i=!1,count:o}=s??{},a=i?"HEAD":"GET";let c=!1;const d=(e??"*").split("").map(b=>/\s/.test(b)&&!c?"":(b==='"'&&(c=!c),b)).join(""),{url:h,headers:g}=this.cloneRequestState();return h.searchParams.set("select",d),o&&g.append("Prefer",`count=${o}`),new PostgrestFilterBuilder({method:a,url:h,headers:g,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:i=!0}={}){var o;const a="POST",{url:c,headers:d}=this.cloneRequestState();if(s&&d.append("Prefer",`count=${s}`),i||d.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((g,b)=>g.concat(Object.keys(b)),[]);if(h.length>0){const g=[...new Set(h)].map(b=>`"${b}"`);c.searchParams.set("columns",g.join(","))}}return new PostgrestFilterBuilder({method:a,url:c,headers:d,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:i=!1,count:o,defaultToNull:a=!0}={}){var c;const d="POST",{url:h,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),s!==void 0&&h.searchParams.set("on_conflict",s),o&&g.append("Prefer",`count=${o}`),a||g.append("Prefer","missing=default"),Array.isArray(e)){const b=e.reduce((j,_)=>j.concat(Object.keys(_)),[]);if(b.length>0){const j=[...new Set(b)].map(_=>`"${_}"`);h.searchParams.set("columns",j.join(","))}}return new PostgrestFilterBuilder({method:d,url:h,headers:g,schema:this.schema,body:e,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(e,{count:s}={}){var i;const o="PATCH",{url:a,headers:c}=this.cloneRequestState();return s&&c.append("Prefer",`count=${s}`),new PostgrestFilterBuilder({method:o,url:a,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:e}={}){var s;const i="DELETE",{url:o,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new PostgrestFilterBuilder({method:i,url:o,headers:a,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}},PostgrestClient=class cr{constructor(s,{headers:i={},schema:o,fetch:a}={}){this.url=s,this.headers=new Headers(i),this.schemaName=o,this.fetch=a}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PostgrestQueryBuilder(new URL(`${this.url}/${s}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new cr(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,i={},{head:o=!1,get:a=!1,count:c}={}){var d;let h;const g=new URL(`${this.url}/rpc/${s}`);let b;const j=et=>et!==null&&typeof et=="object"&&(!Array.isArray(et)||et.some(j)),_=o&&Object.values(i).some(j);_?(h="POST",b=i):o||a?(h=o?"HEAD":"GET",Object.entries(i).filter(([et,tt])=>tt!==void 0).map(([et,tt])=>[et,Array.isArray(tt)?`{${tt.join(",")}}`:`${tt}`]).forEach(([et,tt])=>{g.searchParams.append(et,tt)})):(h="POST",b=i);const $=new Headers(this.headers);return _?$.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&$.set("Prefer",`count=${c}`),new PostgrestFilterBuilder({method:h,url:g,headers:$,schema:this.schemaName,body:b,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class WebSocketFactory{constructor(){}static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const o=i.versions;if(o&&o.node){const a=o.node,c=parseInt(a.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let i=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(i+=`

Suggested solution: ${s.workaround}`),new Error(i)}static createWebSocket(s,i){const o=this.getWebSocketConstructor();return new o(s,i)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const version$3="2.90.1",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN_1_0_0="1.0.0",VSN_2_0_0="2.0.0",DEFAULT_VSN=VSN_1_0_0,DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(e){e.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(s){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=s??[]}encode(s,i){if(s.event===this.BROADCAST_EVENT&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(s));let o=[s.join_ref,s.ref,s.topic,s.event,s.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(s){var i;return this._isArrayBuffer((i=s.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var i,o;const a=(o=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(s,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(s){var i,o;const a=(o=(i=s.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},d=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(s,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(s,i,o){var a,c;const d=s.topic,h=(a=s.ref)!==null&&a!==void 0?a:"",g=(c=s.join_ref)!==null&&c!==void 0?c:"",b=s.payload.event,j=this.allowedMetadataKeys?this._pick(s.payload,this.allowedMetadataKeys):{},_=Object.keys(j).length===0?"":JSON.stringify(j);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const $=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+d.length+b.length+_.length,et=new ArrayBuffer(this.HEADER_LENGTH+$);let tt=new DataView(et),nt=0;tt.setUint8(nt++,this.KINDS.userBroadcastPush),tt.setUint8(nt++,g.length),tt.setUint8(nt++,h.length),tt.setUint8(nt++,d.length),tt.setUint8(nt++,b.length),tt.setUint8(nt++,_.length),tt.setUint8(nt++,i),Array.from(g,rt=>tt.setUint8(nt++,rt.charCodeAt(0))),Array.from(h,rt=>tt.setUint8(nt++,rt.charCodeAt(0))),Array.from(d,rt=>tt.setUint8(nt++,rt.charCodeAt(0))),Array.from(b,rt=>tt.setUint8(nt++,rt.charCodeAt(0))),Array.from(_,rt=>tt.setUint8(nt++,rt.charCodeAt(0)));var it=new Uint8Array(et.byteLength+o.byteLength);return it.set(new Uint8Array(et),0),it.set(new Uint8Array(o),et.byteLength),it.buffer}decode(s,i){if(this._isArrayBuffer(s)){let o=this._binaryDecode(s);return i(o)}if(typeof s=="string"){const o=JSON.parse(s),[a,c,d,h,g]=o;return i({join_ref:a,ref:c,topic:d,event:h,payload:g})}return i({})}_binaryDecode(s){const i=new DataView(s),o=i.getUint8(0),a=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,i,a)}}_decodeUserBroadcast(s,i,o){const a=i.getUint8(1),c=i.getUint8(2),d=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const b=o.decode(s.slice(g,g+a));g=g+a;const j=o.decode(s.slice(g,g+c));g=g+c;const _=o.decode(s.slice(g,g+d));g=g+d;const $=s.slice(g,s.byteLength),et=h===this.JSON_ENCODING?JSON.parse(o.decode($)):$,tt={type:this.BROADCAST_EVENT,event:j,payload:et};return d>0&&(tt.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:tt}}_isArrayBuffer(s){var i;return s instanceof ArrayBuffer||((i=s==null?void 0:s.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(s,i){return!s||typeof s!="object"?{}:Object.fromEntries(Object.entries(s).filter(([o])=>i.includes(o)))}}class Timer{constructor(s,i){this.callback=s,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(e,s,i={})=>{var o;const a=(o=i.skipTypes)!==null&&o!==void 0?o:[];return s?Object.keys(s).reduce((c,d)=>(c[d]=convertColumn(d,e,s,a),c),{}):{}},convertColumn=(e,s,i,o)=>{const a=s.find(h=>h.name===e),c=a==null?void 0:a.type,d=i[e];return c&&!o.includes(c)?convertCell(c,d):noop$2(d)},convertCell=(e,s)=>{if(e.charAt(0)==="_"){const i=e.slice(1,e.length);return toArray(s,i)}switch(e){case PostgresTypes.bool:return toBoolean(s);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(s);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(s);case PostgresTypes.timestamp:return toTimestampString(s);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$2(s);default:return noop$2(s)}},noop$2=e=>e,toBoolean=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},toNumber=e=>{if(typeof e=="string"){const s=parseFloat(e);if(!Number.isNaN(s))return s}return e},toJson=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},toArray=(e,s)=>{if(typeof e!="string")return e;const i=e.length-1,o=e[i];if(e[0]==="{"&&o==="}"){let c;const d=e.slice(1,i);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(h=>convertCell(s,h))}return e},toTimestampString=e=>typeof e=="string"?e.replace(" ","T"):e,httpEndpointURL=e=>{const s=new URL(e);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class Push{constructor(s,i,o={},a=DEFAULT_TIMEOUT){this.channel=s,this.event=i,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,i){var o;return this._hasReceived(s)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:s,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:i}){this.recHooks.filter(o=>o.status===s).forEach(o=>o.callback(i))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(s,i){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:c,onLeave:d,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,a,c,d),this.pendingDiffs.forEach(g=>{this.state=RealtimePresence.syncDiff(this.state,g,c,d)}),this.pendingDiffs=[],h()}),this.channel._on(o.diff,{},a=>{const{onJoin:c,onLeave:d,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=RealtimePresence.syncDiff(this.state,a,c,d),h())}),this.onJoin((a,c,d)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:c,newPresences:d})}),this.onLeave((a,c,d)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,i,o,a){const c=this.cloneDeep(s),d=this.transformState(i),h={},g={};return this.map(c,(b,j)=>{d[b]||(g[b]=j)}),this.map(d,(b,j)=>{const _=c[b];if(_){const $=j.map(it=>it.presence_ref),et=_.map(it=>it.presence_ref),tt=j.filter(it=>et.indexOf(it.presence_ref)<0),nt=_.filter(it=>$.indexOf(it.presence_ref)<0);tt.length>0&&(h[b]=tt),nt.length>0&&(g[b]=nt)}else h[b]=j}),this.syncDiff(c,{joins:h,leaves:g},o,a)}static syncDiff(s,i,o,a){const{joins:c,leaves:d}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(c,(h,g)=>{var b;const j=(b=s[h])!==null&&b!==void 0?b:[];if(s[h]=this.cloneDeep(g),j.length>0){const _=s[h].map(et=>et.presence_ref),$=j.filter(et=>_.indexOf(et.presence_ref)<0);s[h].unshift(...$)}o(h,j,g)}),this.map(d,(h,g)=>{let b=s[h];if(!b)return;const j=g.map(_=>_.presence_ref);b=b.filter(_=>j.indexOf(_.presence_ref)<0),s[h]=b,a(h,b,g),b.length===0&&delete s[h]}),s}static map(s,i){return Object.getOwnPropertyNames(s).map(o=>i(o,s[o]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((i,o)=>{const a=s[o];return"metas"in a?i[o]=a.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):i[o]=a,i},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(s,i={config:{}},o){var a,c;if(this.topic=s,this.params=i,this.socket=o,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(d,h)=>{this._trigger(this._replyEventName(h),d)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(s,i=this.timeout){var o,a,c;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:d,presence:h,private:g}}=this.params,b=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(et=>et.filter))!==null&&a!==void 0?a:[],j=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,_={},$={broadcast:d,presence:Object.assign(Object.assign({},h),{enabled:j}),postgres_changes:b,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(et=>s==null?void 0:s(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,et)),this._onClose(()=>s==null?void 0:s(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:$},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:et})=>{var tt;if(this.socket._isManualToken()||this.socket.setAuth(),et===void 0){s==null||s(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const nt=this.bindings.postgres_changes,it=(tt=nt==null?void 0:nt.length)!==null&&tt!==void 0?tt:0,rt=[];for(let _e=0;_e<it;_e++){const st=nt[_e],{filter:{event:ot,schema:ut,table:ht,filter:dt}}=st,at=et&&et[_e];if(at&&at.event===ot&&RealtimeChannel.isFilterValueEqual(at.schema,ut)&&RealtimeChannel.isFilterValueEqual(at.table,ht)&&RealtimeChannel.isFilterValueEqual(at.filter,dt))rt.push(Object.assign(Object.assign({},st),{id:at.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,s==null||s(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=rt,s&&s(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",et=>{this.state=CHANNEL_STATES.errored,s==null||s(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(et).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,i={}){return await this.send({type:"presence",event:"track",payload:s},i.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,i,o){return this.state===CHANNEL_STATES.joined&&s===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(s,i,o)}async httpSend(s,i,o={}){var a;if(i==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=o.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const b=await h.json();g=b.error||b.message||g}catch{}return Promise.reject(new Error(g))}async send(s,i={}){var o,a;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=s,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=b.body)===null||a===void 0?void 0:a.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,h,g;const b=this._push(s.type,s,i.timeout||this.timeout);s.type==="broadcast"&&!(!((g=(h=(d=this.params)===null||d===void 0?void 0:d.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),b.receive("ok",()=>c("ok")),b.receive("error",()=>c("error")),b.receive("timeout",()=>c("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=CHANNEL_STATES.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new Push(this,CHANNEL_EVENTS.leave,{},s),o.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(s,i,o){const a=new AbortController,c=setTimeout(()=>a.abort(),o),d=await this.socket.fetch(s,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(c),d}_push(s,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Push(this,s,i,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(s,i,o){return i}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,i,o){var a,c;const d=s.toLocaleLowerCase(),{close:h,error:g,leave:b,join:j}=CHANNEL_EVENTS;if(o&&[h,g,b,j].indexOf(d)>=0&&o!==this._joinRef())return;let $=this._onMessage(d,i,o);if(i&&!$)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(et=>{var tt,nt,it;return((tt=et.filter)===null||tt===void 0?void 0:tt.event)==="*"||((it=(nt=et.filter)===null||nt===void 0?void 0:nt.event)===null||it===void 0?void 0:it.toLocaleLowerCase())===d}).map(et=>et.callback($,o)):(c=this.bindings[d])===null||c===void 0||c.filter(et=>{var tt,nt,it,rt,_e,st,ot,ut;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in et){const ht=et.id,dt=(tt=et.filter)===null||tt===void 0?void 0:tt.event;return ht&&((nt=i.ids)===null||nt===void 0?void 0:nt.includes(ht))&&(dt==="*"||(dt==null?void 0:dt.toLocaleLowerCase())===((it=i.data)===null||it===void 0?void 0:it.type.toLocaleLowerCase()))&&(!(!((rt=et.filter)===null||rt===void 0)&&rt.table)||et.filter.table===((_e=i.data)===null||_e===void 0?void 0:_e.table))}else{const ht=(ot=(st=et==null?void 0:et.filter)===null||st===void 0?void 0:st.event)===null||ot===void 0?void 0:ot.toLocaleLowerCase();return ht==="*"||ht===((ut=i==null?void 0:i.event)===null||ut===void 0?void 0:ut.toLocaleLowerCase())}else return et.type.toLocaleLowerCase()===d}).map(et=>{if(typeof $=="object"&&"ids"in $){const tt=$.data,{schema:nt,table:it,commit_timestamp:rt,type:_e,errors:st}=tt;$=Object.assign(Object.assign({},{schema:nt,table:it,commit_timestamp:rt,eventType:_e,new:{},old:{},errors:st}),this._getPayloadRecords(tt))}et.callback($,o)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,i,o){const a=s.toLocaleLowerCase(),c={type:a,filter:i,callback:o};return this.bindings[a]?this.bindings[a].push(c):this.bindings[a]=[c],this}_off(s,i){const o=s.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var c;return!(((c=a.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&RealtimeChannel.isEqual(a.filter,i))})),this}static isEqual(s,i){if(Object.keys(s).length!==Object.keys(i).length)return!1;for(const o in s)if(s[o]!==i[o])return!1;return!0}static isFilterValueEqual(s,i){return(s??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(CHANNEL_EVENTS.close,{},s)}_onError(s){this._on(CHANNEL_EVENTS.error,{},i=>s(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const i={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(i.new=convertChangeData(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(i.old=convertChangeData(s.columns,s.old_record)),i}}const noop$1=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(s,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop$1,this.ref=0,this.reconnectTimer=null,this.vsn=DEFAULT_VSN,this.logger=noop$1,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...c)=>a(...c):(...c)=>fetch(...c),!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${s}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(s),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const i=s.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(s?this.conn.close(s,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const i=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const s=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,i,o){this.logger(s,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,i={config:{}}){const o=`realtime:${s}`,a=this.getChannels().find(c=>c.topic===o);if(a)return a;{const c=new RealtimeChannel(`realtime:${s}`,i,this);return this.channels.push(c),c}}push(s){const{topic:i,event:o,payload:a,ref:c}=s,d=()=>{this.encode(s,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${o} (${c})`,a),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let i=this.channels.find(o=>o.topic===s&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${s}"`),i.unsubscribe())}_remove(s){this.channels=this.channels.filter(i=>i.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",b)}catch(j){this.log("error","error in heartbeat callback",j)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:a,payload:c,ref:d}=i,h=d?`(${d})`:"",g=c.status||"";this.log("receive",`${g} ${o} ${a} ${h}`.trim(),c),this.channels.filter(b=>b._isMember(o)).forEach(b=>b._trigger(a,c,d)),this._triggerStateCallbacks("message",i)})}_clearTimer(s){var i;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s),this.conn.readyState===SOCKET_STATES.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===SOCKET_STATES.open||this.conn.readyState===SOCKET_STATES.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(s){var i;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(CHANNEL_EVENTS.error))}_appendParams(s,i){if(Object.keys(i).length===0)return s;const o=s.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${s}${o}${a}`}_workerObjectUrl(s){let i;if(s)i=s;else{const o=new Blob([WORKER_SCRIPT],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(s,i=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(s=null){let i,o=!1;if(s)i=s,o=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),i=this.accessTokenValue}else i=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const c={access_token:i,version:DEFAULT_VERSION};i&&a.updateJoinPayload(c),a.joinedOnce&&a._isJoined()&&a._push(CHANNEL_EVENTS.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${s}`,i)})}_triggerStateCallbacks(s,i){try{this.stateChangeCallbacks[s].forEach(o=>{try{o(i)}catch(a){this.log("error",`error in ${s} callback`,a)}})}catch(o){this.log("error",`error triggering ${s} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var i,o,a,c,d,h,g,b,j,_,$,et;switch(this.transport=(i=s==null?void 0:s.transport)!==null&&i!==void 0?i:null,this.timeout=(o=s==null?void 0:s.timeout)!==null&&o!==void 0?o:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(a=s==null?void 0:s.heartbeatIntervalMs)!==null&&a!==void 0?a:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(c=s==null?void 0:s.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=s==null?void 0:s.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(h=s==null?void 0:s.heartbeatCallback)!==null&&h!==void 0?h:noop$1,this.vsn=(g=s==null?void 0:s.vsn)!==null&&g!==void 0?g:DEFAULT_VSN,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=s==null?void 0:s.reconnectAfterMs)!==null&&b!==void 0?b:tt=>RECONNECT_INTERVALS[tt-1]||DEFAULT_RECONNECT_FALLBACK,this.vsn){case VSN_1_0_0:this.encode=(j=s==null?void 0:s.encode)!==null&&j!==void 0?j:(tt,nt)=>nt(JSON.stringify(tt)),this.decode=(_=s==null?void 0:s.decode)!==null&&_!==void 0?_:(tt,nt)=>nt(JSON.parse(tt));break;case VSN_2_0_0:this.encode=($=s==null?void 0:s.encode)!==null&&$!==void 0?$:this.serializer.encode.bind(this.serializer),this.decode=(et=s==null?void 0:s.decode)!==null&&et!==void 0?et:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}}var IcebergError=class extends Error{constructor(e,s){var i;super(e),this.name="IcebergError",this.status=s.status,this.icebergType=s.icebergType,this.icebergCode=s.icebergCode,this.details=s.details,this.isCommitStateUnknown=s.icebergType==="CommitStateUnknownException"||[500,502,504].includes(s.status)&&((i=s.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function buildUrl(e,s,i){const o=new URL(s,e);if(i)for(const[a,c]of Object.entries(i))c!==void 0&&o.searchParams.set(a,c);return o.toString()}async function buildAuthHeaders(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function createFetchClient(e){const s=e.fetchImpl??globalThis.fetch;return{async request({method:i,path:o,query:a,body:c,headers:d}){const h=buildUrl(e.baseUrl,o,a),g=await buildAuthHeaders(e.auth),b=await s(h,{method:i,headers:{...c?{"Content-Type":"application/json"}:{},...g,...d},body:c?JSON.stringify(c):void 0}),j=await b.text(),_=(b.headers.get("content-type")||"").includes("application/json"),$=_&&j?JSON.parse(j):j;if(!b.ok){const et=_?$:void 0,tt=et==null?void 0:et.error;throw new IcebergError((tt==null?void 0:tt.message)??`Request failed with status ${b.status}`,{status:b.status,icebergType:tt==null?void 0:tt.type,icebergCode:tt==null?void 0:tt.code,details:et})}return{status:b.status,headers:b.headers,data:$}}}}function namespaceToPath(e){return e.join("")}var NamespaceOperations=class{constructor(e,s=""){this.client=e,this.prefix=s}async listNamespaces(e){const s=e?{parent:namespaceToPath(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:s})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(e,s){const i={namespace:e.namespace,properties:s==null?void 0:s.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath(e.namespace)}`}),!0}catch(s){if(s instanceof IcebergError&&s.status===404)return!1;throw s}}async createNamespaceIfNotExists(e,s){try{return await this.createNamespace(e,s)}catch(i){if(i instanceof IcebergError&&i.status===409)return;throw i}}};function namespaceToPath2(e){return e.join("")}var TableOperations=class{constructor(e,s="",i){this.client=e,this.prefix=s,this.accessDelegation=i}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(e.namespace)}/tables`})).data.identifiers}async createTable(e,s){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(e.namespace)}/tables`,body:s,headers:i})).data.metadata}async updateTable(e,s){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(e.namespace)}/tables/${e.name}`,body:s});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(e,s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath2(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((s==null?void 0:s.purge)??!1)}})}async loadTable(e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(e.namespace)}/tables/${e.name}`,headers:s})).data.metadata}async tableExists(e){const s={};this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath2(e.namespace)}/tables/${e.name}`,headers:s}),!0}catch(i){if(i instanceof IcebergError&&i.status===404)return!1;throw i}}async createTableIfNotExists(e,s){try{return await this.createTable(e,s)}catch(i){if(i instanceof IcebergError&&i.status===409)return await this.loadTable({namespace:e.namespace,name:s.name});throw i}}},IcebergRestCatalog=class{constructor(e){var o;let s="v1";e.catalogName&&(s+=`/${e.catalogName}`);const i=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=createFetchClient({baseUrl:i,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(o=e.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new NamespaceOperations(this.client,s),this.tableOps=new TableOperations(this.client,s,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,s){return this.namespaceOps.createNamespace(e,s)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,s){return this.tableOps.createTable(e,s)}async updateTable(e,s){return this.tableOps.updateTable(e,s)}async dropTable(e,s){await this.tableOps.dropTable(e,s)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,s){return this.namespaceOps.createNamespaceIfNotExists(e,s)}async createTableIfNotExists(e,s){return this.tableOps.createTableIfNotExists(e,s)}},StorageError=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function isStorageError(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var StorageApiError=class extends StorageError{constructor(e,s,i){super(e),this.name="StorageApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageUnknownError=class extends StorageError{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}};const resolveFetch$1$1=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),resolveResponse$1=()=>Response,recursiveToCamel=e=>{if(Array.isArray(e))return e.map(i=>recursiveToCamel(i));if(typeof e=="function"||e!==Object(e))return e;const s={};return Object.entries(e).forEach(([i,o])=>{const a=i.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));s[a]=recursiveToCamel(o)}),s},isPlainObject$1=e=>{if(typeof e!="object"||e===null)return!1;const s=Object.getPrototypeOf(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isValidBucketName=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function _typeof$1(e){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$1(e)}function toPrimitive$1(e,s){if(_typeof$1(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,s);if(_typeof$1(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function toPropertyKey$1(e){var s=toPrimitive$1(e,"string");return _typeof$1(s)=="symbol"?s:s+""}function _defineProperty$1(e,s,i){return(s=toPropertyKey$1(s))in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,e}function ownKeys$1(e,s){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,o)}return i}function _objectSpread2$1(e){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(i),!0).forEach(function(o){_defineProperty$1(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys$1(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}const _getErrorMessage$1=e=>{var s;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(s=e.error)===null||s===void 0?void 0:s.message)||JSON.stringify(e)},handleError$1=async(e,s,i)=>{e instanceof await resolveResponse$1()&&!(i!=null&&i.noResolveJson)?e.json().then(o=>{const a=e.status||500,c=(o==null?void 0:o.statusCode)||a+"";s(new StorageApiError(_getErrorMessage$1(o),a,c))}).catch(o=>{s(new StorageUnknownError(_getErrorMessage$1(o),o))}):s(new StorageUnknownError(_getErrorMessage$1(e),e))},_getRequestParams$1=(e,s,i,o)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return e==="GET"||!o?a:(isPlainObject$1(o)?(a.headers=_objectSpread2$1({"Content-Type":"application/json"},s==null?void 0:s.headers),a.body=JSON.stringify(o)):a.body=o,s!=null&&s.duplex&&(a.duplex=s.duplex),_objectSpread2$1(_objectSpread2$1({},a),i))};async function _handleRequest$1(e,s,i,o,a,c){return new Promise((d,h)=>{e(i,_getRequestParams$1(s,o,a,c)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>d(g)).catch(g=>handleError$1(g,h,o))})}async function get(e,s,i,o){return _handleRequest$1(e,"GET",s,i,o)}async function post$1(e,s,i,o,a){return _handleRequest$1(e,"POST",s,o,a,i)}async function put(e,s,i,o,a){return _handleRequest$1(e,"PUT",s,o,a,i)}async function head(e,s,i,o){return _handleRequest$1(e,"HEAD",s,_objectSpread2$1(_objectSpread2$1({},i),{},{noResolveJson:!0}),o)}async function remove(e,s,i,o,a){return _handleRequest$1(e,"DELETE",s,o,a,i)}var StreamDownloadBuilder=class{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}}};let _Symbol$toStringTag;_Symbol$toStringTag=Symbol.toStringTag;var BlobDownloadBuilder=class{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s,this[_Symbol$toStringTag]="BlobDownloadBuilder",this.promise=null}asStream(){return new StreamDownloadBuilder(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.getPromise().then(e,s)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(isStorageError(s))return{data:null,error:s};throw s}}};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var StorageFileApi=class{constructor(e,s={},i,o){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=i,this.fetch=resolveFetch$1$1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,s,i,o){var a=this;try{let c;const d=_objectSpread2$1(_objectSpread2$1({},DEFAULT_FILE_OPTIONS),o);let h=_objectSpread2$1(_objectSpread2$1({},a.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const g=d.metadata;typeof Blob<"u"&&i instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),g&&c.append("metadata",a.encodeMetadata(g)),c.append("",i)):typeof FormData<"u"&&i instanceof FormData?(c=i,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),g&&!c.has("metadata")&&c.append("metadata",a.encodeMetadata(g))):(c=i,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType,g&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),o!=null&&o.headers&&(h=_objectSpread2$1(_objectSpread2$1({},h),o.headers));const b=a._removeEmptyFolders(s),j=a._getFinalPath(b),_=await(e=="PUT"?put:post$1)(a.fetch,`${a.url}/object/${j}`,c,_objectSpread2$1({headers:h},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:b,id:_.Id,fullPath:_.Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(isStorageError(c))return{data:null,error:c};throw c}}async upload(e,s,i){return this.uploadOrUpdate("POST",e,s,i)}async uploadToSignedUrl(e,s,i,o){var a=this;const c=a._removeEmptyFolders(e),d=a._getFinalPath(c),h=new URL(a.url+`/object/upload/sign/${d}`);h.searchParams.set("token",s);try{let g;const b=_objectSpread2$1({upsert:DEFAULT_FILE_OPTIONS.upsert},o),j=_objectSpread2$1(_objectSpread2$1({},a.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",b.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",b.cacheControl)):(g=i,j["cache-control"]=`max-age=${b.cacheControl}`,j["content-type"]=b.contentType),{data:{path:c,fullPath:(await put(a.fetch,h.toString(),g,{headers:j})).Key},error:null}}catch(g){if(a.shouldThrowOnError)throw g;if(isStorageError(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(e,s){var i=this;try{let o=i._getFinalPath(e);const a=_objectSpread2$1({},i.headers);s!=null&&s.upsert&&(a["x-upsert"]="true");const c=await post$1(i.fetch,`${i.url}/object/upload/sign/${o}`,{},{headers:a}),d=new URL(i.url+c.url),h=d.searchParams.get("token");if(!h)throw new StorageError("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:h},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async update(e,s,i){return this.uploadOrUpdate("PUT",e,s,i)}async move(e,s,i){var o=this;try{return{data:await post$1(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:e,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers}),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}}async copy(e,s,i){var o=this;try{return{data:{path:(await post$1(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:e,destinationKey:s,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers})).Key},error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}}async createSignedUrl(e,s,i){var o=this;try{let a=o._getFinalPath(e),c=await post$1(o.fetch,`${o.url}/object/sign/${a}`,_objectSpread2$1({expiresIn:s},i!=null&&i.transform?{transform:i.transform}:{}),{headers:o.headers});const d=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return c={signedUrl:encodeURI(`${o.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}}async createSignedUrls(e,s,i){var o=this;try{const a=await post$1(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:s,paths:e},{headers:o.headers}),c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(d=>_objectSpread2$1(_objectSpread2$1({},d),{},{signedUrl:d.signedURL?encodeURI(`${o.url}${d.signedURL}${c}`):null})),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}}download(e,s){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),a=o?`?${o}`:"",c=this._getFinalPath(e),d=()=>get(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new BlobDownloadBuilder(d,this.shouldThrowOnError)}async info(e){var s=this;const i=s._getFinalPath(e);try{return{data:recursiveToCamel(await get(s.fetch,`${s.url}/object/info/${i}`,{headers:s.headers})),error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async exists(e){var s=this;const i=s._getFinalPath(e);try{return await head(s.fetch,`${s.url}/object/${i}`,{headers:s.headers}),{data:!0,error:null}}catch(o){if(s.shouldThrowOnError)throw o;if(isStorageError(o)&&o instanceof StorageUnknownError){const a=o.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:o}}throw o}}getPublicUrl(e,s){const i=this._getFinalPath(e),o=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&o.push(a);const c=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});d!==""&&o.push(d);let h=o.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${h}`)}}}async remove(e){var s=this;try{return{data:await remove(s.fetch,`${s.url}/object/${s.bucketId}`,{prefixes:e},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}async list(e,s,i){var o=this;try{const a=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},DEFAULT_SEARCH_OPTIONS),s),{},{prefix:e||""});return{data:await post$1(o.fetch,`${o.url}/object/list/${o.bucketId}`,a,{headers:o.headers},i),error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(isStorageError(a))return{data:null,error:a};throw a}}async listV2(e,s){var i=this;try{const o=_objectSpread2$1({},e);return{data:await post$1(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,o,{headers:i.headers},s),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}};const version$2="2.90.1",DEFAULT_HEADERS$1$1={"X-Client-Info":`storage-js/${version$2}`};var StorageBucketApi=class{constructor(e,s={},i,o){this.shouldThrowOnError=!1;const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$1$1),s),this.fetch=resolveFetch$1$1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var s=this;try{const i=s.listBucketOptionsToQueryString(e);return{data:await get(s.fetch,`${s.url}/bucket${i}`,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}async getBucket(e){var s=this;try{return{data:await get(s.fetch,`${s.url}/bucket/${e}`,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}async createBucket(e,s={public:!1}){var i=this;try{return{data:await post$1(i.fetch,`${i.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async updateBucket(e,s){var i=this;try{return{data:await put(i.fetch,`${i.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(isStorageError(o))return{data:null,error:o};throw o}}async emptyBucket(e){var s=this;try{return{data:await post$1(s.fetch,`${s.url}/bucket/${e}/empty`,{},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}async deleteBucket(e){var s=this;try{return{data:await remove(s.fetch,`${s.url}/bucket/${e}`,{},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(e){const s={};return e&&("limit"in e&&(s.limit=String(e.limit)),"offset"in e&&(s.offset=String(e.offset)),e.search&&(s.search=e.search),e.sortColumn&&(s.sortColumn=e.sortColumn),e.sortOrder&&(s.sortOrder=e.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}},StorageAnalyticsClient=class{constructor(e,s={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$1$1),s),this.fetch=resolveFetch$1$1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var s=this;try{return{data:await post$1(s.fetch,`${s.url}/bucket`,{name:e},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}async listBuckets(e){var s=this;try{const i=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&i.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&i.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&i.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&i.set("sortOrder",e.sortOrder),e!=null&&e.search&&i.set("search",e.search);const o=i.toString(),a=o?`${s.url}/bucket?${o}`:`${s.url}/bucket`;return{data:await get(s.fetch,a,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}async deleteBucket(e){var s=this;try{return{data:await remove(s.fetch,`${s.url}/bucket/${e}`,{},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageError(i))return{data:null,error:i};throw i}}from(e){var s=this;if(!isValidBucketName(e))throw new StorageError("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new IcebergRestCatalog({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>s.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(i,{get(a,c){const d=a[c];return typeof d!="function"?d:async(...h)=>{try{return{data:await d.apply(a,h),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}};const DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`,"Content-Type":"application/json"};var StorageVectorsError=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function isStorageVectorsError(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var StorageVectorsApiError=class extends StorageVectorsError{constructor(e,s,i){super(e),this.name="StorageVectorsApiError",this.status=s,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageVectorsUnknownError=class extends StorageVectorsError{constructor(e,s){super(e),this.name="StorageVectorsUnknownError",this.originalError=s}};const resolveFetch$2=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),isPlainObject=e=>{if(typeof e!="object"||e===null)return!1;const s=Object.getPrototypeOf(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_getErrorMessage$2=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError$2=async(e,s,i)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(i!=null&&i.noResolveJson)){const o=e.status||500,a=e;if(typeof a.json=="function")a.json().then(c=>{const d=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||o+"";s(new StorageVectorsApiError(_getErrorMessage$2(c),o,d))}).catch(()=>{const c=o+"";s(new StorageVectorsApiError(a.statusText||`HTTP ${o} error`,o,c))});else{const c=o+"";s(new StorageVectorsApiError(a.statusText||`HTTP ${o} error`,o,c))}}else s(new StorageVectorsUnknownError(_getErrorMessage$2(e),e))},_getRequestParams$2=(e,s,i,o)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return o?(isPlainObject(o)?(a.headers=_objectSpread2$1({"Content-Type":"application/json"},s==null?void 0:s.headers),a.body=JSON.stringify(o)):a.body=o,_objectSpread2$1(_objectSpread2$1({},a),i)):a};async function _handleRequest$2(e,s,i,o,a,c){return new Promise((d,h)=>{e(i,_getRequestParams$2(s,o,a,c)).then(g=>{if(!g.ok)throw g;if(o!=null&&o.noResolveJson)return g;const b=g.headers.get("content-type");return!b||!b.includes("application/json")?{}:g.json()}).then(g=>d(g)).catch(g=>handleError$2(g,h,o))})}async function post(e,s,i,o,a){return _handleRequest$2(e,"POST",s,o,a,i)}var VectorIndexApi=class{constructor(e,s={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),s),this.fetch=resolveFetch$2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var s=this;try{return{data:await post(s.fetch,`${s.url}/CreateIndex`,e,{headers:s.headers})||{},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async getIndex(e,s){var i=this;try{return{data:await post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:e,indexName:s},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(isStorageVectorsError(o))return{data:null,error:o};throw o}}async listIndexes(e){var s=this;try{return{data:await post(s.fetch,`${s.url}/ListIndexes`,e,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async deleteIndex(e,s){var i=this;try{return{data:await post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:e,indexName:s},{headers:i.headers})||{},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(isStorageVectorsError(o))return{data:null,error:o};throw o}}},VectorDataApi=class{constructor(e,s={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),s),this.fetch=resolveFetch$2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var s=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await post(s.fetch,`${s.url}/PutVectors`,e,{headers:s.headers})||{},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async getVectors(e){var s=this;try{return{data:await post(s.fetch,`${s.url}/GetVectors`,e,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async listVectors(e){var s=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await post(s.fetch,`${s.url}/ListVectors`,e,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async queryVectors(e){var s=this;try{return{data:await post(s.fetch,`${s.url}/QueryVectors`,e,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async deleteVectors(e){var s=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await post(s.fetch,`${s.url}/DeleteVectors`,e,{headers:s.headers})||{},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}},VectorBucketApi=class{constructor(e,s={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),s),this.fetch=resolveFetch$2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var s=this;try{return{data:await post(s.fetch,`${s.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:s.headers})||{},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async getBucket(e){var s=this;try{return{data:await post(s.fetch,`${s.url}/GetVectorBucket`,{vectorBucketName:e},{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async listBuckets(e={}){var s=this;try{return{data:await post(s.fetch,`${s.url}/ListVectorBuckets`,e,{headers:s.headers}),error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}async deleteBucket(e){var s=this;try{return{data:await post(s.fetch,`${s.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:s.headers})||{},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(isStorageVectorsError(i))return{data:null,error:i};throw i}}},StorageVectorsClient=class extends VectorBucketApi{constructor(e,s={}){super(e,s.headers||{},s.fetch)}from(e){return new VectorBucketScope(this.url,this.headers,e,this.fetch)}async createBucket(e){var s=()=>super.createBucket,i=this;return s().call(i,e)}async getBucket(e){var s=()=>super.getBucket,i=this;return s().call(i,e)}async listBuckets(e={}){var s=()=>super.listBuckets,i=this;return s().call(i,e)}async deleteBucket(e){var s=()=>super.deleteBucket,i=this;return s().call(i,e)}},VectorBucketScope=class extends VectorIndexApi{constructor(e,s,i,o){super(e,s,o),this.vectorBucketName=i}async createIndex(e){var s=()=>super.createIndex,i=this;return s().call(i,_objectSpread2$1(_objectSpread2$1({},e),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(e={}){var s=()=>super.listIndexes,i=this;return s().call(i,_objectSpread2$1(_objectSpread2$1({},e),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(e){var s=()=>super.getIndex,i=this;return s().call(i,i.vectorBucketName,e)}async deleteIndex(e){var s=()=>super.deleteIndex,i=this;return s().call(i,i.vectorBucketName,e)}index(e){return new VectorIndexScope(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},VectorIndexScope=class extends VectorDataApi{constructor(e,s,i,o,a){super(e,s,a),this.vectorBucketName=i,this.indexName=o}async putVectors(e){var s=()=>super.putVectors,i=this;return s().call(i,_objectSpread2$1(_objectSpread2$1({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(e){var s=()=>super.getVectors,i=this;return s().call(i,_objectSpread2$1(_objectSpread2$1({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(e={}){var s=()=>super.listVectors,i=this;return s().call(i,_objectSpread2$1(_objectSpread2$1({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(e){var s=()=>super.queryVectors,i=this;return s().call(i,_objectSpread2$1(_objectSpread2$1({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(e){var s=()=>super.deleteVectors,i=this;return s().call(i,_objectSpread2$1(_objectSpread2$1({},e),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},StorageClient=class extends StorageBucketApi{constructor(e,s={},i,o){super(e,s,i,o)}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}get vectors(){return new StorageVectorsClient(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new StorageAnalyticsClient(this.url+"/iceberg",this.headers,this.fetch)}};const version$1="2.90.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS$1={"X-Client-Info":`gotrue-js/${version$1}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(s,i,o){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function isAuthError(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class AuthApiError extends AuthError{constructor(s,i,o){super(s,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function isAuthApiError(e){return isAuthError(e)&&e.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(s,i){super(s),this.name="AuthUnknownError",this.originalError=i}}class CustomAuthError extends AuthError{constructor(s,i,o,a){super(s,o,a),this.name=i,this.status=o}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(e){return isAuthError(e)&&e.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(s,i=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(e){return isAuthError(e)&&e.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(s,i=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCECodeVerifierMissingError extends CustomAuthError{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class AuthRetryableFetchError extends CustomAuthError{constructor(s,i){super(s,"AuthRetryableFetchError",i,void 0)}}function isAuthRetryableFetchError(e){return isAuthError(e)&&e.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(s,i,o){super(s,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class AuthInvalidJwtError extends CustomAuthError{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const e=new Array(128);for(let s=0;s<e.length;s+=1)e[s]=-1;for(let s=0;s<IGNORE_BASE64URL.length;s+=1)e[IGNORE_BASE64URL[s].charCodeAt(0)]=-2;for(let s=0;s<TO_BASE64URL.length;s+=1)e[TO_BASE64URL[s].charCodeAt(0)]=s;return e})();function byteToBase64URL(e,s,i){if(e!==null)for(s.queue=s.queue<<8|e,s.queuedBits+=8;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;i(TO_BASE64URL[o]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const o=s.queue>>s.queuedBits-6&63;i(TO_BASE64URL[o]),s.queuedBits-=6}}function byteFromBase64URL(e,s,i){const o=FROM_BASE64URL[e];if(o>-1)for(s.queue=s.queue<<6|o,s.queuedBits+=6;s.queuedBits>=8;)i(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function stringFromBase64URL(e){const s=[],i=d=>{s.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},c=d=>{stringFromUTF8(d,o,i)};for(let d=0;d<e.length;d+=1)byteFromBase64URL(e.charCodeAt(d),a,c);return s.join("")}function codepointToUTF8(e,s){if(e<=127){s(e);return}else if(e<=2047){s(192|e>>6),s(128|e&63);return}else if(e<=65535){s(224|e>>12),s(128|e>>6&63),s(128|e&63);return}else if(e<=1114111){s(240|e>>18),s(128|e>>12&63),s(128|e>>6&63),s(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function stringToUTF8(e,s){for(let i=0;i<e.length;i+=1){let o=e.charCodeAt(i);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(e.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}codepointToUTF8(o,s)}}function stringFromUTF8(e,s,i){if(s.utf8seq===0){if(e<=127){i(e);return}for(let o=1;o<6;o+=1)if(!(e>>7-o&1)){s.utf8seq=o;break}if(s.utf8seq===2)s.codepoint=e&31;else if(s.utf8seq===3)s.codepoint=e&15;else if(s.utf8seq===4)s.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|e&63,s.utf8seq-=1,s.utf8seq===0&&i(s.codepoint)}}function base64UrlToUint8Array(e){const s=[],i={queue:0,queuedBits:0},o=a=>{s.push(a)};for(let a=0;a<e.length;a+=1)byteFromBase64URL(e.charCodeAt(a),i,o);return new Uint8Array(s)}function stringToUint8Array(e){const s=[];return stringToUTF8(e,i=>s.push(i)),new Uint8Array(s)}function bytesToBase64URL(e){const s=[],i={queue:0,queuedBits:0},o=a=>{s.push(a)};return e.forEach(a=>byteToBase64URL(a,i,o)),byteToBase64URL(null,i,o),s.join("")}function expiresAt(e){return Math.round(Date.now()/1e3)+e}function generateCallbackId(){return Symbol("auth-callback")}const isBrowser$1=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser$1())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(e){const s={},i=new URL(e);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,c)=>{s[c]=a})}catch{}return i.searchParams.forEach((o,a)=>{s[a]=o}),s}const resolveFetch$1=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),looksLikeFetchResponse=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",setItemAsync=async(e,s,i)=>{await e.setItem(s,JSON.stringify(i))},getItemAsync=async(e,s)=>{const i=await e.getItem(s);if(!i)return null;try{return JSON.parse(i)}catch{return i}},removeItemAsync=async(e,s)=>{await e.removeItem(s)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((s,i)=>{this.resolve=s,this.reject=i})}}Deferred.promiseConstructor=Promise;function decodeJWT(e){const s=e.split(".");if(s.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let o=0;o<s.length;o++)if(!BASE64URL_REGEX.test(s[o]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(s[0])),payload:JSON.parse(stringFromBase64URL(s[1])),signature:base64UrlToUint8Array(s[2]),raw:{header:s[0],payload:s[1]}}}async function sleep(e){return await new Promise(s=>{setTimeout(()=>s(null),e)})}function retryable(e,s){return new Promise((o,a)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await e(c);if(!s(c,null,d)){o(d);return}}catch(d){if(!s(c,d)){a(d);return}}})()})}function dec2hex(e){return("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){const s=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let a="";for(let c=0;c<56;c++)a+=i.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(s),Array.from(s,dec2hex).join("")}async function sha256(e){const i=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(o);return Array.from(a).map(c=>String.fromCharCode(c)).join("")}async function generatePKCEChallenge(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const i=await sha256(e);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(e,s,i=!1){const o=generatePKCEVerifier();let a=o;i&&(a+="/PASSWORD_RECOVERY"),await setItemAsync(e,`${s}-code-verifier`,a);const c=await generatePKCEChallenge(o);return[c,o===c?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(e){const s=e.headers.get(API_VERSION_HEADER_NAME);if(!s||!s.match(API_VERSION_REGEX))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function validateExp(e){if(!e)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(e<=s)throw new Error("JWT has expired")}function getAlgorithm(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(e){if(!UUID_REGEX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const e={};return new Proxy(e,{get:(s,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function insecureUserWarningProxy(e,s){return new Proxy(e,{get:(i,o,a)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,a)}return!s.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(i,o,a)}})}function deepClone(e){return JSON.parse(JSON.stringify(e))}const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NETWORK_ERROR_CODES=[502,503,504];async function handleError(e){var s;if(!looksLikeFetchResponse(e))throw new AuthRetryableFetchError(_getErrorMessage(e),0);if(NETWORK_ERROR_CODES.includes(e.status))throw new AuthRetryableFetchError(_getErrorMessage(e),e.status);let i;try{i=await e.json()}catch(c){throw new AuthUnknownError(_getErrorMessage(c),c)}let o;const a=parseResponseAPIVersion(e);if(a&&a.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(i),e.status,((s=i.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(o==="session_not_found")throw new AuthSessionMissingError}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(i),e.status,i.weak_password.reasons);throw new AuthApiError(_getErrorMessage(i),e.status||500,o)}const _getRequestParams=(e,s,i,o)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),i))};async function _request(e,s,i,o){var a;const c=Object.assign({},o==null?void 0:o.headers);c[API_VERSION_HEADER_NAME]||(c[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),o!=null&&o.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const d=(a=o==null?void 0:o.query)!==null&&a!==void 0?a:{};o!=null&&o.redirectTo&&(d.redirect_to=o.redirectTo);const h=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",g=await _handleRequest(e,s,i+h,{headers:c,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function _handleRequest(e,s,i,o,a,c){const d=_getRequestParams(s,o,a,c);let h;try{h=await e(i,Object.assign({},d))}catch(g){throw console.error(g),new AuthRetryableFetchError(_getErrorMessage(g),0)}if(h.ok||await handleError(h),o!=null&&o.noResolveJson)return h;try{return await h.json()}catch(g){await handleError(g)}}function _sessionResponse(e){var s;let i=null;hasSession(e)&&(i=Object.assign({},e),e.expires_at||(i.expires_at=expiresAt(e.expires_in)));const o=(s=e.user)!==null&&s!==void 0?s:e;return{data:{session:i,user:o},error:null}}function _sessionResponsePassword(e){const s=_sessionResponse(e);return!s.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(s.data.weak_password=e.weak_password),s}function _userResponse(e){var s;return{data:{user:(s=e.user)!==null&&s!==void 0?s:e},error:null}}function _ssoResponse(e){return{data:e,error:null}}function _generateLinkResponse(e){const{action_link:s,email_otp:i,hashed_token:o,redirect_to:a,verification_type:c}=e,d=__rest(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:s,email_otp:i,hashed_token:o,redirect_to:a,verification_type:c},g=Object.assign({},d);return{data:{properties:h,user:g},error:null}}function _noResolveJsonResponse(e){return e}function hasSession(e){return e.access_token&&e.refresh_token&&e.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];class GoTrueAdminApi{constructor({url:s="",headers:i={},fetch:o}){this.url=s,this.headers=i,this.fetch=resolveFetch$1(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,i=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async inviteUserByEmail(s,i={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async generateLink(s){try{const{options:i}=s,o=__rest(s,["options"]),a=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(a.new_email=o==null?void 0:o.newEmail,delete a.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:_generateLinkResponse,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(isAuthError(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(s){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async listUsers(s){var i,o,a,c,d,h,g;try{const b={nextPage:null,lastPage:0,total:0},j=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(c=(a=s==null?void 0:s.perPage)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:""},xform:_noResolveJsonResponse});if(j.error)throw j.error;const _=await j.json(),$=(d=j.headers.get("x-total-count"))!==null&&d!==void 0?d:0,et=(g=(h=j.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return et.length>0&&(et.forEach(tt=>{const nt=parseInt(tt.split(";")[0].split("=")[1].substring(0,1)),it=JSON.parse(tt.split(";")[1].split("=")[1]);b[`${it}Page`]=nt}),b.total=parseInt($)),{data:Object.assign(Object.assign({},_),b),error:null}}catch(b){if(isAuthError(b))return{data:{users:[]},error:b};throw b}}async getUserById(s){validateUUID(s);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async updateUserById(s,i){validateUUID(s);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:i,headers:this.headers,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async deleteUser(s,i=!1){validateUUID(s);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:i},xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async _listFactors(s){validateUUID(s.userId);try{const{data:i,error:o}=await _request(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:o}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _deleteFactor(s){validateUUID(s.userId),validateUUID(s.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _listOAuthClients(s){var i,o,a,c,d,h,g;try{const b={nextPage:null,lastPage:0,total:0},j=await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=s==null?void 0:s.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(c=(a=s==null?void 0:s.perPage)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:""},xform:_noResolveJsonResponse});if(j.error)throw j.error;const _=await j.json(),$=(d=j.headers.get("x-total-count"))!==null&&d!==void 0?d:0,et=(g=(h=j.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return et.length>0&&(et.forEach(tt=>{const nt=parseInt(tt.split(";")[0].split("=")[1].substring(0,1)),it=JSON.parse(tt.split(";")[1].split("=")[1]);b[`${it}Page`]=nt}),b.total=parseInt($)),{data:Object.assign(Object.assign({},_),b),error:null}}catch(b){if(isAuthError(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(s){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:s,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _getOAuthClient(s){try{return await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _updateOAuthClient(s,i){try{return await _request(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${s}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(s){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${s}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(s){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients/${s}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}}function memoryLocalStorageAdapter(e={}){return{getItem:s=>e[s]||null,setItem:(s,i)=>{e[s]=i},removeItem:s=>{delete e[s]}}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(e,s,i){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,s);const o=new globalThis.AbortController;return s>0&&setTimeout(()=>{o.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await i()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(s===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(internals.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function getAddress(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function fromHex(e){return parseInt(e,16)}function toHex(e){const s=new TextEncoder().encode(e);return"0x"+Array.from(s,o=>o.toString(16).padStart(2,"0")).join("")}function createSiweMessage(e){var s;const{chainId:i,domain:o,expirationTime:a,issuedAt:c=new Date,nonce:d,notBefore:h,requestId:g,resources:b,scheme:j,uri:_,version:$}=e;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if($!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${$}`);if(!((s=e.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const et=getAddress(e.address),tt=j?`${j}://${o}`:o,nt=e.statement?`${e.statement}
`:"",it=`${tt} wants you to sign in with your Ethereum account:
${et}

${nt}`;let rt=`URI: ${_}
Version: ${$}
Chain ID: ${i}${d?`
Nonce: ${d}`:""}
Issued At: ${c.toISOString()}`;if(a&&(rt+=`
Expiration Time: ${a.toISOString()}`),h&&(rt+=`
Not Before: ${h.toISOString()}`),g&&(rt+=`
Request ID: ${g}`),b){let _e=`
Resources:`;for(const st of b){if(!st||typeof st!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${st}`);_e+=`
- ${st}`}rt+=_e}return`${it}
${rt}`}class WebAuthnError extends Error{constructor({message:s,code:i,cause:o,name:a}){var c;super(s,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=a??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=i}}class WebAuthnUnknownError extends WebAuthnError{constructor(s,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:s}),this.name="WebAuthnUnknownError",this.originalError=i}}function identifyRegistrationError({error:e,options:s}){var i,o,a;const{publicKey:c}=s;if(!c)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(s.signal instanceof AbortSignal)return new WebAuthnError({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((i=c.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new WebAuthnError({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(s.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new WebAuthnError({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new WebAuthnError({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new WebAuthnError({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new WebAuthnError({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return c.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new WebAuthnError({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new WebAuthnError({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const d=window.location.hostname;if(isValidDomain(d)){if(c.rp.id!==d)return new WebAuthnError({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new WebAuthnError({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function identifyAuthenticationError({error:e,options:s}){const{publicKey:i}=s;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(s.signal instanceof AbortSignal)return new WebAuthnError({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new WebAuthnError({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(isValidDomain(o)){if(i.rpId!==o)return new WebAuthnError({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class WebAuthnAbortService{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const webAuthnAbortService=new WebAuthnAbortService;function deserializeCredentialCreationOptions(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:s,user:i,excludeCredentials:o}=e,a=__rest(e,["challenge","user","excludeCredentials"]),c=base64UrlToUint8Array(s).buffer,d=Object.assign(Object.assign({},i),{id:base64UrlToUint8Array(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:c,user:d});if(o&&o.length>0){h.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const b=o[g];h.excludeCredentials[g]=Object.assign(Object.assign({},b),{id:base64UrlToUint8Array(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}function deserializeCredentialRequestOptions(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:s,allowCredentials:i}=e,o=__rest(e,["challenge","allowCredentials"]),a=base64UrlToUint8Array(s).buffer,c=Object.assign(Object.assign({},o),{challenge:a});if(i&&i.length>0){c.allowCredentials=new Array(i.length);for(let d=0;d<i.length;d++){const h=i[d];c.allowCredentials[d]=Object.assign(Object.assign({},h),{id:base64UrlToUint8Array(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function serializeCredentialCreationResponse(e){var s;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const i=e;return{id:e.id,rawId:e.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(e.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function serializeCredentialRequestResponse(e){var s;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const i=e,o=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(a.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(a.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(a.signature)),userHandle:a.userHandle?bytesToBase64URL(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(s=i.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function isValidDomain(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function browserSupportsWebAuthn(){var e,s;return!!(isBrowser$1()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function createCredential(e){try{const s=await navigator.credentials.create(e);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",s)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",s)}}catch(s){return{data:null,error:identifyRegistrationError({error:s,options:e})}}}async function getCredential(e){try{const s=await navigator.credentials.get(e);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",s)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",s)}}catch(s){return{data:null,error:identifyAuthenticationError({error:s,options:e})}}}const DEFAULT_CREATION_OPTIONS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DEFAULT_REQUEST_OPTIONS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function deepMerge(...e){const s=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of e)if(a)for(const c in a){const d=a[c];if(d!==void 0)if(Array.isArray(d))o[c]=d;else if(i(d))o[c]=d;else if(s(d)){const h=o[c];s(h)?o[c]=deepMerge(h,d):o[c]=deepMerge(d)}else o[c]=d}return o}function mergeCredentialCreationOptions(e,s){return deepMerge(DEFAULT_CREATION_OPTIONS,e,s||{})}function mergeCredentialRequestOptions(e,s){return deepMerge(DEFAULT_REQUEST_OPTIONS,e,s||{})}class WebAuthnApi{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:i,friendlyName:o,signal:a},c){try{const{data:d,error:h}=await this.client.mfa.challenge({factorId:s,webauthn:i});if(!d)return{data:null,error:h};const g=a??webAuthnAbortService.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:b}=d.webauthn.credential_options.publicKey;b.name||(b.name=`${b.id}:${o}`),b.displayName||(b.displayName=b.name)}switch(d.webauthn.type){case"create":{const b=mergeCredentialCreationOptions(d.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:j,error:_}=await createCredential({publicKey:b,signal:g});return j?{data:{factorId:s,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:j}},error:null}:{data:null,error:_}}case"request":{const b=mergeCredentialRequestOptions(d.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:j,error:_}=await getCredential(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:b,signal:g}));return j?{data:{factorId:s,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:j}},error:null}:{data:null,error:_}}}}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in challenge",d)}}}async _verify({challengeId:s,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:s,webauthn:o})}async _authenticate({factorId:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},c){if(!i)return{data:null,error:new AuthError("rpId is required for WebAuthn authentication")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:d,error:h}=await this.challenge({factorId:s,webauthn:{rpId:i,rpOrigins:o},signal:a},{request:c});if(!d)return{data:null,error:h};const{webauthn:g}=d;return this._verify({factorId:s,challengeId:d.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:o,credential_response:g.credential_response}})}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in authenticate",d)}}}async _register({friendlyName:s,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},c){if(!i)return{data:null,error:new AuthError("rpId is required for WebAuthn registration")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:d,error:h}=await this._enroll({friendlyName:s});if(!d)return await this.client.mfa.listFactors().then(j=>{var _;return(_=j.data)===null||_===void 0?void 0:_.all.find($=>$.factor_type==="webauthn"&&$.friendly_name===s&&$.status!=="unverified")}).then(j=>j?this.client.mfa.unenroll({factorId:j==null?void 0:j.id}):void 0),{data:null,error:h};const{data:g,error:b}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:a},{create:c});return g?this._verify({factorId:d.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:b}}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in register",d)}}}}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS$1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function lockNoOp(e,s,i){return await i()}const GLOBAL_JWKS={};class GoTrueClient{get jwks(){var s,i;return(i=(s=GLOBAL_JWKS[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(s){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,i;return(i=(s=GLOBAL_JWKS[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:s})}constructor(s){var i,o,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},DEFAULT_OPTIONS),s);if(this.storageKey=c.storageKey,this.instanceID=(i=GoTrueClient.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,GoTrueClient.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&isBrowser$1()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new GoTrueAdminApi({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=resolveFetch$1(c.fetch),this.lock=c.lock||lockNoOp,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&isBrowser$1()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WebAuthnApi(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser$1()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${version$1}) ${new Date().toISOString()}`}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let i={},o="none";if(isBrowser$1()&&(i=parseParametersFromURL(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),isBrowser$1()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:c}=await this._getSessionFromURL(i,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),isAuthImplicitGrantRedirectError(c)){const g=(s=c.details)===null||s===void 0?void 0:s.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:d,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",d,"redirect type",h),await this._saveSession(d),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return isAuthError(i)?this._returnResult({error:i}):this._returnResult({error:new AuthUnknownError("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var i,o,a;try{const c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=s==null?void 0:s.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=s==null?void 0:s.options)===null||a===void 0?void 0:a.captchaToken}},xform:_sessionResponse}),{data:d,error:h}=c;if(h||!d)return this._returnResult({data:{user:null,session:null},error:h});const g=d.session,b=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:b,session:g},error:null})}catch(c){if(isAuthError(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(s){var i,o,a;try{let c;if("email"in s){const{email:j,password:_,options:$}=s;let et=null,tt=null;this.flowType==="pkce"&&([et,tt]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:$==null?void 0:$.emailRedirectTo,body:{email:j,password:_,data:(i=$==null?void 0:$.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:$==null?void 0:$.captchaToken},code_challenge:et,code_challenge_method:tt},xform:_sessionResponse})}else if("phone"in s){const{phone:j,password:_,options:$}=s;c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:j,password:_,data:(o=$==null?void 0:$.data)!==null&&o!==void 0?o:{},channel:(a=$==null?void 0:$.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:$==null?void 0:$.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:d,error:h}=c;if(h||!d)return await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=d.session,b=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:b,session:g},error:null})}catch(c){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(s){try{let i;if("email"in s){const{email:c,password:d,options:h}=s;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in s){const{phone:c,password:d,options:h}=s;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!o||!o.session||!o.user){const c=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(s){var i,o,a,c;return await this._handleProviderSignIn(s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=s.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=s.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(c=s.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:i}=s;switch(i){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(s){var i,o,a,c,d,h,g,b,j,_,$;let et,tt;if("message"in s)et=s.message,tt=s.signature;else{const{chain:nt,wallet:it,statement:rt,options:_e}=s;let st;if(isBrowser$1())if(typeof it=="object")st=it;else{const ct=window;if("ethereum"in ct&&typeof ct.ethereum=="object"&&"request"in ct.ethereum&&typeof ct.ethereum.request=="function")st=ct.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof it!="object"||!(_e!=null&&_e.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");st=it}const ot=new URL((i=_e==null?void 0:_e.url)!==null&&i!==void 0?i:window.location.href),ut=await st.request({method:"eth_requestAccounts"}).then(ct=>ct).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ut||ut.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ht=getAddress(ut[0]);let dt=(o=_e==null?void 0:_e.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!dt){const ct=await st.request({method:"eth_chainId"});dt=fromHex(ct)}const at={domain:ot.host,address:ht,statement:rt,uri:ot.href,version:"1",chainId:dt,nonce:(a=_e==null?void 0:_e.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(d=(c=_e==null?void 0:_e.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(h=_e==null?void 0:_e.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=_e==null?void 0:_e.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(b=_e==null?void 0:_e.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(j=_e==null?void 0:_e.signInWithEthereum)===null||j===void 0?void 0:j.resources};et=createSiweMessage(at),tt=await st.request({method:"personal_sign",params:[toHex(et),ht]})}try{const{data:nt,error:it}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:et,signature:tt},!((_=s.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:($=s.options)===null||$===void 0?void 0:$.captchaToken}}:null),xform:_sessionResponse});if(it)throw it;if(!nt||!nt.session||!nt.user){const rt=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:rt})}return nt.session&&(await this._saveSession(nt.session),await this._notifyAllSubscribers("SIGNED_IN",nt.session)),this._returnResult({data:Object.assign({},nt),error:it})}catch(nt){if(isAuthError(nt))return this._returnResult({data:{user:null,session:null},error:nt});throw nt}}async signInWithSolana(s){var i,o,a,c,d,h,g,b,j,_,$,et;let tt,nt;if("message"in s)tt=s.message,nt=s.signature;else{const{chain:it,wallet:rt,statement:_e,options:st}=s;let ot;if(isBrowser$1())if(typeof rt=="object")ot=rt;else{const ht=window;if("solana"in ht&&typeof ht.solana=="object"&&("signIn"in ht.solana&&typeof ht.solana.signIn=="function"||"signMessage"in ht.solana&&typeof ht.solana.signMessage=="function"))ot=ht.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof rt!="object"||!(st!=null&&st.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ot=rt}const ut=new URL((i=st==null?void 0:st.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in ot&&ot.signIn){const ht=await ot.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},st==null?void 0:st.signInWithSolana),{version:"1",domain:ut.host,uri:ut.href}),_e?{statement:_e}:null));let dt;if(Array.isArray(ht)&&ht[0]&&typeof ht[0]=="object")dt=ht[0];else if(ht&&typeof ht=="object"&&"signedMessage"in ht&&"signature"in ht)dt=ht;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in dt&&"signature"in dt&&(typeof dt.signedMessage=="string"||dt.signedMessage instanceof Uint8Array)&&dt.signature instanceof Uint8Array)tt=typeof dt.signedMessage=="string"?dt.signedMessage:new TextDecoder().decode(dt.signedMessage),nt=dt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ot)||typeof ot.signMessage!="function"||!("publicKey"in ot)||typeof ot!="object"||!ot.publicKey||!("toBase58"in ot.publicKey)||typeof ot.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");tt=[`${ut.host} wants you to sign in with your Solana account:`,ot.publicKey.toBase58(),..._e?["",_e,""]:[""],"Version: 1",`URI: ${ut.href}`,`Issued At: ${(a=(o=st==null?void 0:st.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((c=st==null?void 0:st.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${st.signInWithSolana.notBefore}`]:[],...!((d=st==null?void 0:st.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${st.signInWithSolana.expirationTime}`]:[],...!((h=st==null?void 0:st.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${st.signInWithSolana.chainId}`]:[],...!((g=st==null?void 0:st.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${st.signInWithSolana.nonce}`]:[],...!((b=st==null?void 0:st.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${st.signInWithSolana.requestId}`]:[],...!((_=(j=st==null?void 0:st.signInWithSolana)===null||j===void 0?void 0:j.resources)===null||_===void 0)&&_.length?["Resources",...st.signInWithSolana.resources.map(dt=>`- ${dt}`)]:[]].join(`
`);const ht=await ot.signMessage(new TextEncoder().encode(tt),"utf8");if(!ht||!(ht instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");nt=ht}}try{const{data:it,error:rt}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:tt,signature:bytesToBase64URL(nt)},!(($=s.options)===null||$===void 0)&&$.captchaToken?{gotrue_meta_security:{captcha_token:(et=s.options)===null||et===void 0?void 0:et.captchaToken}}:null),xform:_sessionResponse});if(rt)throw rt;if(!it||!it.session||!it.user){const _e=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:_e})}return it.session&&(await this._saveSession(it.session),await this._notifyAllSubscribers("SIGNED_IN",it.session)),this._returnResult({data:Object.assign({},it),error:rt})}catch(it){if(isAuthError(it))return this._returnResult({data:{user:null,session:null},error:it});throw it}}async _exchangeCodeForSession(s){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(i??"").split("/");try{if(!o&&this.flowType==="pkce")throw new AuthPKCECodeVerifierMissingError;const{data:c,error:d}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:o},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!c||!c.session||!c.user){const h=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:a??null}),error:d})}catch(c){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(s){try{const{options:i,provider:o,token:a,access_token:c,nonce:d}=s,h=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:_sessionResponse}),{data:g,error:b}=h;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!g||!g.session||!g.user){const j=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:j})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:b})}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(s){var i,o,a,c,d;try{if("email"in s){const{email:h,options:g}=s;let b=null,j=null;this.flowType==="pkce"&&([b,j]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:_}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:b,code_challenge_method:j},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in s){const{phone:h,options:g}=s,{data:b,error:j}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(c=g==null?void 0:g.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(d=g==null?void 0:g.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:j})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(h){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(s){var i,o;try{let a,c;"options"in s&&(a=(i=s.options)===null||i===void 0?void 0:i.redirectTo,c=(o=s.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:h}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:c}}),redirectTo:a,xform:_sessionResponse});if(h)throw h;if(!d)throw new Error("An error occurred on token verification.");const g=d.session,b=d.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:b,session:g},error:null})}catch(a){if(isAuthError(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(s){var i,o,a,c,d;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const b=await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(o=(i=s.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=s==null?void 0:s.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:_ssoResponse});return!((c=b.data)===null||c===void 0)&&c.url&&isBrowser$1()&&!(!((d=s.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(h){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;if(o)throw o;if(!i)throw new AuthSessionMissingError;const{error:a}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(s){if(isAuthError(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const i=`${this.url}/resend`;if("email"in s){const{email:o,type:a,options:c}=s,{error:d}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in s){const{phone:o,type:a,options:c}=s,{data:d,error:h}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(s,i){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await s(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const i=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?s=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const o=s.expires_at?s.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",s.expires_at),!o){if(this.userStorage){const d=await getItemAsync(this.userStorage,this.storageKey+"-user");d!=null&&d.user?s.user=d.user:s.user=userNotAvailableProxy()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};s.user=insecureUserWarningProxy(s.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:a,error:c}=await this._callRefreshToken(s.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){if(s)return await this._getUser(s);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(s){try{return s?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:_userResponse}):await this._useSession(async i=>{var o,a,c;const{data:d,error:h}=i;if(h)throw h;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(a=d.session)===null||a===void 0?void 0:a.access_token)!==null&&c!==void 0?c:void 0,xform:_userResponse})})}catch(i){if(isAuthError(i))return isAuthSessionMissingError(i)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(s,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(s,i))}async _updateUser(s,i={}){try{return await this._useSession(async o=>{const{data:a,error:c}=o;if(c)throw c;if(!a.session)throw new AuthSessionMissingError;const d=a.session;let h=null,g=null;this.flowType==="pkce"&&s.email!=null&&([h,g]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:b,error:j}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:h,code_challenge_method:g}),jwt:d.access_token,xform:_userResponse});if(j)throw j;return d.user=b.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(o){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(s){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new AuthSessionMissingError;const i=Date.now()/1e3;let o=i,a=!0,c=null;const{payload:d}=decodeJWT(s.access_token);if(d.exp&&(o=d.exp,a=o<=i),a){const{data:h,error:g}=await this._callRefreshToken(s.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};c=h}else{const{data:h,error:g}=await this._getUser(s.access_token);if(g)throw g;c={access_token:s.access_token,refresh_token:s.refresh_token,user:h.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(i){if(isAuthError(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async i=>{var o;if(!s){const{data:d,error:h}=i;if(h)throw h;s=(o=d.session)!==null&&o!==void 0?o:void 0}if(!(s!=null&&s.refresh_token))throw new AuthSessionMissingError;const{data:a,error:c}=await this._callRefreshToken(s.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(isAuthError(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(s,i){try{if(!isBrowser$1())throw new AuthImplicitGrantRedirectError("No browser detected.");if(s.error||s.error_description||s.error_code)throw new AuthImplicitGrantRedirectError(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:_e,error:st}=await this._exchangeCodeForSession(s.code);if(st)throw st;const ot=new URL(window.location.href);return ot.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ot.toString()),{data:{session:_e.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:c,refresh_token:d,expires_in:h,expires_at:g,token_type:b}=s;if(!c||!h||!d||!b)throw new AuthImplicitGrantRedirectError("No session defined in URL");const j=Math.round(Date.now()/1e3),_=parseInt(h);let $=j+_;g&&($=parseInt(g));const et=$-j;et*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${et}s, should have been closer to ${_}s`);const tt=$-_;j-tt>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",tt,$,j):j-tt<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",tt,$,j);const{data:nt,error:it}=await this._getUser(c);if(it)throw it;const rt={provider_token:o,provider_refresh_token:a,access_token:c,expires_in:_,expires_at:$,refresh_token:d,token_type:b,user:nt.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:rt,redirectType:s.type},error:null})}catch(o){if(isAuthError(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(s){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),s):!!(s.access_token||s.error_description)}async _isPKCECallback(s){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&i)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:a,error:c}=i;if(c)return this._returnResult({error:c});const d=(o=a.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:h}=await this.admin.signOut(d,s);if(h&&!(isAuthApiError(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return s!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(s){const i=generateCallbackId(),o={id:i,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(s){return await this._useSession(async i=>{var o,a;try{const{data:{session:c},error:d}=i;if(d)throw d;await((o=this.stateChangeEmitters.get(s))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",s,"session",c)}catch(c){await((a=this.stateChangeEmitters.get(s))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",c),console.error(c)}})}async resetPasswordForEmail(s,i={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(c){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var s;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(s=i.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var i;try{const{data:o,error:a}=await this._useSession(async c=>{var d,h,g,b,j;const{data:_,error:$}=c;if($)throw $;const et=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(d=s.options)===null||d===void 0?void 0:d.redirectTo,scopes:(h=s.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=s.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",et,{headers:this.headers,jwt:(j=(b=_.session)===null||b===void 0?void 0:b.access_token)!==null&&j!==void 0?j:void 0})});if(a)throw a;return isBrowser$1()&&!(!((i=s.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:s.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(isAuthError(o))return this._returnResult({data:{provider:s.provider,url:null},error:o});throw o}}async linkIdentityIdToken(s){return await this._useSession(async i=>{var o;try{const{error:a,data:{session:c}}=i;if(a)throw a;const{options:d,provider:h,token:g,access_token:b,nonce:j}=s,_=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c==null?void 0:c.access_token)!==null&&o!==void 0?o:void 0,body:{provider:h,id_token:g,access_token:b,nonce:j,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:_sessionResponse}),{data:$,error:et}=_;return et?this._returnResult({data:{user:null,session:null},error:et}):!$||!$.session||!$.user?this._returnResult({data:{user:null,session:null},error:new AuthInvalidTokenResponseError}):($.session&&(await this._saveSession($.session),await this._notifyAllSubscribers("USER_UPDATED",$.session)),this._returnResult({data:$,error:et}))}catch(a){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(s){try{return await this._useSession(async i=>{var o,a;const{data:c,error:d}=i;if(d)throw d;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(a=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(s){const i=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await retryable(async a=>(a>0&&await sleep(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:_sessionResponse})),(a,c)=>{const d=200*Math.pow(2,a);return c&&isAuthRetryableFetchError(c)&&Date.now()+d-o<AUTO_REFRESH_TICK_DURATION_MS})}catch(o){if(this._debug(i,"error",o),isAuthError(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",i,"url",o),isBrowser$1()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:s,url:o},error:null}}async _recoverAndRefresh(){var s,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await getItemAsync(this.storage,this.storageKey);if(a&&this.userStorage){let d=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:a.user},await setItemAsync(this.userStorage,this.storageKey+"-user",d)),a.user=(s=d==null?void 0:d.user)!==null&&s!==void 0?s:userNotAvailableProxy()}else if(a&&!a.user&&!a.user){const d=await getItemAsync(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(a.user=d.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,a)):a.user=userNotAvailableProxy()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const c=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),c){if(this.autoRefreshToken&&a.refresh_token){const{error:d}=await this._callRefreshToken(a.refresh_token);d&&(console.error(d),isAuthRetryableFetchError(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:h}=await this._getUser(a.access_token);!h&&(d!=null&&d.user)?(a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(s){var i,o;if(!s)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Deferred;const{data:c,error:d}=await this._refreshAccessToken(s);if(d)throw d;if(!c.session)throw new AuthSessionMissingError;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const h={data:c.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(c){if(this._debug(a,"error",c),isAuthError(c)){const d={data:null,error:c};return isAuthRetryableFetchError(c)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(s,i,o=!0){const a=`#_notifyAllSubscribers(${s})`;this._debug(a,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:s,session:i});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(s,i)}catch(g){c.push(g)}});if(await Promise.all(d),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{this._debug(a,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},s),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const c=deepClone(a);await setItemAsync(this.storage,this.storageKey,c)}else{const a=deepClone(i);await setItemAsync(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&isBrowser$1()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-s)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),a<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser$1()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const i=`#_onVisibilityChanged(${s})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,i,o){const a=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});a.push(h.toString())}if(o!=null&&o.queryParams){const c=new URLSearchParams(o.queryParams);a.push(c.toString())}return o!=null&&o.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${s}?${a.join("&")}`}async _unenroll(s){try{return await this._useSession(async i=>{var o;const{data:a,error:c}=i;return c?this._returnResult({data:null,error:c}):await _request(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(s){try{return await this._useSession(async i=>{var o,a;const{data:c,error:d}=i;if(d)return this._returnResult({data:null,error:d});const h=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:g,error:b}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return b?this._returnResult({data:null,error:b}):(s.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _verify(s){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:c}=i;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?serializeCredentialCreationResponse(s.webauthn.credential_response):serializeCredentialRequestResponse(s.webauthn.credential_response)})}:{code:s.code}),{data:h,error:g}=await _request(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:d,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(s){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:c}=i;if(c)return this._returnResult({data:null,error:c});const d=await _request(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:s,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});if(d.error)return d;const{data:h}=d;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(s){const{data:i,error:o}=await this._challenge({factorId:s.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:s.factorId,challengeId:i.id,code:s.code})}async _listFactors(){var s;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const c of(s=i==null?void 0:i.factors)!==null&&s!==void 0?s:[])a.all.push(c),c.status==="verified"&&a[c.factor_type].push(c);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var s,i;const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=decodeJWT(o.access_token);let d=null;c.aal&&(d=c.aal);let h=d;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(j=>j.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const b=c.amr||[];return{data:{currentLevel:d,nextLevel:h,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;return a?this._returnResult({data:null,error:a}):o?await _request(this.fetch,"GET",`${this.url}/oauth/authorizations/${s}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(s,i){try{return await this._useSession(async o=>{const{data:{session:a},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!a)return this._returnResult({data:null,error:new AuthSessionMissingError});const d=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return d.data&&d.data.redirect_url&&isBrowser$1()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(isAuthError(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(s,i){try{return await this._useSession(async o=>{const{data:{session:a},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!a)return this._returnResult({data:null,error:new AuthSessionMissingError});const d=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${s}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return d.data&&d.data.redirect_url&&isBrowser$1()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(o){if(isAuthError(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async s=>{const{data:{session:i},error:o}=s;return o?this._returnResult({data:null,error:o}):i?await _request(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(s){if(isAuthError(s))return this._returnResult({data:null,error:s});throw s}}async _revokeOAuthGrant(s){try{return await this._useSession(async i=>{const{data:{session:o},error:a}=i;return a?this._returnResult({data:null,error:a}):o?(await _request(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:s.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(s,i={keys:[]}){let o=i.keys.find(h=>h.kid===s);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(h=>h.kid===s),o&&this.jwks_cached_at+JWKS_TTL>a)return o;const{data:c,error:d}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=a,o=c.keys.find(h=>h.kid===s),!o)?null:o}async getClaims(s,i={}){try{let o=s;if(!o){const{data:et,error:tt}=await this.getSession();if(tt||!et.session)return this._returnResult({data:null,error:tt});o=et.session.access_token}const{header:a,payload:c,signature:d,raw:{header:h,payload:g}}=decodeJWT(o);i!=null&&i.allowExpired||validateExp(c.exp);const b=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!b){const{error:et}=await this.getUser(o);if(et)throw et;return{data:{claims:c,header:a,signature:d},error:null}}const j=getAlgorithm(a.alg),_=await crypto.subtle.importKey("jwk",b,j,!0,["verify"]);if(!await crypto.subtle.verify(j,_,d,stringToUint8Array(`${h}.${g}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:c,header:a,signature:d},error:null}}catch(o){if(isAuthError(o))return this._returnResult({data:null,error:o});throw o}}}GoTrueClient.nextInstanceID={};const AuthClient=GoTrueClient,version="2.90.1";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${JS_ENV}/${version}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(e)}function toPrimitive(e,s){if(_typeof(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,s);if(_typeof(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function toPropertyKey(e){var s=toPrimitive(e,"string");return _typeof(s)=="symbol"?s:s+""}function _defineProperty(e,s,i){return(s=toPropertyKey(s))in e?Object.defineProperty(e,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[s]=i,e}function ownKeys(e,s){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,o)}return i}function _objectSpread2(e){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(i),!0).forEach(function(o){_defineProperty(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}const resolveFetch=e=>e?(...s)=>e(...s):(...s)=>fetch(...s),resolveHeadersConstructor=()=>Headers,fetchWithAuth=(e,s,i)=>{const o=resolveFetch(i),a=resolveHeadersConstructor();return async(c,d)=>{var h;const g=(h=await s())!==null&&h!==void 0?h:e;let b=new a(d==null?void 0:d.headers);return b.has("apikey")||b.set("apikey",e),b.has("Authorization")||b.set("Authorization",`Bearer ${g}`),o(c,_objectSpread2(_objectSpread2({},d),{},{headers:b}))}};function ensureTrailingSlash(e){return e.endsWith("/")?e:e+"/"}function applySettingDefaults(e,s){var i,o;const{db:a,auth:c,realtime:d,global:h}=e,{db:g,auth:b,realtime:j,global:_}=s,$={db:_objectSpread2(_objectSpread2({},g),a),auth:_objectSpread2(_objectSpread2({},b),c),realtime:_objectSpread2(_objectSpread2({},j),d),storage:{},global:_objectSpread2(_objectSpread2(_objectSpread2({},_),h),{},{headers:_objectSpread2(_objectSpread2({},(i=_==null?void 0:_.headers)!==null&&i!==void 0?i:{}),(o=h==null?void 0:h.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return e.accessToken?$.accessToken=e.accessToken:delete $.accessToken,$}function validateSupabaseUrl(e){const s=e==null?void 0:e.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var SupabaseAuthClient=class extends AuthClient{constructor(e){super(e)}},SupabaseClient=class{constructor(e,s,i){var o,a;this.supabaseUrl=e,this.supabaseKey=s;const c=validateSupabaseUrl(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:_objectSpread2(_objectSpread2({},DEFAULT_AUTH_OPTIONS),{},{storageKey:d}),global:DEFAULT_GLOBAL_OPTIONS},g=applySettingDefaults(i??{},h);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(j,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=g.auth)!==null&&b!==void 0?b:{},this.headers,g.global.fetch)}this.fetch=fetchWithAuth(s,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(_objectSpread2({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(j=>this.realtime.setAuth(j)).catch(j=>console.warn("Failed to set initial Realtime auth token:",j)),this.rest=new PostgrestClient(new URL("rest/v1",c).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,s,i)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,s,i;if(e.accessToken)return await e.accessToken();const{data:o}=await e.auth.getSession();return(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:i,storage:o,userStorage:a,storageKey:c,flowType:d,lock:h,debug:g,throwOnError:b},j,_){const $={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:_objectSpread2(_objectSpread2({},$),j),storageKey:c,autoRefreshToken:e,persistSession:s,detectSessionInUrl:i,storage:o,userStorage:a,flowType:d,lock:h,debug:g,throwOnError:b,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(et=>et.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl.href,_objectSpread2(_objectSpread2({},e),{},{params:_objectSpread2(_objectSpread2({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,s)=>{this._handleTokenChanged(e,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,s,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const createClient=(e,s,i)=>new SupabaseClient(e,s,i);function shouldShowDeprecationWarning(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const s=e.version;if(s==null)return!1;const i=s.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl="https://mvnlklasaxjpqwwfwjog.supabase.co",supabaseAnonKey="sb_publishable_bULwPZWlnVu7ojY30wGgBg_aQiS2AHk",supabase=createClient(supabaseUrl,supabaseAnonKey),NeuroContext=reactExports.createContext(),useNeuro=()=>{const e=reactExports.useContext(NeuroContext);if(!e)throw new Error("useNeuro must be used within a NeuroProvider");return e},NeuroProvider=({children:e})=>{const[s,i]=reactExports.useState("VERVE"),[o,a]=reactExports.useState(0),[c,d]=reactExports.useState(.3),[h,g]=reactExports.useState(!1),[b,j]=reactExports.useState(null),[_,$]=reactExports.useState(!1),[et,tt]=reactExports.useState(!1),[nt,it]=reactExports.useState(""),[rt,_e]=reactExports.useState(!1),{stressLevel:st,isStressed:ot}=useStressSensor({onStressDetected:ct=>{(ct.isRaging||ct.isJittery)&&i("VERVE")}}),ut=reactExports.useCallback(()=>{switch(s){case"FORGE":return{borderColor:"#D4AF37",glowColor:"rgba(212, 175, 55, 0.5)",blur:"20px",title:"Guardian of Logic"};case"AURA":return{borderColor:"#00008B",glowColor:"rgba(0, 0, 139, 0.4)",blur:"15px",title:"Master of Focus"};default:return{borderColor:"#E6E6FA",glowColor:"rgba(230, 230, 250, 0.3)",blur:"10px",title:"Initiate of Verve"}}},[s]),ht=reactExports.useCallback(()=>{a(ct=>ct+1)},[]),dt=reactExports.useCallback(ct=>{i(ct)},[]),at={mode:s,getModeStyles:ut,neuralActivity:c,isProcessing:h,identityStrikeTrigger:o,selectedNode:b,practiceMode:_,stressLevel:st,isStressed:ot,hasKeyToVictory:rt,triggerIdentityStrike:ht,switchMode:dt,isInVerveMode:s==="VERVE",isInAuraMode:s==="AURA",isInForgeMode:s==="FORGE"};return jsxRuntimeExports.jsx(NeuroContext.Provider,{value:at,children:e})},MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),PresenceContext=reactExports.createContext(null),isBrowser=typeof document<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1}),camelToDash=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function useVisualElement(e,s,i,o){const{visualElement:a}=reactExports.useContext(MotionContext),c=reactExports.useContext(LazyContext),d=reactExports.useContext(PresenceContext),h=reactExports.useContext(MotionConfigContext).reducedMotion,g=reactExports.useRef();o=o||c.renderer,!g.current&&o&&(g.current=o(e,{visualState:s,parent:a,props:i,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const b=g.current;reactExports.useInsertionEffect(()=>{b&&b.update(i,d)});const j=reactExports.useRef(!!(i[optimizedAppearDataAttribute]&&!window.HandoffComplete));return useIsomorphicLayoutEffect(()=>{b&&(b.render(),j.current&&b.animationState&&b.animationState.animateChanges())}),reactExports.useEffect(()=>{b&&(b.updateFeatures(),!j.current&&b.animationState&&b.animationState.animateChanges(),j.current&&(j.current=!1,window.HandoffComplete=!0))}),b}function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,s,i){return reactExports.useCallback(o=>{o&&e.mount&&e.mount(o),s&&(o?s.mount(o):s.unmount()),i&&(typeof i=="function"?i(o):isRefObject(i)&&(i.current=o))},[s])}function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(s=>isVariantLabel(e[s]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,s){if(isControllingVariants(e)){const{initial:i,animate:o}=e;return{initial:i===!1||isVariantLabel(i)?i:void 0,animate:isVariantLabel(o)?o:void 0}}return e.inherit!==!1?s:{}}function useCreateMotionContext(e){const{initial:s,animate:i}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:s,animate:i}),[variantLabelsAsDependency(s),variantLabelsAsDependency(i)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:s=>featureProps[e].some(i=>!!s[i])};function loadFeatures(e){for(const s in e)featureDefinitions[s]={...featureDefinitions[s],...e[s]}}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function createMotionComponent({preloadedFeatures:e,createVisualElement:s,useRender:i,useVisualState:o,Component:a}){e&&loadFeatures(e);function c(h,g){let b;const j={...reactExports.useContext(MotionConfigContext),...h,layoutId:useLayoutId(h)},{isStatic:_}=j,$=useCreateMotionContext(h),et=o(h,_);if(!_&&isBrowser){$.visualElement=useVisualElement(a,et,j,s);const tt=reactExports.useContext(SwitchLayoutGroupContext),nt=reactExports.useContext(LazyContext).strict;$.visualElement&&(b=$.visualElement.loadFeatures(j,nt,e,tt))}return reactExports.createElement(MotionContext.Provider,{value:$},b&&$.visualElement?reactExports.createElement(b,{visualElement:$.visualElement,...j}):null,i(a,h,useMotionRef(et,$.visualElement,g),et,_,$.visualElement))}const d=reactExports.forwardRef(c);return d[motionComponentSymbol]=a,d}function useLayoutId({layoutId:e}){const s=reactExports.useContext(LayoutGroupContext).id;return s&&e!==void 0?s+"-"+e:e}function createMotionProxy(e){function s(o,a={}){return createMotionComponent(e(o,a))}if(typeof Proxy>"u")return s;const i=new Map;return new Proxy(s,{get:(o,a)=>(i.has(a)||i.set(a,s(a)),i.get(a))})}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/.test(e))}const scaleCorrectors={};function addScaleCorrector(e){Object.assign(scaleCorrectors,e)}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder);function isForcedMotionValue(e,{layout:s,layoutId:i}){return transformProps.has(e)||e.startsWith("origin")||(s||i!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}const isMotionValue=e=>!!(e&&e.getVelocity),translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,{enableHardwareAcceleration:s=!0,allowTransformNone:i=!0},o,a){let c="";for(let d=0;d<numTransforms;d++){const h=transformPropOrder[d];if(e[h]!==void 0){const g=translateAlias[h]||h;c+=`${g}(${e[h]}) `}}return s&&!e.z&&(c+="translateZ(0)"),c=c.trim(),a?c=a(e,o?"":c):i&&o&&(c="none"),c}const checkStringStartsWith=e=>s=>typeof s=="string"&&s.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),isCSSVariableToken=checkStringStartsWith("var(--"),cssVariableRegex=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,getValueAsType=(e,s)=>s&&typeof e=="number"?s.transform(e):e,clamp=(e,s,i)=>Math.min(Math.max(i,e),s),number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp(0,1,e)},scale={...number,default:1},sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/(-)?([\d]*\.?[\d])+/g,colorRegex=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,singleColorRegex=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function isString(e){return typeof e=="string"}const createUnitType=e=>({test:s=>isString(s)&&s.endsWith(e)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},int={...number,transform:Math.round},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int};function buildHTMLStyles(e,s,i,o){const{style:a,vars:c,transform:d,transformOrigin:h}=e;let g=!1,b=!1,j=!0;for(const _ in s){const $=s[_];if(isCSSVariableName(_)){c[_]=$;continue}const et=numberValueTypes[_],tt=getValueAsType($,et);if(transformProps.has(_)){if(g=!0,d[_]=tt,!j)continue;$!==(et.default||0)&&(j=!1)}else _.startsWith("origin")?(b=!0,h[_]=tt):a[_]=tt}if(s.transform||(g||o?a.transform=buildTransform(e.transform,i,j,o):a.transform&&(a.transform="none")),b){const{originX:_="50%",originY:$="50%",originZ:et=0}=h;a.transformOrigin=`${_} ${$} ${et}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,s,i){for(const o in s)!isMotionValue(s[o])&&!isForcedMotionValue(o,i)&&(e[o]=s[o])}function useInitialMotionValues({transformTemplate:e},s,i){return reactExports.useMemo(()=>{const o=createHtmlRenderState();return buildHTMLStyles(o,s,{enableHardwareAcceleration:!i},e),Object.assign({},o.vars,o.style)},[s])}function useStyle(e,s,i){const o=e.style||{},a={};return copyRawValuesOnly(a,o,e),Object.assign(a,useInitialMotionValues(e,s,i)),e.transformValues?e.transformValues(a):a}function useHTMLProps(e,s,i){const o={},a=useStyle(e,s,i);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=a,o}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){e&&(shouldForward=s=>s.startsWith("on")?!isValidMotionProp(s):e(s))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,s,i){const o={};for(const a in e)a==="values"&&typeof e.values=="object"||(shouldForward(a)||i===!0&&isValidMotionProp(a)||!s&&!isValidMotionProp(a)||e.draggable&&a.startsWith("onDrag"))&&(o[a]=e[a]);return o}function calcOrigin$1(e,s,i){return typeof e=="string"?e:px.transform(s+i*e)}function calcSVGTransformOrigin(e,s,i){const o=calcOrigin$1(s,e.x,e.width),a=calcOrigin$1(i,e.y,e.height);return`${o} ${a}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,s,i=1,o=0,a=!0){e.pathLength=1;const c=a?dashKeys:camelKeys;e[c.offset]=px.transform(-o);const d=px.transform(s),h=px.transform(i);e[c.array]=`${d} ${h}`}function buildSVGAttrs(e,{attrX:s,attrY:i,attrScale:o,originX:a,originY:c,pathLength:d,pathSpacing:h=1,pathOffset:g=0,...b},j,_,$){if(buildHTMLStyles(e,b,j,$),_){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:et,style:tt,dimensions:nt}=e;et.transform&&(nt&&(tt.transform=et.transform),delete et.transform),nt&&(a!==void 0||c!==void 0||tt.transform)&&(tt.transformOrigin=calcSVGTransformOrigin(nt,a!==void 0?a:.5,c!==void 0?c:.5)),s!==void 0&&(et.x=s),i!==void 0&&(et.y=i),o!==void 0&&(et.scale=o),d!==void 0&&buildSVGPath(et,d,h,g,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function useSVGProps(e,s,i,o){const a=reactExports.useMemo(()=>{const c=createSvgRenderState();return buildSVGAttrs(c,s,{enableHardwareAcceleration:!1},isSVGTag(o),e.transformTemplate),{...c.attrs,style:{...c.style}}},[s]);if(e.style){const c={};copyRawValuesOnly(c,e.style,e),a.style={...c,...a.style}}return a}function createUseRender(e=!1){return(i,o,a,{latestValues:c},d)=>{const g=(isSVGComponent(i)?useSVGProps:useHTMLProps)(o,c,d,i),j={...filterProps(o,typeof i=="string",e),...g,ref:a},{children:_}=o,$=reactExports.useMemo(()=>isMotionValue(_)?_.get():_,[_]);return reactExports.createElement(i,{...j,children:$})}}function renderHTML(e,{style:s,vars:i},o,a){Object.assign(e.style,s,a&&a.getProjectionStyles(o));for(const c in i)e.style.setProperty(c,i[c])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,s,i,o){renderHTML(e,s,void 0,o);for(const a in s.attrs)e.setAttribute(camelCaseAttributes.has(a)?a:camelToDash(a),s.attrs[a])}function scrapeMotionValuesFromProps$1(e,s){const{style:i}=e,o={};for(const a in i)(isMotionValue(i[a])||s.style&&isMotionValue(s.style[a])||isForcedMotionValue(a,e))&&(o[a]=i[a]);return o}function scrapeMotionValuesFromProps(e,s){const i=scrapeMotionValuesFromProps$1(e,s);for(const o in e)if(isMotionValue(e[o])||isMotionValue(s[o])){const a=transformPropOrder.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[a]=e[o]}return i}function resolveVariantFromProps(e,s,i,o={},a={}){return typeof s=="function"&&(s=s(i!==void 0?i:e.custom,o,a)),typeof s=="string"&&(s=e.variants&&e.variants[s]),typeof s=="function"&&(s=s(i!==void 0?i:e.custom,o,a)),s}function useConstant(e){const s=reactExports.useRef(null);return s.current===null&&(s.current=e()),s.current}const isKeyframesTarget=e=>Array.isArray(e),isCustomValue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),resolveFinalValueInKeyframes=e=>isKeyframesTarget(e)?e[e.length-1]||0:e;function resolveMotionValue(e){const s=isMotionValue(e)?e.get():e;return isCustomValue(s)?s.toValue():s}function makeState({scrapeMotionValuesFromProps:e,createRenderState:s,onMount:i},o,a,c){const d={latestValues:makeLatestValues(o,a,c,e),renderState:s()};return i&&(d.mount=h=>i(o,h,d)),d}const makeUseVisualState=e=>(s,i)=>{const o=reactExports.useContext(MotionContext),a=reactExports.useContext(PresenceContext),c=()=>makeState(e,s,o,a);return i?c():useConstant(c)};function makeLatestValues(e,s,i,o){const a={},c=o(e,{});for(const $ in c)a[$]=resolveMotionValue(c[$]);let{initial:d,animate:h}=e;const g=isControllingVariants(e),b=isVariantNode(e);s&&b&&!g&&e.inherit!==!1&&(d===void 0&&(d=s.initial),h===void 0&&(h=s.animate));let j=i?i.initial===!1:!1;j=j||d===!1;const _=j?h:d;return _&&typeof _!="boolean"&&!isAnimationControls(_)&&(Array.isArray(_)?_:[_]).forEach(et=>{const tt=resolveVariantFromProps(e,et);if(!tt)return;const{transitionEnd:nt,transition:it,...rt}=tt;for(const _e in rt){let st=rt[_e];if(Array.isArray(st)){const ot=j?st.length-1:0;st=st[ot]}st!==null&&(a[_e]=st)}for(const _e in nt)a[_e]=nt[_e]}),a}const noop=e=>e;class Queue{constructor(){this.order=[],this.scheduled=new Set}add(s){if(!this.scheduled.has(s))return this.scheduled.add(s),this.order.push(s),!0}remove(s){const i=this.order.indexOf(s);i!==-1&&(this.order.splice(i,1),this.scheduled.delete(s))}clear(){this.order.length=0,this.scheduled.clear()}}function createRenderStep(e){let s=new Queue,i=new Queue,o=0,a=!1,c=!1;const d=new WeakSet,h={schedule:(g,b=!1,j=!1)=>{const _=j&&a,$=_?s:i;return b&&d.add(g),$.add(g)&&_&&a&&(o=s.order.length),g},cancel:g=>{i.remove(g),d.delete(g)},process:g=>{if(a){c=!0;return}if(a=!0,[s,i]=[i,s],i.clear(),o=s.order.length,o)for(let b=0;b<o;b++){const j=s.order[b];j(g),d.has(j)&&(h.schedule(j),e())}a=!1,c&&(c=!1,h.process(g))}};return h}const stepsOrder=["prepare","read","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(e,s){let i=!1,o=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=stepsOrder.reduce((_,$)=>(_[$]=createRenderStep(()=>i=!0),_),{}),d=_=>c[_].process(a),h=()=>{const _=performance.now();i=!1,a.delta=o?1e3/60:Math.max(Math.min(_-a.timestamp,maxElapsed),1),a.timestamp=_,a.isProcessing=!0,stepsOrder.forEach(d),a.isProcessing=!1,i&&s&&(o=!1,e(h))},g=()=>{i=!0,o=!0,a.isProcessing||e(h)};return{schedule:stepsOrder.reduce((_,$)=>{const et=c[$];return _[$]=(tt,nt=!1,it=!1)=>(i||g(),et.schedule(tt,nt,it)),_},{}),cancel:_=>stepsOrder.forEach($=>c[$].cancel(_)),state:a,steps:c}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0),svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(e,s,{renderState:i,latestValues:o})=>{frame.read(()=>{try{i.dimensions=typeof s.getBBox=="function"?s.getBBox():s.getBoundingClientRect()}catch{i.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(i,o,{enableHardwareAcceleration:!1},isSVGTag(s.tagName),e.transformTemplate),renderSVG(s,i)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function createDomMotionConfig(e,{forwardMotionProps:s=!1},i,o){return{...isSVGComponent(e)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:i,useRender:createUseRender(s),createVisualElement:o,Component:e}}function addDomEvent(e,s,i,o={passive:!0}){return e.addEventListener(s,i,o),()=>e.removeEventListener(s,i)}const isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function extractEventInfo(e,s="page"){return{point:{x:e[s+"X"],y:e[s+"Y"]}}}const addPointerInfo=e=>s=>isPrimaryPointer(s)&&e(s,extractEventInfo(s));function addPointerEvent(e,s,i,o){return addDomEvent(e,s,addPointerInfo(i),o)}const combineFunctions=(e,s)=>i=>s(e(i)),pipe=(...e)=>e.reduce(combineFunctions);function createLock(e){let s=null;return()=>{const i=()=>{s=null};return s===null?(s=e,i):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(e){let s=!1;if(e==="y")s=globalVerticalLock();else if(e==="x")s=globalHorizontalLock();else{const i=globalHorizontalLock(),o=globalVerticalLock();i&&o?s=()=>{i(),o()}:(i&&i(),o&&o())}return s}function isDragActive(){const e=getGlobalLock(!0);return e?(e(),!1):!0}class Feature{constructor(s){this.isMounted=!1,this.node=s}update(){}}function addHoverEvent(e,s){const i="pointer"+(s?"enter":"leave"),o="onHover"+(s?"Start":"End"),a=(c,d)=>{if(c.pointerType==="touch"||isDragActive())return;const h=e.getProps();e.animationState&&h.whileHover&&e.animationState.setActive("whileHover",s),h[o]&&frame.update(()=>h[o](c,d))};return addPointerEvent(e.current,i,a,{passive:!e.getProps()[o]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(e,s)=>s?e===s?!0:isNodeOrChild(e,s.parentElement):!1;function fireSyntheticPointerEvent(e,s){if(!s)return;const i=new PointerEvent("pointer"+e);s(i,extractEventInfo(i))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop,this.removeEndListeners=noop,this.removeAccessibleListeners=noop,this.startPointerPress=(s,i)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),c=addPointerEvent(window,"pointerup",(h,g)=>{if(!this.checkPressEnd())return;const{onTap:b,onTapCancel:j,globalTapTarget:_}=this.node.getProps();frame.update(()=>{!_&&!isNodeOrChild(this.node.current,h.target)?j&&j(h,g):b&&b(h,g)})},{passive:!(o.onTap||o.onPointerUp)}),d=addPointerEvent(window,"pointercancel",(h,g)=>this.cancelPress(h,g),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=pipe(c,d),this.startPress(s,i)},this.startAccessiblePress=()=>{const s=c=>{if(c.key!=="Enter"||this.isPressing)return;const d=h=>{h.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(g,b)=>{const{onTap:j}=this.node.getProps();j&&frame.update(()=>j(g,b))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",d),fireSyntheticPointerEvent("down",(h,g)=>{this.startPress(h,g)})},i=addDomEvent(this.node.current,"keydown",s),o=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(c,d)=>this.cancelPress(c,d))},a=addDomEvent(this.node.current,"blur",o);this.removeAccessibleListeners=pipe(i,a)}}startPress(s,i){this.isPressing=!0;const{onTapStart:o,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&frame.update(()=>o(s,i))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(s,i){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&frame.update(()=>o(s,i))}mount(){const s=this.node.getProps(),i=addPointerEvent(s.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(s.onTapStart||s.onPointerStart)}),o=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(i,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const s=observerCallbacks.get(e.target);s&&s(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...s}){const i=e||document;observers.has(i)||observers.set(i,{});const o=observers.get(i),a=JSON.stringify(s);return o[a]||(o[a]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...s})),o[a]}function observeIntersection(e,s,i){const o=initIntersectionObserver(s);return observerCallbacks.set(e,i),o.observe(e),()=>{observerCallbacks.delete(e),o.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:i,margin:o,amount:a="some",once:c}=s,d={root:i?i.current:void 0,rootMargin:o,threshold:typeof a=="number"?a:thresholdNames[a]},h=g=>{const{isIntersecting:b}=g;if(this.isInView===b||(this.isInView=b,c&&!b&&this.hasEnteredView))return;b&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",b);const{onViewportEnter:j,onViewportLeave:_}=this.node.getProps(),$=b?j:_;$&&$(g)};return observeIntersection(this.node.current,d,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:i}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(s,i))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:s={}}={}){return i=>e[i]!==s[i]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}};function shallowCompare(e,s){if(!Array.isArray(s))return!1;const i=s.length;if(i!==e.length)return!1;for(let o=0;o<i;o++)if(s[o]!==e[o])return!1;return!0}function getCurrent(e){const s={};return e.values.forEach((i,o)=>s[o]=i.get()),s}function getVelocity$1(e){const s={};return e.values.forEach((i,o)=>s[o]=i.getVelocity()),s}function resolveVariant(e,s,i){const o=e.getProps();return resolveVariantFromProps(o,s,i!==void 0?i:o.custom,getCurrent(e),getVelocity$1(e))}let invariant=noop;const secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3,instantAnimationState={current:!1},isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number";function isWaapiSupportedEasing(e){return!!(!e||typeof e=="string"&&supportedWaapiEasing[e]||isBezierDefinition(e)||Array.isArray(e)&&e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([e,s,i,o])=>`cubic-bezier(${e}, ${s}, ${i}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e){if(e)return isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(mapEasingToNativeEasing):supportedWaapiEasing[e]}function animateStyle(e,s,i,{delay:o=0,duration:a,repeat:c=0,repeatType:d="loop",ease:h,times:g}={}){const b={[s]:i};g&&(b.offset=g);const j=mapEasingToNativeEasing(h);return Array.isArray(j)&&(b.easing=j),e.animate(b,{delay:o,duration:a,easing:Array.isArray(j)?"linear":j,fill:"both",iterations:c+1,direction:d==="reverse"?"alternate":"normal"})}function getFinalKeyframe(e,{repeat:s,repeatType:i="loop"}){const o=s&&i!=="loop"&&s%2===1?0:e.length-1;return e[o]}const calcBezier=(e,s,i)=>(((1-3*i+3*s)*e+(3*i-6*s))*e+3*s)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,s,i,o,a){let c,d,h=0;do d=s+(i-s)/2,c=calcBezier(d,o,a)-e,c>0?i=d:s=d;while(Math.abs(c)>subdivisionPrecision&&++h<subdivisionMaxIterations);return d}function cubicBezier(e,s,i,o){if(e===s&&i===o)return noop;const a=c=>binarySubdivide(c,0,1,e,i);return c=>c===0||c===1?c:calcBezier(a(c),s,o)}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",mirrorEasing=e=>s=>s<=.5?e(2*s)/2:(2-e(2*(1-s)))/2,reverseEasing=e=>s=>1-e(1-s),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=e=>{if(Array.isArray(e)){invariant(e.length===4);const[s,i,o,a]=e;return cubicBezier(s,i,o,a)}else if(typeof e=="string")return easingLookup[e];return e},isColorString=(e,s)=>i=>!!(isString(i)&&singleColorRegex.test(i)&&i.startsWith(e)||s&&Object.prototype.hasOwnProperty.call(i,s)),splitColor=(e,s,i)=>o=>{if(!isString(o))return o;const[a,c,d,h]=o.match(floatRegex);return{[e]:parseFloat(a),[s]:parseFloat(c),[i]:parseFloat(d),alpha:h!==void 0?parseFloat(h):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:s,blue:i,alpha:o=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(s)+", "+rgbUnit.transform(i)+", "+sanitize(alpha.transform(o))+")"};function parseHex(e){let s="",i="",o="",a="";return e.length>5?(s=e.substring(1,3),i=e.substring(3,5),o=e.substring(5,7),a=e.substring(7,9)):(s=e.substring(1,2),i=e.substring(2,3),o=e.substring(3,4),a=e.substring(4,5),s+=s,i+=i,o+=o,a+=a),{red:parseInt(s,16),green:parseInt(i,16),blue:parseInt(o,16),alpha:a?parseInt(a,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:s,lightness:i,alpha:o=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(s))+", "+percent.transform(sanitize(i))+", "+sanitize(alpha.transform(o))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>isString(e)?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e)},mix=(e,s,i)=>-i*e+i*s+e;function hueToRgb(e,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(s-e)*6*i:i<1/2?s:i<2/3?e+(s-e)*(2/3-i)*6:e}function hslaToRgba({hue:e,saturation:s,lightness:i,alpha:o}){e/=360,s/=100,i/=100;let a=0,c=0,d=0;if(!s)a=c=d=i;else{const h=i<.5?i*(1+s):i+s-i*s,g=2*i-h;a=hueToRgb(g,h,e+1/3),c=hueToRgb(g,h,e),d=hueToRgb(g,h,e-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(d*255),alpha:o}}const mixLinearColor=(e,s,i)=>{const o=e*e;return Math.sqrt(Math.max(0,i*(s*s-o)+o))},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(s=>s.test(e));function asRGBA(e){const s=getColorType(e);let i=s.parse(e);return s===hsla&&(i=hslaToRgba(i)),i}const mixColor=(e,s)=>{const i=asRGBA(e),o=asRGBA(s),a={...i};return c=>(a.red=mixLinearColor(i.red,o.red,c),a.green=mixLinearColor(i.green,o.green,c),a.blue=mixLinearColor(i.blue,o.blue,c),a.alpha=mix(i.alpha,o.alpha,c),rgba.transform(a))};function test(e){var s,i;return isNaN(e)&&isString(e)&&(((s=e.match(floatRegex))===null||s===void 0?void 0:s.length)||0)+(((i=e.match(colorRegex))===null||i===void 0?void 0:i.length)||0)>0}const cssVarTokeniser={regex:cssVariableRegex,countKey:"Vars",token:"${v}",parse:noop},colorTokeniser={regex:colorRegex,countKey:"Colors",token:"${c}",parse:color.parse},numberTokeniser={regex:floatRegex,countKey:"Numbers",token:"${n}",parse:number.parse};function tokenise(e,{regex:s,countKey:i,token:o,parse:a}){const c=e.tokenised.match(s);c&&(e["num"+i]=c.length,e.tokenised=e.tokenised.replace(s,o),e.values.push(...c.map(a)))}function analyseComplexValue(e){const s=e.toString(),i={value:s,tokenised:s,values:[],numVars:0,numColors:0,numNumbers:0};return i.value.includes("var(--")&&tokenise(i,cssVarTokeniser),tokenise(i,colorTokeniser),tokenise(i,numberTokeniser),i}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{values:s,numColors:i,numVars:o,tokenised:a}=analyseComplexValue(e),c=s.length;return d=>{let h=a;for(let g=0;g<c;g++)g<o?h=h.replace(cssVarTokeniser.token,d[g]):g<o+i?h=h.replace(colorTokeniser.token,color.transform(d[g])):h=h.replace(numberTokeniser.token,sanitize(d[g]));return h}}const convertNumbersToZero=e=>typeof e=="number"?0:e;function getAnimatableNone$1(e){const s=parseComplexValue(e);return createTransformer(e)(s.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},mixImmediate=(e,s)=>i=>`${i>0?s:e}`;function getMixer(e,s){return typeof e=="number"?i=>mix(e,s,i):color.test(e)?mixColor(e,s):e.startsWith("var(")?mixImmediate(e,s):mixComplex(e,s)}const mixArray=(e,s)=>{const i=[...e],o=i.length,a=e.map((c,d)=>getMixer(c,s[d]));return c=>{for(let d=0;d<o;d++)i[d]=a[d](c);return i}},mixObject=(e,s)=>{const i={...e,...s},o={};for(const a in i)e[a]!==void 0&&s[a]!==void 0&&(o[a]=getMixer(e[a],s[a]));return a=>{for(const c in o)i[c]=o[c](a);return i}},mixComplex=(e,s)=>{const i=complex.createTransformer(s),o=analyseComplexValue(e),a=analyseComplexValue(s);return o.numVars===a.numVars&&o.numColors===a.numColors&&o.numNumbers>=a.numNumbers?pipe(mixArray(o.values,a.values),i):mixImmediate(e,s)},progress=(e,s,i)=>{const o=s-e;return o===0?1:(i-e)/o},mixNumber=(e,s)=>i=>mix(e,s,i);function detectMixerFactory(e){return typeof e=="number"?mixNumber:typeof e=="string"?color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?mixObject:mixNumber}function createMixers(e,s,i){const o=[],a=i||detectMixerFactory(e[0]),c=e.length-1;for(let d=0;d<c;d++){let h=a(e[d],e[d+1]);if(s){const g=Array.isArray(s)?s[d]||noop:s;h=pipe(g,h)}o.push(h)}return o}function interpolate(e,s,{clamp:i=!0,ease:o,mixer:a}={}){const c=e.length;if(invariant(c===s.length),c===1)return()=>s[0];e[0]>e[c-1]&&(e=[...e].reverse(),s=[...s].reverse());const d=createMixers(s,o,a),h=d.length,g=b=>{let j=0;if(h>1)for(;j<e.length-2&&!(b<e[j+1]);j++);const _=progress(e[j],e[j+1],b);return d[j](_)};return i?b=>g(clamp(e[0],e[c-1],b)):g}function fillOffset(e,s){const i=e[e.length-1];for(let o=1;o<=s;o++){const a=progress(0,s,o);e.push(mix(i,1,a))}}function defaultOffset(e){const s=[0];return fillOffset(s,e.length-1),s}function convertOffsetToTimes(e,s){return e.map(i=>i*s)}function defaultEasing(e,s){return e.map(()=>s||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:s,times:i,ease:o="easeInOut"}){const a=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),c={done:!1,value:s[0]},d=convertOffsetToTimes(i&&i.length===s.length?i:defaultOffset(s),e),h=interpolate(d,s,{ease:Array.isArray(a)?a:defaultEasing(s,a)});return{calculatedDuration:e,next:g=>(c.value=h(g),c.done=g>=e,c)}}function velocityPerSecond(e,s){return s?e*(1e3/s):0}const velocitySampleDuration=5;function calcGeneratorVelocity(e,s,i){const o=Math.max(s-velocitySampleDuration,0);return velocityPerSecond(i-e(o),s-o)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:e=800,bounce:s=.25,velocity:i=0,mass:o=1}){let a,c,d=1-s;d=clamp(minDamping,maxDamping,d),e=clamp(minDuration,maxDuration$1,millisecondsToSeconds(e)),d<1?(a=b=>{const j=b*d,_=j*e,$=j-i,et=calcAngularFreq(b,d),tt=Math.exp(-_);return safeMin-$/et*tt},c=b=>{const _=b*d*e,$=_*i+i,et=Math.pow(d,2)*Math.pow(b,2)*e,tt=Math.exp(-_),nt=calcAngularFreq(Math.pow(b,2),d);return(-a(b)+safeMin>0?-1:1)*(($-et)*tt)/nt}):(a=b=>{const j=Math.exp(-b*e),_=(b-i)*e+1;return-safeMin+j*_},c=b=>{const j=Math.exp(-b*e),_=(i-b)*(e*e);return j*_});const h=5/e,g=approximateRoot(a,c,h);if(e=secondsToMilliseconds(e),isNaN(g))return{stiffness:100,damping:10,duration:e};{const b=Math.pow(g,2)*o;return{stiffness:b,damping:d*2*Math.sqrt(o*b),duration:e}}}const rootIterations=12;function approximateRoot(e,s,i){let o=i;for(let a=1;a<rootIterations;a++)o=o-e(o)/s(o);return o}function calcAngularFreq(e,s){return e*Math.sqrt(1-s*s)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,s){return s.some(i=>e[i]!==void 0)}function getSpringOptions(e){let s={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys)){const i=findSpring(e);s={...s,...i,mass:1},s.isResolvedFromDuration=!0}return s}function spring({keyframes:e,restDelta:s,restSpeed:i,...o}){const a=e[0],c=e[e.length-1],d={done:!1,value:a},{stiffness:h,damping:g,mass:b,duration:j,velocity:_,isResolvedFromDuration:$}=getSpringOptions({...o,velocity:-millisecondsToSeconds(o.velocity||0)}),et=_||0,tt=g/(2*Math.sqrt(h*b)),nt=c-a,it=millisecondsToSeconds(Math.sqrt(h/b)),rt=Math.abs(nt)<5;i||(i=rt?.01:2),s||(s=rt?.005:.5);let _e;if(tt<1){const st=calcAngularFreq(it,tt);_e=ot=>{const ut=Math.exp(-tt*it*ot);return c-ut*((et+tt*it*nt)/st*Math.sin(st*ot)+nt*Math.cos(st*ot))}}else if(tt===1)_e=st=>c-Math.exp(-it*st)*(nt+(et+it*nt)*st);else{const st=it*Math.sqrt(tt*tt-1);_e=ot=>{const ut=Math.exp(-tt*it*ot),ht=Math.min(st*ot,300);return c-ut*((et+tt*it*nt)*Math.sinh(ht)+st*nt*Math.cosh(ht))/st}}return{calculatedDuration:$&&j||null,next:st=>{const ot=_e(st);if($)d.done=st>=j;else{let ut=et;st!==0&&(tt<1?ut=calcGeneratorVelocity(_e,st,ot):ut=0);const ht=Math.abs(ut)<=i,dt=Math.abs(c-ot)<=s;d.done=ht&&dt}return d.value=d.done?c:ot,d}}}function inertia({keyframes:e,velocity:s=0,power:i=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:d,min:h,max:g,restDelta:b=.5,restSpeed:j}){const _=e[0],$={done:!1,value:_},et=at=>h!==void 0&&at<h||g!==void 0&&at>g,tt=at=>h===void 0?g:g===void 0||Math.abs(h-at)<Math.abs(g-at)?h:g;let nt=i*s;const it=_+nt,rt=d===void 0?it:d(it);rt!==it&&(nt=rt-_);const _e=at=>-nt*Math.exp(-at/o),st=at=>rt+_e(at),ot=at=>{const ct=_e(at),lt=st(at);$.done=Math.abs(ct)<=b,$.value=$.done?rt:lt};let ut,ht;const dt=at=>{et($.value)&&(ut=at,ht=spring({keyframes:[$.value,tt($.value)],velocity:calcGeneratorVelocity(st,at,$.value),damping:a,stiffness:c,restDelta:b,restSpeed:j}))};return dt(0),{calculatedDuration:null,next:at=>{let ct=!1;return!ht&&ut===void 0&&(ct=!0,ot(at),dt(at)),ut!==void 0&&at>ut?ht.next(at-ut):(!ct&&ot(at),$)}}}const frameloopDriver=e=>{const s=({timestamp:i})=>e(i);return{start:()=>frame.update(s,!0),stop:()=>cancelFrame(s),now:()=>frameData.isProcessing?frameData.timestamp:performance.now()}},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let s=0;const i=50;let o=e.next(s);for(;!o.done&&s<maxGeneratorDuration;)s+=i,o=e.next(s);return s>=maxGeneratorDuration?1/0:s}const types={decay:inertia,inertia,tween:keyframes,keyframes,spring};function animateValue({autoplay:e=!0,delay:s=0,driver:i=frameloopDriver,keyframes:o,type:a="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:h="loop",onPlay:g,onStop:b,onComplete:j,onUpdate:_,...$}){let et=1,tt=!1,nt,it;const rt=()=>{it=new Promise(bt=>{nt=bt})};rt();let _e;const st=types[a]||keyframes;let ot;st!==keyframes&&typeof o[0]!="number"&&(ot=interpolate([0,100],o,{clamp:!1}),o=[0,100]);const ut=st({...$,keyframes:o});let ht;h==="mirror"&&(ht=st({...$,keyframes:[...o].reverse(),velocity:-($.velocity||0)}));let dt="idle",at=null,ct=null,lt=null;ut.calculatedDuration===null&&c&&(ut.calculatedDuration=calcGeneratorDuration(ut));const{calculatedDuration:ft}=ut;let mt=1/0,gt=1/0;ft!==null&&(mt=ft+d,gt=mt*(c+1)-d);let jt=0;const yt=bt=>{if(ct===null)return;et>0&&(ct=Math.min(ct,bt)),et<0&&(ct=Math.min(bt-gt/et,ct)),at!==null?jt=at:jt=Math.round(bt-ct)*et;const Tt=jt-s*(et>=0?1:-1),Ut=et>=0?Tt<0:Tt>gt;jt=Math.max(Tt,0),dt==="finished"&&at===null&&(jt=gt);let Ft=jt,qt=ut;if(c){const Pt=Math.min(jt,gt)/mt;let It=Math.floor(Pt),Vt=Pt%1;!Vt&&Pt>=1&&(Vt=1),Vt===1&&It--,It=Math.min(It,c+1),!!(It%2)&&(h==="reverse"?(Vt=1-Vt,d&&(Vt-=d/mt)):h==="mirror"&&(qt=ht)),Ft=clamp(0,1,Vt)*mt}const Ot=Ut?{done:!1,value:o[0]}:qt.next(Ft);ot&&(Ot.value=ot(Ot.value));let{done:St}=Ot;!Ut&&ft!==null&&(St=et>=0?jt>=gt:jt<=0);const Nt=at===null&&(dt==="finished"||dt==="running"&&St);return _&&_(Ot.value),Nt&&pt(),Ot},vt=()=>{_e&&_e.stop(),_e=void 0},Ct=()=>{dt="idle",vt(),nt(),rt(),ct=lt=null},pt=()=>{dt="finished",j&&j(),vt(),nt()},xt=()=>{if(tt)return;_e||(_e=i(yt));const bt=_e.now();g&&g(),at!==null?ct=bt-at:(!ct||dt==="finished")&&(ct=bt),dt==="finished"&&rt(),lt=ct,at=null,dt="running",_e.start()};e&&xt();const Et={then(bt,Tt){return it.then(bt,Tt)},get time(){return millisecondsToSeconds(jt)},set time(bt){bt=secondsToMilliseconds(bt),jt=bt,at!==null||!_e||et===0?at=bt:ct=_e.now()-bt/et},get duration(){const bt=ut.calculatedDuration===null?calcGeneratorDuration(ut):ut.calculatedDuration;return millisecondsToSeconds(bt)},get speed(){return et},set speed(bt){bt===et||!_e||(et=bt,Et.time=millisecondsToSeconds(jt))},get state(){return dt},play:xt,pause:()=>{dt="paused",at=jt},stop:()=>{tt=!0,dt!=="idle"&&(dt="idle",b&&b(),Ct())},cancel:()=>{lt!==null&&yt(lt),Ct()},complete:()=>{dt="finished"},sample:bt=>(ct=0,yt(bt))};return Et}function memo(e){let s;return()=>(s===void 0&&(s=e()),s)}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),acceleratedValues=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sampleDelta=10,maxDuration=2e4,requiresPregeneratedKeyframes=(e,s)=>s.type==="spring"||e==="backgroundColor"||!isWaapiSupportedEasing(s.ease);function createAcceleratedAnimation(e,s,{onUpdate:i,onComplete:o,...a}){if(!(supportsWaapi()&&acceleratedValues.has(s)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let d=!1,h,g,b=!1;const j=()=>{g=new Promise(st=>{h=st})};j();let{keyframes:_,duration:$=300,ease:et,times:tt}=a;if(requiresPregeneratedKeyframes(s,a)){const st=animateValue({...a,repeat:0,delay:0});let ot={done:!1,value:_[0]};const ut=[];let ht=0;for(;!ot.done&&ht<maxDuration;)ot=st.sample(ht),ut.push(ot.value),ht+=sampleDelta;tt=void 0,_=ut,$=ht-sampleDelta,et="linear"}const nt=animateStyle(e.owner.current,s,_,{...a,duration:$,ease:et,times:tt}),it=()=>{b=!1,nt.cancel()},rt=()=>{b=!0,frame.update(it),h(),j()};return nt.onfinish=()=>{b||(e.set(getFinalKeyframe(_,a)),o&&o(),rt())},{then(st,ot){return g.then(st,ot)},attachTimeline(st){return nt.timeline=st,nt.onfinish=null,noop},get time(){return millisecondsToSeconds(nt.currentTime||0)},set time(st){nt.currentTime=secondsToMilliseconds(st)},get speed(){return nt.playbackRate},set speed(st){nt.playbackRate=st},get duration(){return millisecondsToSeconds($)},play:()=>{d||(nt.play(),cancelFrame(it))},pause:()=>nt.pause(),stop:()=>{if(d=!0,nt.playState==="idle")return;const{currentTime:st}=nt;if(st){const ot=animateValue({...a,autoplay:!1});e.setWithVelocity(ot.sample(st-sampleDelta).value,ot.sample(st).value,sampleDelta)}rt()},complete:()=>{b||nt.finish()},cancel:rt}}function createInstantAnimation({keyframes:e,delay:s,onUpdate:i,onComplete:o}){const a=()=>(i&&i(e[e.length-1]),o&&o(),{time:0,speed:1,duration:0,play:noop,pause:noop,stop:noop,then:c=>(c(),Promise.resolve()),cancel:noop,complete:noop});return s?animateValue({keyframes:[0,1],duration:0,delay:s,onComplete:a}):a()}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:s})=>s.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(s[1]):underDampedSpring:ease,isAnimatable=(e,s)=>e==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(complex.test(s)||s==="0")&&!s.startsWith("url(")),maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[s,i]=e.slice(0,-1).split("(");if(s==="drop-shadow")return e;const[o]=i.match(floatRegex)||[];if(!o)return e;const a=i.replace(o,"");let c=maxDefaults.has(s)?1:0;return o!==i&&(c*=100),s+"("+c+a+")"}const functionRegex=/([a-z-]*)\(.*?\)/g,filter={...complex,getAnimatableNone:e=>{const s=e.match(functionRegex);return s?s.map(applyDefaultFilter).join(" "):e}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,s){let i=getDefaultValueType(e);return i!==filter&&(i=complex),i.getAnimatableNone?i.getAnimatableNone(s):void 0}const isZeroValueString=e=>/^0[^.\s]+$/.test(e);function isNone(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||isZeroValueString(e)}function getKeyframes(e,s,i,o){const a=isAnimatable(s,i);let c;Array.isArray(i)?c=[...i]:c=[null,i];const d=o.from!==void 0?o.from:e.get();let h;const g=[];for(let b=0;b<c.length;b++)c[b]===null&&(c[b]=b===0?d:c[b-1]),isNone(c[b])&&g.push(b),typeof c[b]=="string"&&c[b]!=="none"&&c[b]!=="0"&&(h=c[b]);if(a&&g.length&&h)for(let b=0;b<g.length;b++){const j=g[b];c[j]=getAnimatableNone(s,h)}return c}function isTransitionDefined({when:e,delay:s,delayChildren:i,staggerChildren:o,staggerDirection:a,repeat:c,repeatType:d,repeatDelay:h,from:g,elapsed:b,...j}){return!!Object.keys(j).length}function getValueTransition(e,s){return e[s]||e.default||e}const MotionGlobalConfig={skipAnimations:!1},animateMotionValue=(e,s,i,o={})=>a=>{const c=getValueTransition(o,e)||{},d=c.delay||o.delay||0;let{elapsed:h=0}=o;h=h-secondsToMilliseconds(d);const g=getKeyframes(s,e,i,c),b=g[0],j=g[g.length-1],_=isAnimatable(e,b),$=isAnimatable(e,j);let et={keyframes:g,velocity:s.getVelocity(),ease:"easeOut",...c,delay:-h,onUpdate:tt=>{s.set(tt),c.onUpdate&&c.onUpdate(tt)},onComplete:()=>{a(),c.onComplete&&c.onComplete()}};if(isTransitionDefined(c)||(et={...et,...getDefaultTransition(e,et)}),et.duration&&(et.duration=secondsToMilliseconds(et.duration)),et.repeatDelay&&(et.repeatDelay=secondsToMilliseconds(et.repeatDelay)),!_||!$||instantAnimationState.current||c.type===!1||MotionGlobalConfig.skipAnimations)return createInstantAnimation(et);if(!o.isHandoff&&s.owner&&s.owner.current instanceof HTMLElement&&!s.owner.getProps().onUpdate){const tt=createAcceleratedAnimation(s,e,et);if(tt)return tt}return animateValue(et)};function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}const isNumericalString=e=>/^\-?\d*\.?\d+$/.test(e);function addUniqueItem(e,s){e.indexOf(s)===-1&&e.push(s)}function removeItem(e,s){const i=e.indexOf(s);i>-1&&e.splice(i,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(s){return addUniqueItem(this.subscriptions,s),()=>removeItem(this.subscriptions,s)}notify(s,i,o){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](s,i,o);else for(let c=0;c<a;c++){const d=this.subscriptions[c];d&&d(s,i,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(s,i={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,a=!0)=>{this.prev=this.current,this.current=o;const{delta:c,timestamp:d}=frameData;this.lastUpdated!==d&&(this.timeDelta=c,this.lastUpdated=d,frame.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>frame.postRender(this.velocityCheck),this.velocityCheck=({timestamp:o})=>{o!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=s,this.canTrackVelocity=isFloat(this.current),this.owner=i.owner}onChange(s){return this.on("change",s)}on(s,i){this.events[s]||(this.events[s]=new SubscriptionManager);const o=this.events[s].add(i);return s==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,i){this.passiveEffect=s,this.stopPassiveEffect=i}set(s,i=!0){!i||!this.passiveEffect?this.updateAndNotify(s,i):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,i,o){this.set(i),this.prev=s,this.timeDelta=o}jump(s){this.updateAndNotify(s),this.prev=s,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(s){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=s(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,s){return new MotionValue(e,s)}const testValueType=e=>s=>s.test(e),auto={test:e=>e==="auto",parse:e=>e},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e)),valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e));function setMotionValue(e,s,i){e.hasValue(s)?e.getValue(s).set(i):e.addValue(s,motionValue(i))}function setTarget(e,s){const i=resolveVariant(e,s);let{transitionEnd:o={},transition:a={},...c}=i?e.makeTargetAnimatable(i,!1):{};c={...c,...o};for(const d in c){const h=resolveFinalValueInKeyframes(c[d]);setMotionValue(e,d,h)}}function checkTargetForNewValues(e,s,i){var o,a;const c=Object.keys(s).filter(h=>!e.hasValue(h)),d=c.length;if(d)for(let h=0;h<d;h++){const g=c[h],b=s[g];let j=null;Array.isArray(b)&&(j=b[0]),j===null&&(j=(a=(o=i[g])!==null&&o!==void 0?o:e.readValue(g))!==null&&a!==void 0?a:s[g]),j!=null&&(typeof j=="string"&&(isNumericalString(j)||isZeroValueString(j))?j=parseFloat(j):!findValueType(j)&&complex.test(b)&&(j=getAnimatableNone(g,b)),e.addValue(g,motionValue(j,{owner:e})),i[g]===void 0&&(i[g]=j),j!==null&&e.setBaseTarget(g,j))}}function getOriginFromTransition(e,s){return s?(s[e]||s.default||s).from:void 0}function getOrigin(e,s,i){const o={};for(const a in e){const c=getOriginFromTransition(a,s);if(c!==void 0)o[a]=c;else{const d=i.getValue(a);d&&(o[a]=d.get())}}return o}function shouldBlockAnimation({protectedKeys:e,needsAnimating:s},i){const o=e.hasOwnProperty(i)&&s[i]!==!0;return s[i]=!1,o}function hasKeyframesChanged(e,s){const i=e.get();if(Array.isArray(s)){for(let o=0;o<s.length;o++)if(s[o]!==i)return!0}else return i!==s}function animateTarget(e,s,{delay:i=0,transitionOverride:o,type:a}={}){let{transition:c=e.getDefaultTransition(),transitionEnd:d,...h}=e.makeTargetAnimatable(s);const g=e.getValue("willChange");o&&(c=o);const b=[],j=a&&e.animationState&&e.animationState.getState()[a];for(const _ in h){const $=e.getValue(_),et=h[_];if(!$||et===void 0||j&&shouldBlockAnimation(j,_))continue;const tt={delay:i,elapsed:0,...getValueTransition(c||{},_)};if(window.HandoffAppearAnimations){const rt=e.getProps()[optimizedAppearDataAttribute];if(rt){const _e=window.HandoffAppearAnimations(rt,_,$,frame);_e!==null&&(tt.elapsed=_e,tt.isHandoff=!0)}}let nt=!tt.isHandoff&&!hasKeyframesChanged($,et);if(tt.type==="spring"&&($.getVelocity()||tt.velocity)&&(nt=!1),$.animation&&(nt=!1),nt)continue;$.start(animateMotionValue(_,$,et,e.shouldReduceMotion&&transformProps.has(_)?{type:!1}:tt));const it=$.animation;isWillChangeMotionValue(g)&&(g.add(_),it.then(()=>g.remove(_))),b.push(it)}return d&&Promise.all(b).then(()=>{d&&setTarget(e,d)}),b}function animateVariant(e,s,i={}){const o=resolveVariant(e,s,i.custom);let{transition:a=e.getDefaultTransition()||{}}=o||{};i.transitionOverride&&(a=i.transitionOverride);const c=o?()=>Promise.all(animateTarget(e,o,i)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(g=0)=>{const{delayChildren:b=0,staggerChildren:j,staggerDirection:_}=a;return animateChildren(e,s,b+g,j,_,i)}:()=>Promise.resolve(),{when:h}=a;if(h){const[g,b]=h==="beforeChildren"?[c,d]:[d,c];return g().then(()=>b())}else return Promise.all([c(),d(i.delay)])}function animateChildren(e,s,i=0,o=0,a=1,c){const d=[],h=(e.variantChildren.size-1)*o,g=a===1?(b=0)=>b*o:(b=0)=>h-b*o;return Array.from(e.variantChildren).sort(sortByTreeOrder).forEach((b,j)=>{b.notify("AnimationStart",s),d.push(animateVariant(b,s,{...c,delay:i+g(j)}).then(()=>b.notify("AnimationComplete",s)))}),Promise.all(d)}function sortByTreeOrder(e,s){return e.sortNodePosition(s)}function animateVisualElement(e,s,i={}){e.notify("AnimationStart",s);let o;if(Array.isArray(s)){const a=s.map(c=>animateVariant(e,c,i));o=Promise.all(a)}else if(typeof s=="string")o=animateVariant(e,s,i);else{const a=typeof s=="function"?resolveVariant(e,s,i.custom):s;o=Promise.all(animateTarget(e,a,i))}return o.then(()=>e.notify("AnimationComplete",s))}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return s=>Promise.all(s.map(({animation:i,options:o})=>animateVisualElement(e,i,o)))}function createAnimationState(e){let s=animateList(e);const i=createState();let o=!0;const a=(g,b)=>{const j=resolveVariant(e,b);if(j){const{transition:_,transitionEnd:$,...et}=j;g={...g,...et,...$}}return g};function c(g){s=g(e)}function d(g,b){const j=e.getProps(),_=e.getVariantContext(!0)||{},$=[],et=new Set;let tt={},nt=1/0;for(let rt=0;rt<numAnimationTypes;rt++){const _e=reversePriorityOrder[rt],st=i[_e],ot=j[_e]!==void 0?j[_e]:_[_e],ut=isVariantLabel(ot),ht=_e===b?st.isActive:null;ht===!1&&(nt=rt);let dt=ot===_[_e]&&ot!==j[_e]&&ut;if(dt&&o&&e.manuallyAnimateOnMount&&(dt=!1),st.protectedKeys={...tt},!st.isActive&&ht===null||!ot&&!st.prevProp||isAnimationControls(ot)||typeof ot=="boolean")continue;let ct=checkVariantsDidChange(st.prevProp,ot)||_e===b&&st.isActive&&!dt&&ut||rt>nt&&ut,lt=!1;const ft=Array.isArray(ot)?ot:[ot];let mt=ft.reduce(a,{});ht===!1&&(mt={});const{prevResolvedValues:gt={}}=st,jt={...gt,...mt},yt=vt=>{ct=!0,et.has(vt)&&(lt=!0,et.delete(vt)),st.needsAnimating[vt]=!0};for(const vt in jt){const Ct=mt[vt],pt=gt[vt];if(tt.hasOwnProperty(vt))continue;let xt=!1;isKeyframesTarget(Ct)&&isKeyframesTarget(pt)?xt=!shallowCompare(Ct,pt):xt=Ct!==pt,xt?Ct!==void 0?yt(vt):et.add(vt):Ct!==void 0&&et.has(vt)?yt(vt):st.protectedKeys[vt]=!0}st.prevProp=ot,st.prevResolvedValues=mt,st.isActive&&(tt={...tt,...mt}),o&&e.blockInitialAnimation&&(ct=!1),ct&&(!dt||lt)&&$.push(...ft.map(vt=>({animation:vt,options:{type:_e,...g}})))}if(et.size){const rt={};et.forEach(_e=>{const st=e.getBaseTarget(_e);st!==void 0&&(rt[_e]=st)}),$.push({animation:rt})}let it=!!$.length;return o&&(j.initial===!1||j.initial===j.animate)&&!e.manuallyAnimateOnMount&&(it=!1),o=!1,it?s($):Promise.resolve()}function h(g,b,j){var _;if(i[g].isActive===b)return Promise.resolve();(_=e.variantChildren)===null||_===void 0||_.forEach(et=>{var tt;return(tt=et.animationState)===null||tt===void 0?void 0:tt.setActive(g,b)}),i[g].isActive=b;const $=d(j,g);for(const et in i)i[et].protectedKeys={};return $}return{animateChanges:d,setActive:h,setAnimateFunction:c,getState:()=>i}}function checkVariantsDidChange(e,s){return typeof s=="string"?s!==e:Array.isArray(s)?!shallowCompare(s,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class AnimationFeature extends Feature{constructor(s){super(s),s.animationState||(s.animationState=createAnimationState(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();this.unmount(),isAnimationControls(s)&&(this.unmount=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:i}=this.node.prevProps||{};s!==i&&this.updateAnimationControlsSubscription()}unmount(){}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:i,custom:o}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===a)return;const c=this.node.animationState.setActive("exit",!s,{custom:o??this.node.getProps().custom});i&&!s&&c.then(()=>i(this.id))}mount(){const{register:s}=this.node.presenceContext||{};s&&(this.unmount=s(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},distance=(e,s)=>Math.abs(e-s);function distance2D(e,s){const i=distance(e.x,s.x),o=distance(e.y,s.y);return Math.sqrt(i**2+o**2)}class PanSession{constructor(s,i,{transformPagePoint:o,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=getPanInfo(this.lastMoveEventInfo,this.history),$=this.startEvent!==null,et=distance2D(_.offset,{x:0,y:0})>=3;if(!$&&!et)return;const{point:tt}=_,{timestamp:nt}=frameData;this.history.push({...tt,timestamp:nt});const{onStart:it,onMove:rt}=this.handlers;$||(it&&it(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),rt&&rt(this.lastMoveEvent,_)},this.handlePointerMove=(_,$)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=transformPoint($,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(_,$)=>{this.end();const{onEnd:et,onSessionEnd:tt,resumeAnimation:nt}=this.handlers;if(this.dragSnapToOrigin&&nt&&nt(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const it=getPanInfo(_.type==="pointercancel"?this.lastMoveEventInfo:transformPoint($,this.transformPagePoint),this.history);this.startEvent&&et&&et(_,it),tt&&tt(_,it)},!isPrimaryPointer(s))return;this.dragSnapToOrigin=c,this.handlers=i,this.transformPagePoint=o,this.contextWindow=a||window;const d=extractEventInfo(s),h=transformPoint(d,this.transformPagePoint),{point:g}=h,{timestamp:b}=frameData;this.history=[{...g,timestamp:b}];const{onSessionStart:j}=i;j&&j(s,getPanInfo(h,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,s){return s?{point:s(e.point)}:e}function subtractPoint(e,s){return{x:e.x-s.x,y:e.y-s.y}}function getPanInfo({point:e},s){return{point:e,delta:subtractPoint(e,lastDevicePoint(s)),offset:subtractPoint(e,startDevicePoint(s)),velocity:getVelocity(s,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,s){if(e.length<2)return{x:0,y:0};let i=e.length-1,o=null;const a=lastDevicePoint(e);for(;i>=0&&(o=e[i],!(a.timestamp-o.timestamp>secondsToMilliseconds(s)));)i--;if(!o)return{x:0,y:0};const c=millisecondsToSeconds(a.timestamp-o.timestamp);if(c===0)return{x:0,y:0};const d={x:(a.x-o.x)/c,y:(a.y-o.y)/c};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function calcLength(e){return e.max-e.min}function isNear(e,s=0,i=.01){return Math.abs(e-s)<=i}function calcAxisDelta(e,s,i,o=.5){e.origin=o,e.originPoint=mix(s.min,s.max,e.origin),e.scale=calcLength(i)/calcLength(s),(isNear(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=mix(i.min,i.max,e.origin)-e.originPoint,(isNear(e.translate)||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,s,i,o){calcAxisDelta(e.x,s.x,i.x,o?o.originX:void 0),calcAxisDelta(e.y,s.y,i.y,o?o.originY:void 0)}function calcRelativeAxis(e,s,i){e.min=i.min+s.min,e.max=e.min+calcLength(s)}function calcRelativeBox(e,s,i){calcRelativeAxis(e.x,s.x,i.x),calcRelativeAxis(e.y,s.y,i.y)}function calcRelativeAxisPosition(e,s,i){e.min=s.min-i.min,e.max=e.min+calcLength(s)}function calcRelativePosition(e,s,i){calcRelativeAxisPosition(e.x,s.x,i.x),calcRelativeAxisPosition(e.y,s.y,i.y)}function applyConstraints(e,{min:s,max:i},o){return s!==void 0&&e<s?e=o?mix(s,e,o.min):Math.max(e,s):i!==void 0&&e>i&&(e=o?mix(i,e,o.max):Math.min(e,i)),e}function calcRelativeAxisConstraints(e,s,i){return{min:s!==void 0?e.min+s:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:s,left:i,bottom:o,right:a}){return{x:calcRelativeAxisConstraints(e.x,i,a),y:calcRelativeAxisConstraints(e.y,s,o)}}function calcViewportAxisConstraints(e,s){let i=s.min-e.min,o=s.max-e.max;return s.max-s.min<e.max-e.min&&([i,o]=[o,i]),{min:i,max:o}}function calcViewportConstraints(e,s){return{x:calcViewportAxisConstraints(e.x,s.x),y:calcViewportAxisConstraints(e.y,s.y)}}function calcOrigin(e,s){let i=.5;const o=calcLength(e),a=calcLength(s);return a>o?i=progress(s.min,s.max-o,e.min):o>a&&(i=progress(e.min,e.max-a,s.min)),clamp(0,1,i)}function rebaseAxisConstraints(e,s){const i={};return s.min!==void 0&&(i.min=s.min-e.min),s.max!==void 0&&(i.max=s.max-e.min),i}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,s,i){return{min:resolvePointElastic(e,s),max:resolvePointElastic(e,i)}}function resolvePointElastic(e,s){return typeof e=="number"?e:e[s]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(e){return[e("x"),e("y")]}function convertBoundingBoxToBox({top:e,left:s,right:i,bottom:o}){return{x:{min:s,max:i},y:{min:e,max:o}}}function convertBoxToBoundingBox({x:e,y:s}){return{top:s.min,right:e.max,bottom:s.max,left:e.min}}function transformBoxPoints(e,s){if(!s)return e;const i=s({x:e.left,y:e.top}),o=s({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:o.y,right:o.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:s,scaleY:i}){return!isIdentityScale(e)||!isIdentityScale(s)||!isIdentityScale(i)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,s,i){const o=e-i,a=s*o;return i+a}function applyPointDelta(e,s,i,o,a){return a!==void 0&&(e=scalePoint(e,a,o)),scalePoint(e,i,o)+s}function applyAxisDelta(e,s=0,i=1,o,a){e.min=applyPointDelta(e.min,s,i,o,a),e.max=applyPointDelta(e.max,s,i,o,a)}function applyBoxDelta(e,{x:s,y:i}){applyAxisDelta(e.x,s.translate,s.scale,s.originPoint),applyAxisDelta(e.y,i.translate,i.scale,i.originPoint)}function applyTreeDeltas(e,s,i,o=!1){const a=i.length;if(!a)return;s.x=s.y=1;let c,d;for(let h=0;h<a;h++){c=i[h],d=c.projectionDelta;const g=c.instance;g&&g.style&&g.style.display==="contents"||(o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&transformBox(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),d&&(s.x*=d.x.scale,s.y*=d.y.scale,applyBoxDelta(e,d)),o&&hasTransform(c.latestValues)&&transformBox(e,c.latestValues))}s.x=snapToDefault(s.x),s.y=snapToDefault(s.y)}function snapToDefault(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function translateAxis(e,s){e.min=e.min+s,e.max=e.max+s}function transformAxis(e,s,[i,o,a]){const c=s[a]!==void 0?s[a]:.5,d=mix(e.min,e.max,c);applyAxisDelta(e,s[i],s[o],d,s.scale)}const xKeys$1=["x","scaleX","originX"],yKeys$1=["y","scaleY","originY"];function transformBox(e,s){transformAxis(e.x,s,xKeys$1),transformAxis(e.y,s,yKeys$1)}function measureViewportBox(e,s){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),s))}function measurePageBox(e,s,i){const o=measureViewportBox(e,i),{scroll:a}=s;return a&&(translateAxis(o.x,a.offset.x),translateAxis(o.y,a.offset.y)),o}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(s){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=s}start(s,{snapToCursor:i=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const a=j=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(extractEventInfo(j,"page").point)},c=(j,_)=>{const{drag:$,dragPropagation:et,onDragStart:tt}=this.getProps();if($&&!et&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock($),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(it=>{let rt=this.getAxisMotionValue(it).get()||0;if(percent.test(rt)){const{projection:_e}=this.visualElement;if(_e&&_e.layout){const st=_e.layout.layoutBox[it];st&&(rt=calcLength(st)*(parseFloat(rt)/100))}}this.originPoint[it]=rt}),tt&&frame.update(()=>tt(j,_),!1,!0);const{animationState:nt}=this.visualElement;nt&&nt.setActive("whileDrag",!0)},d=(j,_)=>{const{dragPropagation:$,dragDirectionLock:et,onDirectionLock:tt,onDrag:nt}=this.getProps();if(!$&&!this.openGlobalLock)return;const{offset:it}=_;if(et&&this.currentDirection===null){this.currentDirection=getCurrentDirection(it),this.currentDirection!==null&&tt&&tt(this.currentDirection);return}this.updateAxis("x",_.point,it),this.updateAxis("y",_.point,it),this.visualElement.render(),nt&&nt(j,_)},h=(j,_)=>this.stop(j,_),g=()=>eachAxis(j=>{var _;return this.getAnimationState(j)==="paused"&&((_=this.getAxisMotionValue(j).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:b}=this.getProps();this.panSession=new PanSession(s,{onSessionStart:a,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:b,contextWindow:getContextWindow(this.visualElement)})}stop(s,i){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&frame.update(()=>c(s,i))}cancel(){this.isDragging=!1;const{projection:s,animationState:i}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(s,i,o){const{drag:a}=this.getProps();if(!o||!shouldDrag(s,a,this.currentDirection))return;const c=this.getAxisMotionValue(s);let d=this.originPoint[s]+o[s];this.constraints&&this.constraints[s]&&(d=applyConstraints(d,this.constraints[s],this.elastic[s])),c.set(d)}resolveConstraints(){var s;const{dragConstraints:i,dragElastic:o}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)===null||s===void 0?void 0:s.layout,c=this.constraints;i&&isRefObject(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&a?this.constraints=calcRelativeConstraints(a.layoutBox,i):this.constraints=!1,this.elastic=resolveDragElastic(o),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(d=>{this.getAxisMotionValue(d)&&(this.constraints[d]=rebaseAxisConstraints(a.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:i}=this.getProps();if(!s||!isRefObject(s))return!1;const o=s.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=measurePageBox(o,a.root,this.visualElement.getTransformPagePoint());let d=calcViewportConstraints(a.layout.layoutBox,c);if(i){const h=i(convertBoxToBoundingBox(d));this.hasMutatedConstraints=!!h,h&&(d=convertBoundingBoxToBox(h))}return d}startAnimation(s){const{drag:i,dragMomentum:o,dragElastic:a,dragTransition:c,dragSnapToOrigin:d,onDragTransitionEnd:h}=this.getProps(),g=this.constraints||{},b=eachAxis(j=>{if(!shouldDrag(j,i,this.currentDirection))return;let _=g&&g[j]||{};d&&(_={min:0,max:0});const $=a?200:1e6,et=a?40:1e7,tt={type:"inertia",velocity:o?s[j]:0,bounceStiffness:$,bounceDamping:et,timeConstant:750,restDelta:1,restSpeed:10,...c,..._};return this.startAxisValueAnimation(j,tt)});return Promise.all(b).then(h)}startAxisValueAnimation(s,i){const o=this.getAxisMotionValue(s);return o.start(animateMotionValue(s,o,0,i))}stopAnimation(){eachAxis(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){eachAxis(s=>{var i;return(i=this.getAxisMotionValue(s).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(s){var i;return(i=this.getAxisMotionValue(s).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(s){const i="_drag"+s.toUpperCase(),o=this.visualElement.getProps(),a=o[i];return a||this.visualElement.getValue(s,(o.initial?o.initial[s]:void 0)||0)}snapToCursor(s){eachAxis(i=>{const{drag:o}=this.getProps();if(!shouldDrag(i,o,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(i);if(a&&a.layout){const{min:d,max:h}=a.layout.layoutBox[i];c.set(s[i]-mix(d,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:i}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(i)||!o||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};eachAxis(d=>{const h=this.getAxisMotionValue(d);if(h){const g=h.get();a[d]=calcOrigin({min:g,max:g},this.constraints[d])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(d=>{if(!shouldDrag(d,s,null))return;const h=this.getAxisMotionValue(d),{min:g,max:b}=this.constraints[d];h.set(mix(g,b,a[d]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const s=this.visualElement.current,i=addPointerEvent(s,"pointerdown",g=>{const{drag:b,dragListener:j=!0}=this.getProps();b&&j&&this.start(g)}),o=()=>{const{dragConstraints:g}=this.getProps();isRefObject(g)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",o);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),o();const d=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:g,hasLayoutChanged:b})=>{this.isDragging&&b&&(eachAxis(j=>{const _=this.getAxisMotionValue(j);_&&(this.originPoint[j]+=g[j].translate,_.set(_.get()+g[j].translate))}),this.visualElement.render())});return()=>{d(),i(),c(),h&&h()}}getProps(){const s=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:o=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:d=defaultElastic,dragMomentum:h=!0}=s;return{...s,drag:i,dragDirectionLock:o,dragPropagation:a,dragConstraints:c,dragElastic:d,dragMomentum:h}}}function shouldDrag(e,s,i){return(s===!0||s===e)&&(i===null||i===e)}function getCurrentDirection(e,s=10){let i=null;return Math.abs(e.y)>s?i="y":Math.abs(e.x)>s&&(i="x"),i}class DragGesture extends Feature{constructor(s){super(s),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(s,i)=>{e&&frame.update(()=>e(s,i))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(s){this.session=new PanSession(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:i,onPan:o,onPanEnd:a}=this.node.getProps();return{onSessionStart:asyncHandler(s),onStart:asyncHandler(i),onMove:o,onEnd:(c,d)=>{delete this.session,a&&frame.update(()=>a(c,d))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function usePresence(){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:i,register:o}=e,a=reactExports.useId();return reactExports.useEffect(()=>o(a),[]),!s&&i?[!1,()=>i&&i(a)]:[!0]}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,s){return s.max===s.min?0:e/(s.max-s.min)*100}const correctBorderRadius={correct:(e,s)=>{if(!s.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const i=pixelsToPercent(e,s.target.x),o=pixelsToPercent(e,s.target.y);return`${i}% ${o}%`}},correctBoxShadow={correct:(e,{treeScale:s,projectionDelta:i})=>{const o=e,a=complex.parse(e);if(a.length>5)return o;const c=complex.createTransformer(e),d=typeof a[0]!="number"?1:0,h=i.x.scale*s.x,g=i.y.scale*s.y;a[0+d]/=h,a[1+d]/=g;const b=mix(h,g,.5);return typeof a[2+d]=="number"&&(a[2+d]/=b),typeof a[3+d]=="number"&&(a[3+d]/=b),c(a)}};class MeasureLayoutWithContext extends React.Component{componentDidMount(){const{visualElement:s,layoutGroup:i,switchLayoutGroup:o,layoutId:a}=this.props,{projection:c}=s;addScaleCorrector(defaultScaleCorrectors),c&&(i.group&&i.group.add(c),o&&o.register&&a&&o.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:i,visualElement:o,drag:a,isPresent:c}=this.props,d=o.projection;return d&&(d.isPresent=c,a||s.layoutDependency!==i||i===void 0?d.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?d.promote():d.relegate()||frame.postRender(()=>{const h=d.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),queueMicrotask(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:i,switchLayoutGroup:o}=this.props,{projection:a}=s;a&&(a.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(a),o&&o.deregister&&o.deregister(a))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function MeasureLayout(e){const[s,i]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return React.createElement(MeasureLayoutWithContext,{...e,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:s,safeToRemove:i})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,s,i,o,a,c){a?(e.opacity=mix(0,i.opacity!==void 0?i.opacity:1,easeCrossfadeIn(o)),e.opacityExit=mix(s.opacity!==void 0?s.opacity:1,0,easeCrossfadeOut(o))):c&&(e.opacity=mix(s.opacity!==void 0?s.opacity:1,i.opacity!==void 0?i.opacity:1,o));for(let d=0;d<numBorders;d++){const h=`border${borders[d]}Radius`;let g=getRadius(s,h),b=getRadius(i,h);if(g===void 0&&b===void 0)continue;g||(g=0),b||(b=0),g===0||b===0||isPx(g)===isPx(b)?(e[h]=Math.max(mix(asNumber(g),asNumber(b),o),0),(percent.test(b)||percent.test(g))&&(e[h]+="%")):e[h]=b}(s.rotate||i.rotate)&&(e.rotate=mix(s.rotate||0,i.rotate||0,o))}function getRadius(e,s){return e[s]!==void 0?e[s]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(e,s,i){return o=>o<e?0:o>s?1:i(progress(e,s,o))}function copyAxisInto(e,s){e.min=s.min,e.max=s.max}function copyBoxInto(e,s){copyAxisInto(e.x,s.x),copyAxisInto(e.y,s.y)}function removePointDelta(e,s,i,o,a){return e-=s,e=scalePoint(e,1/i,o),a!==void 0&&(e=scalePoint(e,1/a,o)),e}function removeAxisDelta(e,s=0,i=1,o=.5,a,c=e,d=e){if(percent.test(s)&&(s=parseFloat(s),s=mix(d.min,d.max,s/100)-d.min),typeof s!="number")return;let h=mix(c.min,c.max,o);e===c&&(h-=s),e.min=removePointDelta(e.min,s,i,h,a),e.max=removePointDelta(e.max,s,i,h,a)}function removeAxisTransforms(e,s,[i,o,a],c,d){removeAxisDelta(e,s[i],s[o],s[a],s.scale,c,d)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,s,i,o){removeAxisTransforms(e.x,s,xKeys,i?i.x:void 0,o?o.x:void 0),removeAxisTransforms(e.y,s,yKeys,i?i.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function boxEquals(e,s){return e.x.min===s.x.min&&e.x.max===s.x.max&&e.y.min===s.y.min&&e.y.max===s.y.max}function boxEqualsRounded(e,s){return Math.round(e.x.min)===Math.round(s.x.min)&&Math.round(e.x.max)===Math.round(s.x.max)&&Math.round(e.y.min)===Math.round(s.y.min)&&Math.round(e.y.max)===Math.round(s.y.max)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}class NodeStack{constructor(){this.members=[]}add(s){addUniqueItem(this.members,s),s.scheduleRender()}remove(s){if(removeItem(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(s){const i=this.members.findIndex(a=>s===a);if(i===0)return!1;let o;for(let a=i;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){o=c;break}}return o?(this.promote(o),!0):!1}promote(s,i){const o=this.lead;if(s!==o&&(this.prevLead=o,this.lead=s,s.show(),o)){o.instance&&o.scheduleRender(),s.scheduleRender(),s.resumeFrom=o,i&&(s.resumeFrom.preserveOpacity=!0),o.snapshot&&(s.snapshot=o.snapshot,s.snapshot.latestValues=o.animationValues||o.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:a}=s.options;a===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:i,resumingFrom:o}=s;i.onExitComplete&&i.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,s,i){let o="";const a=e.x.translate/s.x,c=e.y.translate/s.y;if((a||c)&&(o=`translate3d(${a}px, ${c}px, 0) `),(s.x!==1||s.y!==1)&&(o+=`scale(${1/s.x}, ${1/s.y}) `),i){const{rotate:g,rotateX:b,rotateY:j}=i;g&&(o+=`rotate(${g}deg) `),b&&(o+=`rotateX(${b}deg) `),j&&(o+=`rotateY(${j}deg) `)}const d=e.x.scale*s.x,h=e.y.scale*s.y;return(d!==1||h!==1)&&(o+=`scale(${d}, ${h})`),o||"none"}const compareByDepth=(e,s)=>e.depth-s.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(s){addUniqueItem(this.children,s),this.isDirty=!0}remove(s){removeItem(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(s)}}function delay(e,s){const i=performance.now(),o=({timestamp:a})=>{const c=a-i;c>=s&&(cancelFrame(o),e(c-s))};return frame.read(o,!0),()=>cancelFrame(o)}function record(e){window.MotionDebug&&window.MotionDebug.record(e)}function isSVGElement(e){return e instanceof SVGElement&&e.tagName!=="svg"}function animateSingleValue(e,s,i){const o=isMotionValue(e)?e:motionValue(e);return o.start(animateMotionValue("",o,s,i)),o.animation}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;const projectionFrameData={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function createProjectionNode({attachResizeListener:e,defaultParent:s,measureScroll:i,checkIsScrollRoot:o,resetTransform:a}){return class{constructor(d={},h=s==null?void 0:s()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,projectionFrameData.totalNodes=projectionFrameData.resolvedTargetDeltas=projectionFrameData.recalculatedProjection=0,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),record(projectionFrameData)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(d,h){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new SubscriptionManager),this.eventHandlers.get(d).add(h)}notifyListeners(d,...h){const g=this.eventHandlers.get(d);g&&g.notify(...h)}hasListeners(d){return this.eventHandlers.has(d)}mount(d,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(d),this.instance=d;const{layoutId:g,layout:b,visualElement:j}=this.options;if(j&&!j.current&&j.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(b||g)&&(this.isLayoutDirty=!0),e){let _;const $=()=>this.root.updateBlockedByResize=!1;e(d,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=delay($,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&j&&(g||b)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:$,hasRelativeTargetChanged:et,layout:tt})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const nt=this.options.transition||j.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:it,onLayoutAnimationComplete:rt}=j.getProps(),_e=!this.targetLayout||!boxEqualsRounded(this.targetLayout,tt)||et,st=!$&&et;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||st||$&&(_e||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,st);const ot={...getValueTransition(nt,"layout"),onPlay:it,onComplete:rt};(j.shouldReduceMotion||this.options.layoutRoot)&&(ot.delay=0,ot.type=!1),this.startAnimation(ot)}else $||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=tt})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetRotation),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let j=0;j<this.path.length;j++){const _=this.path[j];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:g}=this.options;if(h===void 0&&!g)return;const b=this.getTransformTemplate();this.prevTransformTemplateValue=b?b(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const h=performance.now();frameData.delta=clamp(0,1e3/60,h-frameData.timestamp),frameData.timestamp=h,frameData.isProcessing=!0,steps.update.process(frameData),steps.preRender.process(frameData),steps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:d,isRoot:o(this.instance),offset:i(this.instance)})}resetTransform(){if(!a)return;const d=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!isDeltaZero(this.projectionDelta),g=this.getTransformTemplate(),b=g?g(this.latestValues,""):void 0,j=b!==this.prevTransformTemplateValue;d&&(h||hasTransform(this.latestValues)||j)&&(a(this.instance,b),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const h=this.measurePageBox();let g=this.removeElementScroll(h);return d&&(g=this.removeTransform(g)),roundBox(g),{animationId:this.root.animationId,measuredBox:h,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return createBox();const h=d.measureViewportBox(),{scroll:g}=this.root;return g&&(translateAxis(h.x,g.offset.x),translateAxis(h.y,g.offset.y)),h}removeElementScroll(d){const h=createBox();copyBoxInto(h,d);for(let g=0;g<this.path.length;g++){const b=this.path[g],{scroll:j,options:_}=b;if(b!==this.root&&j&&_.layoutScroll){if(j.isRoot){copyBoxInto(h,d);const{scroll:$}=this.root;$&&(translateAxis(h.x,-$.offset.x),translateAxis(h.y,-$.offset.y))}translateAxis(h.x,j.offset.x),translateAxis(h.y,j.offset.y)}}return h}applyTransform(d,h=!1){const g=createBox();copyBoxInto(g,d);for(let b=0;b<this.path.length;b++){const j=this.path[b];!h&&j.options.layoutScroll&&j.scroll&&j!==j.root&&transformBox(g,{x:-j.scroll.offset.x,y:-j.scroll.offset.y}),hasTransform(j.latestValues)&&transformBox(g,j.latestValues)}return hasTransform(this.latestValues)&&transformBox(g,this.latestValues),g}removeTransform(d){const h=createBox();copyBoxInto(h,d);for(let g=0;g<this.path.length;g++){const b=this.path[g];if(!b.instance||!hasTransform(b.latestValues))continue;hasScale(b.latestValues)&&b.updateSnapshot();const j=createBox(),_=b.measurePageBox();copyBoxInto(j,_),removeBoxTransforms(h,b.latestValues,b.snapshot?b.snapshot.layoutBox:void 0,j)}return hasTransform(this.latestValues)&&removeBoxTransforms(h,this.latestValues),h}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var h;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const b=!!this.resumingFrom||this!==g;if(!(d||b&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:_,layoutId:$}=this.options;if(!(!this.layout||!(_||$))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const et=this.getClosestProjectingParent();et&&et.layout&&this.animationProgress!==1?(this.relativeParent=et,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,et.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const et=this.getClosestProjectingParent();et&&!!et.resumingFrom==!!this.resumingFrom&&!et.options.layoutScroll&&et.target&&this.animationProgress!==1?(this.relativeParent=et,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,et.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}projectionFrameData.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var d;const h=this.getLead(),g=!!this.resumingFrom||this!==h;let b=!0;if((this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty)&&(b=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(b=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(b=!1),b)return;const{layout:j,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(j||_))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const $=this.treeScale.x,et=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,g),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:tt}=h;if(!tt){this.projectionTransform&&(this.projectionDelta=createDelta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta());const nt=this.projectionTransform;calcBoxDelta(this.projectionDelta,this.layoutCorrected,tt,this.latestValues),this.projectionTransform=buildProjectionTransform(this.projectionDelta,this.treeScale),(this.projectionTransform!==nt||this.treeScale.x!==$||this.treeScale.y!==et)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",tt)),projectionFrameData.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),d){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(d,h=!1){const g=this.snapshot,b=g?g.latestValues:{},j={...this.latestValues},_=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const $=createBox(),et=g?g.source:void 0,tt=this.layout?this.layout.source:void 0,nt=et!==tt,it=this.getStack(),rt=!it||it.members.length<=1,_e=!!(nt&&!rt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let st;this.mixTargetDelta=ot=>{const ut=ot/1e3;mixAxisDelta(_.x,d.x,ut),mixAxisDelta(_.y,d.y,ut),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition($,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,$,ut),st&&boxEquals(this.relativeTarget,st)&&(this.isProjectionDirty=!1),st||(st=createBox()),copyBoxInto(st,this.relativeTarget)),nt&&(this.animationValues=j,mixValues(j,b,this.latestValues,ut,_e,rt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ut},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...d,onUpdate:h=>{this.mixTargetDelta(h),d.onUpdate&&d.onUpdate(h)},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:h,target:g,layout:b,latestValues:j}=d;if(!(!h||!g||!b)){if(this!==d&&this.layout&&b&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,b.layoutBox)){g=this.target||createBox();const _=calcLength(this.layout.layoutBox.x);g.x.min=d.target.x.min,g.x.max=g.x.min+_;const $=calcLength(this.layout.layoutBox.y);g.y.min=d.target.y.min,g.y.max=g.y.min+$}copyBoxInto(h,g),transformBox(h,j),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,h,j)}}registerSharedNode(d,h){this.sharedNodes.has(d)||this.sharedNodes.set(d,new NodeStack),this.sharedNodes.get(d).add(h);const b=h.options.initialPromotionConfig;h.promote({transition:b?b.transition:void 0,preserveFollowOpacity:b&&b.shouldPreserveFollowOpacity?b.shouldPreserveFollowOpacity(h):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var d;const{layoutId:h}=this.options;return h?((d=this.getStack())===null||d===void 0?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:h}=this.options;return h?(d=this.getStack())===null||d===void 0?void 0:d.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:h,preserveFollowOpacity:g}={}){const b=this.getStack();b&&b.promote(this,g),d&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetRotation(){const{visualElement:d}=this.options;if(!d)return;let h=!1;const{latestValues:g}=d;if((g.rotate||g.rotateX||g.rotateY||g.rotateZ)&&(h=!0),!h)return;const b={};for(let j=0;j<transformAxes.length;j++){const _="rotate"+transformAxes[j];g[_]&&(b[_]=g[_],d.setStaticValue(_,0))}d.render();for(const j in b)d.setStaticValue(j,b[j]);d.scheduleRender()}getProjectionStyles(d){var h,g;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const b={visibility:""},j=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,b.opacity="",b.pointerEvents=resolveMotionValue(d==null?void 0:d.pointerEvents)||"",b.transform=j?j(this.latestValues,""):"none",b;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const nt={};return this.options.layoutId&&(nt.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,nt.pointerEvents=resolveMotionValue(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(nt.transform=j?j({},""):"none",this.hasProjected=!1),nt}const $=_.animationValues||_.latestValues;this.applyTransformsToTarget(),b.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,$),j&&(b.transform=j($,b.transform));const{x:et,y:tt}=this.projectionDelta;b.transformOrigin=`${et.origin*100}% ${tt.origin*100}% 0`,_.animationValues?b.opacity=_===this?(g=(h=$.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&g!==void 0?g:1:this.preserveOpacity?this.latestValues.opacity:$.opacityExit:b.opacity=_===this?$.opacity!==void 0?$.opacity:"":$.opacityExit!==void 0?$.opacityExit:0;for(const nt in scaleCorrectors){if($[nt]===void 0)continue;const{correct:it,applyTo:rt}=scaleCorrectors[nt],_e=b.transform==="none"?$[nt]:it($[nt],_);if(rt){const st=rt.length;for(let ot=0;ot<st;ot++)b[rt[ot]]=_e}else b[nt]=_e}return this.options.layoutId&&(b.pointerEvents=_===this?resolveMotionValue(d==null?void 0:d.pointerEvents)||"":"none"),b}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var h;return(h=d.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var s;const i=((s=e.resumeFrom)===null||s===void 0?void 0:s.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:a}=e.layout,{animationType:c}=e.options,d=i.source!==e.layout.source;c==="size"?eachAxis(_=>{const $=d?i.measuredBox[_]:i.layoutBox[_],et=calcLength($);$.min=o[_].min,$.max=$.min+et}):shouldAnimatePositionOnly(c,i.layoutBox,o)&&eachAxis(_=>{const $=d?i.measuredBox[_]:i.layoutBox[_],et=calcLength(o[_]);$.max=$.min+et,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[_].max=e.relativeTarget[_].min+et)});const h=createDelta();calcBoxDelta(h,o,i.layoutBox);const g=createDelta();d?calcBoxDelta(g,e.applyTransform(a,!0),i.measuredBox):calcBoxDelta(g,o,i.layoutBox);const b=!isDeltaZero(h);let j=!1;if(!e.resumeFrom){const _=e.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:$,layout:et}=_;if($&&et){const tt=createBox();calcRelativePosition(tt,i.layoutBox,$.layoutBox);const nt=createBox();calcRelativePosition(nt,o,et.layoutBox),boxEqualsRounded(tt,nt)||(j=!0),_.options.layoutRoot&&(e.relativeTarget=nt,e.relativeTargetOrigin=tt,e.relativeParent=_)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:i,delta:g,layoutDelta:h,hasLayoutChanged:b,hasRelativeTargetChanged:j})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function propagateDirtyNodes(e){projectionFrameData.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:s}=e.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetRotation(e){e.resetRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,s,i){e.translate=mix(s.translate,0,i),e.scale=mix(s.scale,1,i),e.origin=s.origin,e.originPoint=s.originPoint}function mixAxis(e,s,i,o){e.min=mix(s.min,i.min,o),e.max=mix(s.max,i.max,o)}function mixBox(e,s,i,o){mixAxis(e.x,s.x,i.x,o),mixAxis(e.y,s.y,i.y,o)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,s,i){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(s),aspectRatio(i),.2)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,s)=>addDomEvent(e,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,s)=>{e.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}},splitCSSVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function parseCSSVariable(e){const s=splitCSSVariableRegex.exec(e);if(!s)return[,];const[,i,o]=s;return[i,o]}function getVariableValue(e,s,i=1){const[o,a]=parseCSSVariable(e);if(!o)return;const c=window.getComputedStyle(s).getPropertyValue(o);if(c){const d=c.trim();return isNumericalString(d)?parseFloat(d):d}else return isCSSVariableToken(a)?getVariableValue(a,s,i+1):a}function resolveCSSVariables(e,{...s},i){const o=e.current;if(!(o instanceof Element))return{target:s,transitionEnd:i};i&&(i={...i}),e.values.forEach(a=>{const c=a.get();if(!isCSSVariableToken(c))return;const d=getVariableValue(c,o);d&&a.set(d)});for(const a in s){const c=s[a];if(!isCSSVariableToken(c))continue;const d=getVariableValue(c,o);d&&(s[a]=d,i||(i={}),i[a]===void 0&&(i[a]=c))}return{target:s,transitionEnd:i}}const positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isPositionalKey=e=>positionalKeys.has(e),hasPositionalKey=e=>Object.keys(e).some(isPositionalKey),isNumOrPxType=e=>e===number||e===px,getPosFromMatrix=(e,s)=>parseFloat(e.split(", ")[s]),getTranslateFromMatrix=(e,s)=>(i,{transform:o})=>{if(o==="none"||!o)return 0;const a=o.match(/^matrix3d\((.+)\)$/);if(a)return getPosFromMatrix(a[1],s);{const c=o.match(/^matrix\((.+)\)$/);return c?getPosFromMatrix(c[1],e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const s=[];return nonTranslationalTransformKeys.forEach(i=>{const o=e.getValue(i);o!==void 0&&(s.push([i,o.get()]),o.set(i.startsWith("scale")?1:0))}),s.length&&e.render(),s}const positionalValues={width:({x:e},{paddingLeft:s="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(s)-parseFloat(i),height:({y:e},{paddingTop:s="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(s)-parseFloat(i),top:(e,{top:s})=>parseFloat(s),left:(e,{left:s})=>parseFloat(s),bottom:({y:e},{top:s})=>parseFloat(s)+(e.max-e.min),right:({x:e},{left:s})=>parseFloat(s)+(e.max-e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const convertChangedValueTypes=(e,s,i)=>{const o=s.measureViewportBox(),a=s.current,c=getComputedStyle(a),{display:d}=c,h={};d==="none"&&s.setStaticValue("display",e.display||"block"),i.forEach(b=>{h[b]=positionalValues[b](o,c)}),s.render();const g=s.measureViewportBox();return i.forEach(b=>{const j=s.getValue(b);j&&j.jump(h[b]),e[b]=positionalValues[b](g,c)}),e},checkAndConvertChangedValueTypes=(e,s,i={},o={})=>{s={...s},o={...o};const a=Object.keys(s).filter(isPositionalKey);let c=[],d=!1;const h=[];if(a.forEach(g=>{const b=e.getValue(g);if(!e.hasValue(g))return;let j=i[g],_=findDimensionValueType(j);const $=s[g];let et;if(isKeyframesTarget($)){const tt=$.length,nt=$[0]===null?1:0;j=$[nt],_=findDimensionValueType(j);for(let it=nt;it<tt&&$[it]!==null;it++)et?invariant(findDimensionValueType($[it])===et):et=findDimensionValueType($[it])}else et=findDimensionValueType($);if(_!==et)if(isNumOrPxType(_)&&isNumOrPxType(et)){const tt=b.get();typeof tt=="string"&&b.set(parseFloat(tt)),typeof $=="string"?s[g]=parseFloat($):Array.isArray($)&&et===px&&(s[g]=$.map(parseFloat))}else _!=null&&_.transform&&(et!=null&&et.transform)&&(j===0||$===0)?j===0?b.set(et.transform(j)):s[g]=_.transform($):(d||(c=removeNonTranslationalTransform(e),d=!0),h.push(g),o[g]=o[g]!==void 0?o[g]:s[g],b.jump($))}),h.length){const g=h.indexOf("height")>=0?window.pageYOffset:null,b=convertChangedValueTypes(s,e,h);return c.length&&c.forEach(([j,_])=>{e.getValue(j).set(_)}),e.render(),isBrowser&&g!==null&&window.scrollTo({top:g}),{target:b,transitionEnd:o}}else return{target:s,transitionEnd:o}};function unitConversion(e,s,i,o){return hasPositionalKey(s)?checkAndConvertChangedValueTypes(e,s,i,o):{target:s,transitionEnd:o}}const parseDomVariant=(e,s,i,o)=>{const a=resolveCSSVariables(e,s,o);return s=a.target,o=a.transitionEnd,unitConversion(e,s,i,o)},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),s=()=>prefersReducedMotion.current=e.matches;e.addListener(s),s()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(e,s,i){const{willChange:o}=s;for(const a in s){const c=s[a],d=i[a];if(isMotionValue(c))e.addValue(a,c),isWillChangeMotionValue(o)&&o.add(a);else if(isMotionValue(d))e.addValue(a,motionValue(c,{owner:e})),isWillChangeMotionValue(o)&&o.remove(a);else if(d!==c)if(e.hasValue(a)){const h=e.getValue(a);!h.hasAnimated&&h.set(c)}else{const h=e.getStaticValue(a);e.addValue(a,motionValue(h!==void 0?h:c,{owner:e}))}}for(const a in i)s[a]===void 0&&e.removeValue(a);return s}const visualElementStore=new WeakMap,featureNames=Object.keys(featureDefinitions),numFeatures=featureNames.length,propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],numVariantProps=variantProps.length;class VisualElement{constructor({parent:s,props:i,presenceContext:o,reducedMotionConfig:a,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>frame.render(this.render,!1,!0);const{latestValues:h,renderState:g}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=i.initial?{...h}:{},this.renderState=g,this.parent=s,this.props=i,this.presenceContext=o,this.depth=s?s.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.isControllingVariants=isControllingVariants(i),this.isVariantNode=isVariantNode(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:b,...j}=this.scrapeMotionValuesFromProps(i,{});for(const _ in j){const $=j[_];h[_]!==void 0&&isMotionValue($)&&($.set(h[_],!1),isWillChangeMotionValue(b)&&b.add(_))}}scrapeMotionValuesFromProps(s,i){return{}}mount(s){this.current=s,visualElementStore.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,o)=>this.bindToMotionValue(o,i)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(s=>s()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features)this.features[s].unmount();this.current=null}bindToMotionValue(s,i){const o=transformProps.has(s),a=i.on("change",d=>{this.latestValues[s]=d,this.props.onUpdate&&frame.update(this.notifyUpdate,!1,!0),o&&this.projection&&(this.projection.isTransformDirty=!0)}),c=i.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(s,()=>{a(),c()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}loadFeatures({children:s,...i},o,a,c){let d,h;for(let g=0;g<numFeatures;g++){const b=featureNames[g],{isEnabled:j,Feature:_,ProjectionNode:$,MeasureLayout:et}=featureDefinitions[b];$&&(d=$),j(i)&&(!this.features[b]&&_&&(this.features[b]=new _(this)),et&&(h=et))}if((this.type==="html"||this.type==="svg")&&!this.projection&&d){this.projection=new d(this.latestValues,this.parent&&this.parent.projection);const{layoutId:g,layout:b,drag:j,dragConstraints:_,layoutScroll:$,layoutRoot:et}=i;this.projection.setOptions({layoutId:g,layout:b,alwaysMeasureLayout:!!j||_&&isRefObject(_),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof b=="string"?b:"both",initialPromotionConfig:c,layoutScroll:$,layoutRoot:et})}return h}updateFeatures(){for(const s in this.features){const i=this.features[s];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,i){this.latestValues[s]=i}makeTargetAnimatable(s,i=!0){return this.makeTargetAnimatableFromInstance(s,this.props,i)}update(s,i){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let o=0;o<propEventHandlers.length;o++){const a=propEventHandlers[o];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c=s["on"+a];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(s,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(s=!1){if(s)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const i={};for(let o=0;o<numVariantProps;o++){const a=variantProps[o],c=this.props[a];(isVariantLabel(c)||c===!1)&&(i[a]=c)}return i}addVariantChild(s){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(s),()=>i.variantChildren.delete(s)}addValue(s,i){i!==this.values.get(s)&&(this.removeValue(s),this.bindToMotionValue(s,i)),this.values.set(s,i),this.latestValues[s]=i.get()}removeValue(s){this.values.delete(s);const i=this.valueSubscriptions.get(s);i&&(i(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,i){if(this.props.values&&this.props.values[s])return this.props.values[s];let o=this.values.get(s);return o===void 0&&i!==void 0&&(o=motionValue(i,{owner:this}),this.addValue(s,o)),o}readValue(s){var i;return this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:(i=this.getBaseTargetFromProps(this.props,s))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,s,this.options)}setBaseTarget(s,i){this.baseTarget[s]=i}getBaseTarget(s){var i;const{initial:o}=this.props,a=typeof o=="string"||typeof o=="object"?(i=resolveVariantFromProps(this.props,o))===null||i===void 0?void 0:i[s]:void 0;if(o&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,s);return c!==void 0&&!isMotionValue(c)?c:this.initialValues[s]!==void 0&&a===void 0?void 0:this.baseTarget[s]}on(s,i){return this.events[s]||(this.events[s]=new SubscriptionManager),this.events[s].add(i)}notify(s,...i){this.events[s]&&this.events[s].notify(...i)}}class DOMVisualElement extends VisualElement{sortInstanceNodePosition(s,i){return s.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(s,i){return s.style?s.style[i]:void 0}removeValueFromRenderState(s,{vars:i,style:o}){delete i[s],delete o[s]}makeTargetAnimatableFromInstance({transition:s,transitionEnd:i,...o},{transformValues:a},c){let d=getOrigin(o,s||{},this);if(a&&(i&&(i=a(i)),o&&(o=a(o)),d&&(d=a(d))),c){checkTargetForNewValues(this,o,d);const h=parseDomVariant(this,o,d,i);i=h.transitionEnd,o=h.target}return{transition:s,transitionEnd:i,...o}}}function getComputedStyle$1(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html"}readValueFromInstance(s,i){if(transformProps.has(i)){const o=getDefaultValueType(i);return o&&o.default||0}else{const o=getComputedStyle$1(s),a=(isCSSVariableName(i)?o.getPropertyValue(i):o[i])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(s,{transformPagePoint:i}){return measureViewportBox(s,i)}build(s,i,o,a){buildHTMLStyles(s,i,o,a.transformTemplate)}scrapeMotionValuesFromProps(s,i){return scrapeMotionValuesFromProps$1(s,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;isMotionValue(s)&&(this.childSubscription=s.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}renderInstance(s,i,o,a){renderHTML(s,i,o,a)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(s,i){return s[i]}readValueFromInstance(s,i){if(transformProps.has(i)){const o=getDefaultValueType(i);return o&&o.default||0}return i=camelCaseAttributes.has(i)?i:camelToDash(i),s.getAttribute(i)}measureInstanceViewportBox(){return createBox()}scrapeMotionValuesFromProps(s,i){return scrapeMotionValuesFromProps(s,i)}build(s,i,o,a){buildSVGAttrs(s,i,o,this.isSVGTag,a.transformTemplate)}renderInstance(s,i,o,a){renderSVG(s,i,o,a)}mount(s){this.isSVGTag=isSVGTag(s.tagName),super.mount(s)}}const createDomVisualElement=(e,s)=>isSVGComponent(e)?new SVGVisualElement(s,{enableHardwareAcceleration:!1}):new HTMLVisualElement(s,{enableHardwareAcceleration:!0}),layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},preloadedFeatures={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy((e,s)=>createDomMotionConfig(e,s,preloadedFeatures,createDomVisualElement));function useIsMounted(){const e=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function useForceUpdate(){const e=useIsMounted(),[s,i]=reactExports.useState(0),o=reactExports.useCallback(()=>{e.current&&i(s+1)},[s]);return[reactExports.useCallback(()=>frame.postRender(o),[o]),s]}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(s){const i=this.props.childRef.current;if(i&&s.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=i.offsetHeight||0,o.width=i.offsetWidth||0,o.top=i.offsetTop,o.left=i.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:e,isPresent:s}){const i=reactExports.useId(),o=reactExports.useRef(null),a=reactExports.useRef({width:0,height:0,top:0,left:0});return reactExports.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:g}=a.current;if(s||!o.current||!c||!d)return;o.current.dataset.motionPopId=i;const b=document.createElement("style");return document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            top: ${h}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(b)}},[s]),reactExports.createElement(PopChildMeasure,{isPresent:s,childRef:o,sizeRef:a},reactExports.cloneElement(e,{ref:o}))}const PresenceChild=({children:e,initial:s,isPresent:i,onExitComplete:o,custom:a,presenceAffectsLayout:c,mode:d})=>{const h=useConstant(newChildrenMap),g=reactExports.useId(),b=reactExports.useMemo(()=>({id:g,initial:s,isPresent:i,custom:a,onExitComplete:j=>{h.set(j,!0);for(const _ of h.values())if(!_)return;o&&o()},register:j=>(h.set(j,!1),()=>h.delete(j))}),c?void 0:[i]);return reactExports.useMemo(()=>{h.forEach((j,_)=>h.set(_,!1))},[i]),reactExports.useEffect(()=>{!i&&!h.size&&o&&o()},[i]),d==="popLayout"&&(e=reactExports.createElement(PopChild,{isPresent:i},e)),reactExports.createElement(PresenceContext.Provider,{value:b},e)};function newChildrenMap(){return new Map}function useUnmountEffect(e){return reactExports.useEffect(()=>()=>e(),[])}const getChildKey=e=>e.key||"";function updateChildLookup(e,s){e.forEach(i=>{const o=getChildKey(i);s.set(o,i)})}function onlyElements(e){const s=[];return reactExports.Children.forEach(e,i=>{reactExports.isValidElement(i)&&s.push(i)}),s}const AnimatePresence=({children:e,custom:s,initial:i=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:d="sync"})=>{const h=reactExports.useContext(LayoutGroupContext).forceRender||useForceUpdate()[0],g=useIsMounted(),b=onlyElements(e);let j=b;const _=reactExports.useRef(new Map).current,$=reactExports.useRef(j),et=reactExports.useRef(new Map).current,tt=reactExports.useRef(!0);if(useIsomorphicLayoutEffect(()=>{tt.current=!1,updateChildLookup(b,et),$.current=j}),useUnmountEffect(()=>{tt.current=!0,et.clear(),_.clear()}),tt.current)return reactExports.createElement(reactExports.Fragment,null,j.map(_e=>reactExports.createElement(PresenceChild,{key:getChildKey(_e),isPresent:!0,initial:i?void 0:!1,presenceAffectsLayout:c,mode:d},_e)));j=[...j];const nt=$.current.map(getChildKey),it=b.map(getChildKey),rt=nt.length;for(let _e=0;_e<rt;_e++){const st=nt[_e];it.indexOf(st)===-1&&!_.has(st)&&_.set(st,void 0)}return d==="wait"&&_.size&&(j=[]),_.forEach((_e,st)=>{if(it.indexOf(st)!==-1)return;const ot=et.get(st);if(!ot)return;const ut=nt.indexOf(st);let ht=_e;if(!ht){const dt=()=>{_.delete(st);const at=Array.from(et.keys()).filter(ct=>!it.includes(ct));if(at.forEach(ct=>et.delete(ct)),$.current=b.filter(ct=>{const lt=getChildKey(ct);return lt===st||at.includes(lt)}),!_.size){if(g.current===!1)return;h(),o&&o()}};ht=reactExports.createElement(PresenceChild,{key:getChildKey(ot),isPresent:!1,onExitComplete:dt,custom:s,presenceAffectsLayout:c,mode:d},ot),_.set(st,ht)}j.splice(ut,0,ht)}),j=j.map(_e=>{const st=_e.key;return _.has(st)?_e:reactExports.createElement(PresenceChild,{key:getChildKey(_e),isPresent:!0,presenceAffectsLayout:c,mode:d},_e)}),reactExports.createElement(reactExports.Fragment,null,_.size?j:j.map(_e=>reactExports.cloneElement(_e)))},Initiation=({onComplete:e})=>{const[s,i]=reactExports.useState(1),[o,a]=reactExports.useState(""),[c,d]=reactExports.useState(""),[h,g]=reactExports.useState(""),[b,j]=reactExports.useState(!1),_=()=>{s===1?i(2):s===2&&i(3)},$=async()=>{if(!(!o.trim()||!c.trim()||!h.trim())){j(!0);try{const{data:tt,error:nt}=await supabase.from("profiles").select("id, full_name, call_sign, email, ai_support_level, current_streak, created_at, updated_at").eq("email",h.trim()).single();if(nt&&nt.code!=="PGRST116")throw nt;if(tt){console.log("Welcome back detected for email:",h.trim()),localStorage.setItem("gideon_user_id",tt.id),localStorage.setItem("gideon_call_sign",tt.call_sign),localStorage.setItem("gideon_full_name",tt.full_name||o.trim()),localStorage.setItem("gideon_email",tt.email),localStorage.setItem("gideon_ai_support_level",String(tt.ai_support_level||3)),et(tt.call_sign,tt.ai_support_level),e({fullName:tt.full_name||o.trim(),callSign:tt.call_sign,email:tt.email,profileId:tt.id,isReturningUser:!0}),j(!1);return}const{data:it,error:rt}=await supabase.from("profiles").insert({full_name:o.trim(),call_sign:c.trim(),email:h.trim(),ai_support_level:3,current_streak:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(rt){if(rt.code==="23505"){if(rt.message.includes("profiles_email_key")){j(!1),alert("This email is already registered. Please use a different email or try logging in.");return}if(rt.message.includes("profiles_call_sign_key")){j(!1),alert("This call sign is already taken. Please choose a different call sign.");return}}throw rt}if(!it)throw new Error("Failed to create profile");localStorage.setItem("gideon_user_id",it.id),localStorage.setItem("gideon_call_sign",c.trim()),localStorage.setItem("gideon_full_name",o.trim()),localStorage.setItem("gideon_email",h.trim()),localStorage.setItem("gideon_ai_support_level","3"),console.log("New profile created:",it),e({fullName:o.trim(),callSign:c.trim(),email:h.trim(),profileId:it.id,isReturningUser:!1})}catch(tt){console.error("Failed to save identity:",tt),j(!1),alert("Failed to save your identity. Please try again.")}}},et=(tt,nt)=>{const it=st=>st>=5?"bg-purple-600 border-purple-400":st>=3?"bg-blue-500 border-blue-400":"bg-orange-600 border-orange-400",rt=document.createElement("div");rt.className=`fixed top-20 right-4 ${it(nt)} text-white px-6 py-4 rounded-lg shadow-2xl z-50 transform transition-all duration-500 ease-out`,rt.style.cssText=`
      min-width: 320px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      border: 2px solid;
      animation: slideInRight 0.5s ease-out;
    `,rt.innerHTML=`
      <div class="flex items-start space-x-3">
        <div class="flex-shrink-0">
          <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center">
            <span class="text-lg"></span>
          </div>
        </div>
        <div class="flex-1">
          <div class="font-bold text-sm uppercase tracking-wider" style="font-family: 'Orbitron', monospace; letter-spacing: 0.1em;">
            WELCOME BACK, ${tt.toUpperCase()}
          </div>
          <div class="text-xs mt-1 opacity-90" style="font-family: 'Inter', sans-serif;">
            MISSION STATUS: ACTIVE
          </div>
        </div>
        <div class="flex-shrink-0">
          <button onclick="this.parentElement.parentElement.remove()" class="text-white/80 hover:text-white transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
      </div>
    `;const _e=document.createElement("style");_e.textContent=`
      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    `,document.head.appendChild(_e),document.body.appendChild(rt),setTimeout(()=>{rt.parentNode&&(rt.style.animation="slideInRight 0.5s ease-out reverse",setTimeout(()=>{rt.parentNode&&rt.parentNode.removeChild(rt)},500))},5e3),setTimeout(()=>{_e.parentNode&&_e.parentNode.removeChild(_e)},6e3)};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center text-white p-6",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-xl w-full text-center space-y-8",children:s===1?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("h1",{className:"text-6xl font-black italic tracking-tighter",style:{fontFamily:"Oswald, sans-serif"},children:["WELCOME TO YOUR ",jsxRuntimeExports.jsx("span",{className:"text-purple-500 underline decoration-4",children:"COMMAND LEVEL"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8 space-y-4 bg-black/60 p-6 rounded-2xl border border-purple-500/30",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-200 text-lg leading-relaxed",style:{fontFamily:"Playfair Display, serif"},children:"This is your space to reclaim what was lost through reps. Every problem solved is a scar healed, every mistake a recalibration."}),jsxRuntimeExports.jsxs("div",{className:"mt-8 p-6 border border-purple-400/50 rounded-xl bg-purple-900/20",children:[jsxRuntimeExports.jsx("h3",{className:"text-purple-300 text-xl font-bold mb-4 text-center",style:{fontFamily:"Oswald, sans-serif"},children:"THE SEAL OF REPS"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-gray-300 text-sm",style:{fontFamily:"Playfair Display, serif"},children:[jsxRuntimeExports.jsx("p",{className:"italic",children:"I am one who showed up."}),jsxRuntimeExports.jsx("p",{className:"italic",children:"I am not the score I once got, or the chair I once walked away from. I am the effort I am putting in right now."}),jsxRuntimeExports.jsx("p",{className:"italic",children:"Every problem is a rep. Every mistake is a recalibration. I am rewiring my mind to see patterns where I once saw walls."}),jsxRuntimeExports.jsx("p",{className:"italic",children:"The math is just the language of my victory. The calculator is just the tool of my intent."}),jsxRuntimeExports.jsx("p",{className:"italic",children:"I have stayed when I wanted to leave. I have focused when I wanted to fade. I am an Overcomer, not because it was easy, but because I am still here."}),jsxRuntimeExports.jsx("p",{className:"italic font-bold text-purple-300 mt-4",children:"The territory is mine because I earned it, one rep at a time."})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mt-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-left bg-purple-900/30 p-3 rounded-lg border-l-4 border-purple-400",children:[jsxRuntimeExports.jsx("p",{className:"text-purple-300 font-mono text-sm uppercase tracking-widest font-bold",children:"LISTEN (Verve)"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Work at your own pace. The app adapts to your energy."})]}),jsxRuntimeExports.jsxs("div",{className:"text-left bg-blue-900/30 p-3 rounded-lg border-l-4 border-blue-400",children:[jsxRuntimeExports.jsx("p",{className:"text-blue-300 font-mono text-sm uppercase tracking-widest font-bold",children:"LEARN (Aura)"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Turn every challenge into a lesson. No pressure, just progress."})]}),jsxRuntimeExports.jsxs("div",{className:"text-left bg-yellow-900/30 p-3 rounded-lg border-l-4 border-yellow-400",children:[jsxRuntimeExports.jsx("p",{className:"text-yellow-300 font-mono text-sm uppercase tracking-widest font-bold",children:"LEAD (Forge)"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"You are the architect of your success. Map your way to reclaim territory."})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:_,className:"px-12 py-4 bg-purple-600 rounded-full font-bold text-lg hover:bg-purple-400 hover:scale-105 transition-all shadow-[0_0_30px_rgba(168,85,247,0.5)]",children:"BEGIN MY GROWTH"})]}):s===2?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold italic mb-4",children:"IDENTITY RECOVERY"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-8 text-lg",children:"Let's secure your command identity for progress tracking."}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-purple-400 text-sm font-mono uppercase tracking-widest mb-2",children:"Full Name"}),jsxRuntimeExports.jsx("input",{autoFocus:!0,value:o,onChange:tt=>a(tt.target.value),placeholder:"Enter your full name...",className:"w-full bg-transparent border-b-2 border-purple-500 p-4 text-xl focus:outline-none placeholder:text-gray-700 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-purple-400 text-sm font-mono uppercase tracking-widest mb-2",children:"Call Sign (Display Name)"}),jsxRuntimeExports.jsx("input",{value:c,onChange:tt=>d(tt.target.value),placeholder:"Enter your call sign...",className:"w-full bg-transparent border-b-2 border-purple-500 p-4 text-xl focus:outline-none placeholder:text-gray-700 font-mono"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-purple-400 text-sm font-mono uppercase tracking-widest mb-2",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:h,onChange:tt=>g(tt.target.value),placeholder:"Enter your email...",className:"w-full bg-transparent border-b-2 border-purple-500 p-4 text-xl focus:outline-none placeholder:text-gray-700 font-mono"})]})]}),jsxRuntimeExports.jsx("button",{onClick:_,disabled:!o.trim()||!c.trim()||!h.trim(),className:"px-12 py-4 bg-purple-600 text-white rounded-full font-bold tracking-widest hover:scale-110 transition-all disabled:opacity-30",children:"CONTINUE"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold italic mb-4",children:"CONFIRM IDENTITY"}),jsxRuntimeExports.jsxs("div",{className:"bg-black/60 p-6 rounded-2xl border border-purple-500/30 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-purple-400 text-sm font-mono uppercase tracking-widest",children:"Full Name"}),jsxRuntimeExports.jsx("p",{className:"text-white text-xl font-mono",children:o})]}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-purple-400 text-sm font-mono uppercase tracking-widest",children:"Call Sign"}),jsxRuntimeExports.jsx("p",{className:"text-white text-xl font-mono",children:c})]}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-purple-400 text-sm font-mono uppercase tracking-widest",children:"Email"}),jsxRuntimeExports.jsx("p",{className:"text-white text-xl font-mono",children:h})]})]}),jsxRuntimeExports.jsx("button",{onClick:$,disabled:b,className:"px-12 py-4 bg-white text-black rounded-full font-black tracking-widest hover:scale-110 transition-all disabled:opacity-30",children:b?"SAVING...":"CONFIRM IDENTITY"})]})})})},mathContent={"ged-001":{title:"Algebra Basics",description:"Master the fundamentals of algebraic thinking",mode:"VERVE",difficulty:"Beginner",estimatedTime:"15-20 min",sector:"Foundations",prerequisites:[],coordinates:{x:200,y:300},icon:"",xpRequired:100,tacticalTip:"Tactical Tip: The [x] key is your best friend. Use it to build the equation.",problems:[{id:"ab1",question:"Solve for x: 3x + 7 = 22",answer:"5",equation:"3x + 7 = 22",variable:"x",solution:["Step 1: Subtract 7 from both sides: 3x = 22 - 7","Step 2: Simplify: 3x = 15","Step 3: Divide both sides by 3: x = 15  3","Step 4: Final answer: x = 5"]},{id:"ab2",question:"If y = 2x - 4 and x = 6, what is y?",answer:"8",equation:"y = 2x - 4",variable:"y",solution:["Step 1: Substitute x = 6 into the equation","Step 2: y = 2(6) - 4","Step 3: y = 12 - 4","Step 4: y = 8"]},{id:"ab3",question:"Solve: 2(x - 3) = 14",answer:"10",equation:"2(x - 3) = 14",variable:"x",solution:["Step 1: Divide both sides by 2: x - 3 = 7","Step 2: Add 3 to both sides: x = 7 + 3","Step 3: Simplify: x = 10"]},{id:"ab4",question:"What is x if 5x + 3 = 28?",answer:"5",equation:"5x + 3 = 28",variable:"x",solution:["Step 1: Subtract 3 from both sides: 5x = 25","Step 2: Divide both sides by 5: x = 5"]},{id:"ab5",question:"Solve: 4x - 9 = 11",answer:"5",equation:"4x - 9 = 11",variable:"x",solution:["Step 1: Add 9 to both sides: 4x = 20","Step 2: Divide both sides by 4: x = 5"]}]},"ged-002":{title:"Linear Equations",description:"Work with linear equations and graphing",mode:"AURA",difficulty:"Beginner",estimatedTime:"20-25 min",sector:"Foundations",prerequisites:["ged-001"],coordinates:{x:400,y:300},icon:"",xpRequired:150,problems:[{id:"le1",question:"Find the slope: y = 2x + 3",answer:"2",equation:"y = 2x + 3",concept:"slope",solution:["The equation is in slope-intercept form: y = mx + b","The coefficient of x (m) is the slope","In y = 2x + 3, the slope is 2"]},{id:"le2",question:"What is the y-intercept of y = -3x + 6?",answer:"6",equation:"y = -3x + 6",concept:"y-intercept",solution:["The y-intercept is where x = 0","Substitute x = 0: y = -3(0) + 6","y = 0 + 6 = 6"]},{id:"le3",question:"Find x when y = 0 in 2x + 4y = 8",answer:"4",equation:"2x + 4y = 8",concept:"x-intercept",solution:["Set y = 0: 2x + 4(0) = 8","Simplify: 2x = 8","Divide by 2: x = 4"]},{id:"le4",question:"What is the slope of the line through (1,2) and (3,8)?",answer:"3",points:[2,8],concept:"slope from points",solution:["Slope formula: m = (y - y) / (x - x)","m = (8 - 2) / (3 - 1) = 6/2 = 3"]},{id:"le5",question:"Write the equation of a line with slope -2 and y-intercept 5",answer:"y = -2x + 5",concept:"writing equations",solution:["Use slope-intercept form: y = mx + b","Substitute m = -2 and b = 5","y = -2x + 5"]}]},"ged-003":{title:"Systems of Equations",description:"Solve systems using multiple methods",mode:"FORGE",difficulty:"Intermediate",estimatedTime:"25-30 min",sector:"Foundations",prerequisites:["ged-001","ged-002"],coordinates:{x:600,y:300},icon:"",xpRequired:200,tacticalTip:"Tactical Tip: Use [ALPHA] key for variables. Press ALPHA Y= to enter Y variable.",problems:[{id:"se1",question:"Solve: x + y = 10, 2x - y = 5",answer:"(5, 5)",equations:["x + y = 10","2x - y = 5"],method:"elimination",solution:["Add the equations: (x + y) + (2x - y) = 10 + 5","Simplify: 3x = 15","Solve for x: x = 5","Substitute back: 5 + y = 10, so y = 5"]},{id:"se2",question:"Solve: 3x + 2y = 12, x - y = 1",answer:"(2, 1)",equations:["3x + 2y = 12","x - y = 1"],method:"substitution",solution:["From second equation: x = y + 1","Substitute into first: 3(y + 1) + 2y = 12","Expand: 3y + 3 + 2y = 12","Combine: 5y + 3 = 12","Solve: 5y = 9, y = 9/5 = 1.8","Find x: x = 1.8 + 1 = 2.8"]},{id:"se3",question:"Find x and y: 2x + 3y = 7, 4x - y = 3",answer:"(2, 1)",equations:["2x + 3y = 7","4x - y = 3"],method:"elimination",solution:["Multiply second equation by 3: 12x - 3y = 9","Add to first equation: (2x + 3y) + (12x - 3y) = 7 + 9","Simplify: 14x = 16, x = 8/7","Substitute to find y"]},{id:"se4",question:"Solve the system: x + y = 6, x - y = 2",answer:"(4, 2)",equations:["x + y = 6","x - y = 2"],method:"elimination",solution:["Add equations: 2x = 8","Solve: x = 4","Substitute: 4 + y = 6, so y = 2"]},{id:"se5",question:"Find the solution: 5x + y = 11, 2x + 3y = 12",answer:"(1, 6)",equations:["5x + y = 11","2x + 3y = 12"],method:"substitution",solution:["From first equation: y = 11 - 5x","Substitute into second: 2x + 3(11 - 5x) = 12","Expand: 2x + 33 - 15x = 12","Simplify: -13x + 33 = 12","Solve: -13x = -21, x = 21/13"]}]},"ged-004":{title:"Quadratic Equations",description:"Master quadratic equations and factoring",mode:"VERVE",difficulty:"Intermediate",estimatedTime:"30-35 min",sector:"Advanced",prerequisites:["ged-001","ged-002"],coordinates:{x:400,y:150},icon:"",xpRequired:250,problems:[{id:"qe1",question:"Solve: x - 9 = 0",answer:"x = 3, -3",equation:"x - 9 = 0",method:"factoring",solution:["Factor: (x - 3)(x + 3) = 0","Set each factor to 0: x - 3 = 0 or x + 3 = 0","Solve: x = 3 or x = -3"]},{id:"qe2",question:"Solve: x + 5x + 6 = 0",answer:"x = -2, -3",equation:"x + 5x + 6 = 0",method:"factoring",solution:["Factor: (x + 2)(x + 3) = 0","Set each factor to 0: x + 2 = 0 or x + 3 = 0","Solve: x = -2 or x = -3"]},{id:"qe3",question:"Find x: 2x - 8x = 0",answer:"x = 0, 4",equation:"2x - 8x = 0",method:"factoring",solution:["Factor out common term: 2x(x - 4) = 0","Set each factor to 0: 2x = 0 or x - 4 = 0","Solve: x = 0 or x = 4"]},{id:"qe4",question:"Solve using quadratic formula: x - 4x + 3 = 0",answer:"x = 1, 3",equation:"x - 4x + 3 = 0",method:"quadratic formula",solution:["Use formula: x = [-b  (b - 4ac)] / 2a","a = 1, b = -4, c = 3","x = [4  (16 - 12)] / 2","x = [4  2] / 2 = 3 or 1"]},{id:"qe5",question:"Complete the square: x + 6x + 9 = 0",answer:"x = -3",equation:"x + 6x + 9 = 0",method:"perfect square",solution:["Recognize as (x + 3) = 0","Take square root: x + 3 = 0","Solve: x = -3"]}]},"ged-005":{title:"Functions & Graphs",description:"Explore functions and their graphical representations",mode:"AURA",difficulty:"Intermediate",estimatedTime:"25-30 min",sector:"Advanced",prerequisites:["ged-002"],coordinates:{x:600,y:150},icon:"",xpRequired:225,problems:[{id:"fg1",question:"If f(x) = 3x - 2, find f(4)",answer:"10",function:"f(x) = 3x - 2",input:4,solution:["Substitute x = 4 into the function","f(4) = 3(4) - 2","f(4) = 12 - 2 = 10"]},{id:"fg2",question:"Find x if g(x) = x + 1 and g(x) = 10",answer:"3, -3",function:"g(x) = x + 1",output:10,solution:["Set up equation: x + 1 = 10","Subtract 1: x = 9","Take square root: x = 3"]},{id:"fg3",question:"What is the domain of f(x) = (x - 4)?",answer:"x  4",function:"f(x) = (x - 4)",concept:"domain",solution:["Square root requires non-negative input","x - 4  0","x  4"]},{id:"fg4",question:"If h(x) = 2x + 1, find h(7)",answer:"3",function:"h(x) = 2x + 1",inverse:!0,solution:["Set y = 2x + 1 and y = 7","Solve for x: 7 = 2x + 1","Subtract 1: 6 = 2x","Divide by 2: x = 3"]},{id:"fg5",question:"Find the range of f(x) = -x + 9",answer:"y  9",function:"f(x) = -x + 9",concept:"range",solution:["Maximum occurs at vertex x = 0","f(0) = -0 + 9 = 9","Since coefficient is negative, parabola opens downward","Range: y  9"]}]},"ged-006":{title:"Fraction Fundamentals",description:"Master the basics of fractions and operations",mode:"VERVE",difficulty:"Beginner",estimatedTime:"20-25 min",sector:"Foundation",prerequisites:[],coordinates:{x:150,y:400},icon:"",xpRequired:100,tacticalTip:"Tactical Tip: Use the [n/d] key on your TI-30XS to enter this directly.",problems:[{id:"frac1",question:"Simplify: 4/8",answer:"1/2",solution:["Find the greatest common divisor of 4 and 8","GCD is 4","Divide numerator and denominator by 4","4  4 = 1, 8  4 = 2","Result: 1/2"]},{id:"frac2",question:"Add: 1/3 + 1/6",answer:"1/2",solution:["Find common denominator: 6","Convert 1/3 to 2/6","Add: 2/6 + 1/6 = 3/6","Simplify: 3/6 = 1/2"]},{id:"frac3",question:"Multiply: 2/3  3/4",answer:"1/2",solution:["Multiply numerators: 2  3 = 6","Multiply denominators: 3  4 = 12","Result: 6/12","Simplify: 6/12 = 1/2"]},{id:"frac4",question:"Convert to mixed number: 7/3",answer:"2 1/3",solution:["Divide 7 by 3","3 goes into 7 two times (2  3 = 6)","Remainder: 7 - 6 = 1","Mixed number: 2 1/3"]},{id:"frac5",question:"Subtract: 3/4 - 1/4",answer:"1/2",solution:["Same denominator, subtract numerators","3 - 1 = 2","Result: 2/4","Simplify: 2/4 = 1/2"]}]},"ged-007":{title:"Decimal Operations",description:"Learn to work with decimal numbers",mode:"VERVE",difficulty:"Beginner",estimatedTime:"20-25 min",sector:"Foundation",prerequisites:[],coordinates:{x:350,y:400},icon:"",xpRequired:100,problems:[{id:"dec1",question:"Add: 2.5 + 1.3",answer:"3.8",solution:["Line up decimal points","  2.5","+ 1.3","------","  3.8"]},{id:"dec2",question:"Multiply: 0.5  0.4",answer:"0.2",solution:["Ignore decimals: 5  4 = 20","Count decimal places: 1 + 1 = 2","Place decimal: 0.20","Simplify: 0.2"]},{id:"dec3",question:"Convert to fraction: 0.75",answer:"3/4",solution:["0.75 = 75/100","Simplify by dividing by 25","75  25 = 3, 100  25 = 4","Result: 3/4"]},{id:"dec4",question:"Subtract: 5.0 - 2.3",answer:"2.7",solution:["Line up decimal points","  5.0","- 2.3","------","  2.7"]},{id:"dec5",question:"Divide: 1.5  0.5",answer:"3",solution:["Move decimal to make divisor whole: 15  5","15  5 = 3","Result: 3"]}]},"ged-008":{title:"Equation Basics",description:"Solve simple one-step equations",mode:"VERVE",difficulty:"Beginner",estimatedTime:"20-25 min",sector:"Foundation",prerequisites:[],coordinates:{x:550,y:400},icon:"",xpRequired:100,problems:[{id:"eq1",equation:"x + 3 = 8",answer:"5",solution:["Subtract 3 from both sides","x + 3 - 3 = 8 - 3","x = 5"]},{id:"eq2",equation:"x - 2 = 7",answer:"9",solution:["Add 2 to both sides","x - 2 + 2 = 7 + 2","x = 9"]},{id:"eq3",equation:"2x = 12",answer:"6",solution:["Divide both sides by 2","2x  2 = 12  2","x = 6"]},{id:"eq4",equation:"x  4 = 3",answer:"12",solution:["Multiply both sides by 4","x  4  4 = 3  4","x = 12"]},{id:"eq5",equation:"x + 5 = 11",answer:"6",solution:["Subtract 5 from both sides","x + 5 - 5 = 11 - 5","x = 6"]}]},"ged-009":{title:"Fraction Word Problems",description:"Apply fractions to real-world situations",mode:"AURA",difficulty:"Intermediate",estimatedTime:"25-30 min",sector:"Foundation",prerequisites:["ged-006"],coordinates:{x:250,y:550},icon:"",xpRequired:150,problems:[{id:"fw1",question:"A pizza has 8 slices. You eat 3 slices. What fraction did you eat?",answer:"3/8",solution:["Total slices = 8","Slices eaten = 3","Fraction = parts/whole = 3/8"]},{id:"fw2",question:"If 1/4 of a class is 6 students, how many students are in the whole class?",answer:"24",solution:["1/4 of class = 6 students","Whole class = 6  4 = 24 students"]},{id:"fw3",question:"You have 2/3 of a cake and give away 1/3. How much is left?",answer:"1/3",solution:["Start with 2/3","Give away 1/3","2/3 - 1/3 = 1/3"]},{id:"fw4",question:"A recipe calls for 3/4 cup of flour. You only have 1/2 cup. How much more do you need?",answer:"1/4",solution:["Needed: 3/4 cup","Have: 1/2 cup = 2/4 cup","Need: 3/4 - 2/4 = 1/4 cup"]},{id:"fw5",question:"If you study 1/2 hour each day for 5 days, how many total hours did you study?",answer:"2.5",solution:["1/2 hour per day  5 days","5/2 hours = 2.5 hours"]}]},"ged-010":{title:"Decimal Applications",description:"Use decimals in practical scenarios",mode:"AURA",difficulty:"Intermediate",estimatedTime:"25-30 min",sector:"Foundation",prerequisites:["ged-007"],coordinates:{x:450,y:550},icon:"",xpRequired:150,problems:[{id:"da1",question:"You buy items costing $3.50, $2.25, and $1.75. What is the total cost?",answer:"$7.50",solution:["Add the costs: $3.50 + $2.25 + $1.75","$3.50 + $2.25 = $5.75","$5.75 + $1.75 = $7.50"]},{id:"da2",question:"If sales tax is 8%, what is the tax on a $25 purchase?",answer:"$2.00",solution:["Tax = 8% of $25","0.08  25 = $2.00"]},{id:"da3",question:"A car gets 28.5 miles per gallon. How far can it go on 10 gallons?",answer:"285 miles",solution:["Distance = miles per gallon  gallons","28.5  10 = 285 miles"]},{id:"da4",question:"If you save $12.50 per week, how much will you save in 4 weeks?",answer:"$50.00",solution:["Weekly savings  number of weeks","$12.50  4 = $50.00"]},{id:"da5",question:"A shirt costs $19.99. If you pay with a $20 bill, how much change do you get?",answer:"$0.01",solution:["Change = amount paid - cost","$20.00 - $19.99 = $0.01"]}]},"ged-011":{title:"Multi-Step Equations",description:"Solve equations requiring multiple steps",mode:"FORGE",difficulty:"Intermediate",estimatedTime:"25-30 min",sector:"Foundation",prerequisites:["ged-008"],coordinates:{x:650,y:550},icon:"",xpRequired:150,problems:[{id:"me1",equation:"2x + 3 = 11",answer:"4",solution:["Subtract 3 from both sides: 2x = 8","Divide by 2: x = 4"]},{id:"me2",equation:"3x - 4 = 11",answer:"5",solution:["Add 4 to both sides: 3x = 15","Divide by 3: x = 5"]},{id:"me3",equation:"x/2 + 1 = 5",answer:"8",solution:["Subtract 1: x/2 = 4","Multiply by 2: x = 8"]},{id:"me4",equation:"4x + 2 = 18",answer:"4",solution:["Subtract 2: 4x = 16","Divide by 4: x = 4"]},{id:"me5",equation:"x/3 - 2 = 1",answer:"9",solution:["Add 2: x/3 = 3","Multiply by 3: x = 9"]}]},"ged-012":{title:"Mixed Practice",description:"Combine fractions, decimals, and equations",mode:"FORGE",difficulty:"Intermediate",estimatedTime:"30-35 min",sector:"Foundation",prerequisites:["ged-009","ged-010","ged-011"],coordinates:{x:450,y:700},icon:"",xpRequired:200,problems:[{id:"mp1",question:"Solve: x + 1.5 = 4.5",answer:"3",solution:["Subtract 1.5: x = 4.5 - 1.5","x = 3"]},{id:"mp2",question:"Convert 0.25 to a fraction and simplify",answer:"1/4",solution:["0.25 = 25/100","Simplify: divide by 25","25  25 = 1, 100  25 = 4","Result: 1/4"]},{id:"mp3",equation:"2x - 0.5 = 3.5",answer:"2",solution:["Add 0.5: 2x = 4.0","Divide by 2: x = 2"]},{id:"mp4",question:"Add: 1/2 + 0.25",answer:"0.75",solution:["Convert 1/2 to decimal: 0.5","Add: 0.5 + 0.25 = 0.75"]},{id:"mp5",equation:"x/4 + 1/2 = 1",answer:"2",solution:["Subtract 1/2: x/4 = 1/2","Multiply by 4: x = 2"]}]},"stronghold-001":{title:"GED Stronghold Exam",description:"Timed simulated exam to test your readiness",mode:"FORGE",difficulty:"EXAM",estimatedTime:"15 minutes",sector:"Expert",prerequisites:["ged-001","ged-002","ged-003"],coordinates:{x:900,y:300},icon:"",xpRequired:100,isStronghold:!0,problems:[{id:"exam-1",equation:"3x + 7 = 22",answer:"5",solution:["Subtract 7 from both sides: 3x = 22 - 7","Simplify: 3x = 15","Divide both sides by 3: x = 15/3","Final answer: x = 5"],difficulty:1,concept:"basic_algebra"},{id:"exam-2",equation:"2y - 5 = 11",answer:"8",solution:["Add 5 to both sides: 2y = 11 + 5","Simplify: 2y = 16","Divide both sides by 2: y = 16/2","Final answer: y = 8"],difficulty:1,concept:"basic_algebra"},{id:"exam-3",equation:"4x + 9 = 33",answer:"6",solution:["Subtract 9 from both sides: 4x = 33 - 9","Simplify: 4x = 24","Divide both sides by 4: x = 24/4","Final answer: x = 6"],difficulty:1,concept:"basic_algebra"},{id:"exam-4",equation:"5y - 12 = 18",answer:"6",solution:["Add 12 to both sides: 5y = 18 + 12","Simplify: 5y = 30","Divide both sides by 5: y = 30/5","Final answer: y = 6"],difficulty:1,concept:"basic_algebra"},{id:"exam-5",equation:"2x + 3x = 25",answer:"5",solution:["Combine like terms: 5x = 25","Divide both sides by 5: x = 25/5","Final answer: x = 5"],difficulty:2,concept:"combining_terms"},{id:"exam-6",equation:"4y - y = 18",answer:"6",solution:["Combine like terms: 3y = 18","Divide both sides by 3: y = 18/3","Final answer: y = 6"],difficulty:2,concept:"combining_terms"},{id:"exam-7",equation:"3(x + 2) = 21",answer:"5",solution:["Distribute: 3x + 6 = 21","Subtract 6: 3x = 15","Divide by 3: x = 5"],difficulty:2,concept:"distributive_property"},{id:"exam-8",equation:"2(y - 3) = 10",answer:"8",solution:["Distribute: 2y - 6 = 10","Add 6: 2y = 16","Divide by 2: y = 8"],difficulty:2,concept:"distributive_property"},{id:"exam-9",equation:"x/2 + 3 = 8",answer:"10",solution:["Subtract 3: x/2 = 5","Multiply both sides by 2: x = 10"],difficulty:2,concept:"fractions"},{id:"exam-10",equation:"y/3 + 4 = 7",answer:"9",solution:["Subtract 4: y/3 = 3","Multiply both sides by 3: y = 9"],difficulty:2,concept:"fractions"}]},"ged-051":{title:"Fraction Mastery",description:"Convert between fractions and decimals with precision",mode:"AURA",difficulty:"Intermediate",estimatedTime:"20-25 min",sector:"Alpha",prerequisites:["ged-003"],coordinates:{x:800,y:200},icon:"",xpRequired:250,tacticalTip:"Tactical Tip: Use [n/d] key for fractions. Press [fd] to toggle between fraction and decimal.",problems:[{id:"alpha1",question:"Convert 3/4 to decimal",answer:"0.75",equation:"3/4",concept:"fraction_to_decimal",solution:["Step 1: Divide numerator by denominator","Step 2: 3  4 = 0.75"],difficulty:2},{id:"alpha2",question:"Convert 5/8 to decimal",answer:"0.625",equation:"5/8",concept:"fraction_to_decimal",solution:["Step 1: Divide numerator by denominator","Step 2: 5  8 = 0.625"],difficulty:2},{id:"alpha3",question:"Convert 0.4 to fraction",answer:"2/5",equation:"0.4",concept:"decimal_to_fraction",solution:["Step 1: Write as fraction over 10","Step 2: Simplify: 4/10 = 2/5"],difficulty:3},{id:"alpha4",question:"Convert 7/12 to decimal",answer:"0.583",equation:"7/12",concept:"fraction_to_decimal",solution:["Step 1: Divide numerator by denominator","Step 2: 7  12  0.583"],difficulty:3},{id:"alpha5",question:"Convert 0.875 to fraction",answer:"7/8",equation:"0.875",concept:"decimal_to_fraction",solution:["Step 1: Write as fraction over 1000","Step 2: Simplify: 875/1000 = 7/8"],difficulty:3},{id:"alpha6",question:"Add: 2/3 + 1/4",answer:"11/12",equation:"2/3 + 1/4",concept:"fraction_addition",solution:["Step 1: Find common denominator: 12","Step 2: Convert: 8/12 + 3/12 = 11/12"],difficulty:4},{id:"alpha7",question:"Subtract: 5/6 - 1/3",answer:"1/2",equation:"5/6 - 1/3",concept:"fraction_subtraction",solution:["Step 1: Find common denominator: 6","Step 2: Convert: 5/6 - 2/6 = 3/6 = 1/2"],difficulty:4},{id:"alpha8",question:"Multiply: 3/4  2/5",answer:"3/10",equation:"3/4  2/5",concept:"fraction_multiplication",solution:["Step 1: Multiply numerators: 3  2 = 6","Step 2: Multiply denominators: 4  5 = 20","Step 3: Combine: 6/20 = 3/10"],difficulty:4},{id:"alpha9",question:"Divide: (3/4)  (1/2)",answer:"3/2",equation:"(3/4)  (1/2)",concept:"fraction_division",solution:["Step 1: Multiply by reciprocal: (3/4)  (2/1)","Step 2: Multiply: 6/4 = 3/2"],difficulty:5,requiresGhostCalc:!0},{id:"alpha10",question:"Convert 2.125 to mixed number",answer:"2 1/8",equation:"2.125",concept:"decimal_to_mixed",solution:["Step 1: Whole number: 2","Step 2: Decimal part: 0.125 = 125/1000 = 1/8","Step 3: Combine: 2 1/8"],difficulty:5,requiresGhostCalc:!0}]},"ged-052":{title:"Variable Substitution",description:"Master calculator memory and variable operations",mode:"FORGE",difficulty:"Advanced",estimatedTime:"25-35 min",sector:"Bravo",prerequisites:["ged-004"],coordinates:{x:1e3,y:400},icon:"",xpRequired:300,tacticalTip:"Tactical Tip: Use [STO] to store values. Use [ALPHA] + [X,T,,n] for variables.",problems:[{id:"bravo1",question:"If x = 5, evaluate 3x - 2x + 7",answer:"78",equation:"3x - 2x + 7",variable:"x",concept:"substitution",solution:["Step 1: Substitute x = 5","Step 2: 3(5) - 2(5) + 7","Step 3: 3(25) - 10 + 7 = 75 - 10 + 7 = 78"],difficulty:3},{id:"bravo2",question:"If y = -3, evaluate 2y + 4y - 5",answer:"-38",equation:"2y + 4y - 5",variable:"y",concept:"substitution",solution:["Step 1: Substitute y = -3","Step 2: 2(-3) + 4(-3) - 5","Step 3: 2(-27) - 12 - 5 = -54 - 12 - 5 = -71"],difficulty:3},{id:"bravo3",question:"Store 42 in memory, then calculate 5x + MEM",answer:"5x + 42",equation:"5x + MEM",concept:"calculator_memory",solution:["Step 1: Press [STO] [4] [2] [ENTER]","Step 2: Memory now contains 42","Step 3: Use [ALPHA] [MEM] [ENTER] to recall"],difficulty:4},{id:"bravo4",question:"If a = 7 and b = 3, evaluate ab - 2ab",answer:"105",equation:"ab - 2ab",variables:["a","b"],concept:"multi_variable",solution:["Step 1: Substitute a = 7, b = 3","Step 2: (7)(3) - 2(7)(3)","Step 3: 49 - 42 = 7"],difficulty:4},{id:"bravo5",question:"Store  in memory, then calculate 2r",answer:"2r",equation:"2r",concept:"memory_with_constants",solution:["Step 1: Press [2nd] [] [STO] [ENTER]","Step 2: Memory now contains ","Step 3: Use [2] [] [ALPHA] [] [] [r] [ENTER]"],difficulty:4},{id:"bravo6",question:"If x = 12, evaluate x + 3x",answer:"1212 + 312",equation:"x + 3x",variable:"x",concept:"radical_substitution",solution:["Step 1: Substitute x = 12","Step 2: (12) + 3(12)","Step 3: 1212 + 312"],difficulty:5},{id:"bravo7",question:"Store 2.5 in memory, then calculate 4x + MEM",answer:"4x + 2.5",equation:"4x + MEM",concept:"decimal_memory",solution:["Step 1: Press [2] [.] [5] [STO] [ENTER]","Step 2: Memory now contains 2.5","Step 3: Use [4] [] [x] [+] [ALPHA] [MEM] [ENTER]"],difficulty:5,requiresGhostCalc:!0},{id:"bravo8",question:"If y = 2x + 1 and x = 3, find y using memory",answer:"7",equation:"y = 2x + 1",variables:["x","y"],concept:"memory_substitution",solution:["Step 1: Store x = 3 in memory: [3] [STO] [ENTER]","Step 2: Calculate y = 2(MEM) + 1","Step 3: y = 2(3) + 1 = 7"],difficulty:5,requiresGhostCalc:!0},{id:"bravo9",question:"Evaluate 3xy - 2xy when x = 4, y = 5",answer:"3(4)(5) - 2(4)(5)",equation:"3xy - 2xy",variables:["x","y"],concept:"complex_substitution",solution:["Step 1: Substitute x = 4, y = 5","Step 2: 3(4)(5) - 2(4)(5)","Step 3: 3(16)(5) - 2(4)(25) = 240 - 200 = 40"],difficulty:5,requiresGhostCalc:!0},{id:"bravo10",question:"Store e in memory, then calculate x + 2xe + MEM",answer:"x + 2xe + e",equation:"x + 2xe + MEM",concept:"exponential_memory",solution:["Step 1: Press [2nd] [ln] [STO] [ENTER]","Step 2: Memory now contains e","Step 3: Use [x] [+] [2] [] [x] [] [ALPHA] [e] [+] [ALPHA] [MEM] [ENTER]"],difficulty:5,requiresGhostCalc:!0}]},"ged-053":{title:"Formula Application",description:"Apply formulas for volume, surface area, and more",mode:"VERVE",difficulty:"Advanced",estimatedTime:"30-40 min",sector:"Charlie",prerequisites:["ged-012"],coordinates:{x:1200,y:300},icon:"",xpRequired:350,tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",problems:[{id:"charlie1",question:"Find volume of cylinder with radius 4, height 10",answer:"502.65",equation:"V = rh",concept:"cylinder_volume",solution:["Step 1: V = (4)(10)","Step 2: V = (16)(10) = 160  502.65"],difficulty:3},{id:"charlie2",question:"Find surface area of sphere with radius 6",answer:"452.39",equation:"SA = 4r",concept:"sphere_surface_area",solution:["Step 1: SA = 4(6)","Step 2: SA = 4(36) = 144  452.39"],difficulty:3},{id:"charlie3",question:"Find volume of cone with radius 5, height 12",answer:"314.16",equation:"V = (1/3)rh",concept:"cone_volume",solution:["Step 1: V = (1/3)(5)(12)","Step 2: V = (1/3)(25)(12) = 100  314.16"],difficulty:4},{id:"charlie4",question:"Find surface area of rectangular prism: 345",answer:"94",equation:"SA = 2(lw + lh + wh)",concept:"prism_surface_area",solution:["Step 1: SA = 2(34 + 35 + 45)","Step 2: SA = 2(12 + 15 + 20) = 2(47) = 94"],difficulty:4},{id:"charlie5",question:"Find volume of pyramid with square base 66, height 8",answer:"96",equation:"V = (1/3)Bh",concept:"pyramid_volume",solution:["Step 1: Base area = 66 = 36","Step 2: V = (1/3)(36)(8) = 128 = 96"],difficulty:4},{id:"charlie6",question:"Find surface area of cylinder with radius 7, height 15",answer:"967.61",equation:"SA = 2r + 2rh",concept:"cylinder_surface_area",solution:["Step 1: SA = 2(7) + 2(7)(15)","Step 2: SA = 2(49) + 2(105) = 98 + 210 = 308  967.61"],difficulty:5},{id:"charlie7",question:"Find volume of sphere with radius 8",answer:"2144.66",equation:"V = (4/3)r",concept:"sphere_volume",solution:["Step 1: V = (4/3)(8)","Step 2: V = (4/3)(512) = (2048/3)  2144.66"],difficulty:5},{id:"charlie8",question:"Find surface area of cone with radius 9, slant height 15",answer:"678.58",equation:"SA = r + rl",concept:"cone_surface_area",solution:["Step 1: SA = (9) + (9)(15)","Step 2: SA = 81 + 135 = 216  678.58"],difficulty:5,requiresGhostCalc:!0},{id:"charlie9",question:"Find volume of complex shape: cylinder r=3, h=4 + cone r=2, h=6",answer:"141.37",equation:"V = rh + (1/3)rh",concept:"composite_volume",solution:["Step 1: Cylinder: (3)(4) = 36","Step 2: Cone: (1/3)(2)(6) = 8","Step 3: Total: 36 + 8 = 44  138.23"],difficulty:5,requiresGhostCalc:!0},{id:"charlie10",question:"Find surface area of complex shape: sphere r=4 + cylinder r=3, h=5",answer:"263.89",equation:"SA = 4r + 2r + 2rh",concept:"composite_surface_area",solution:["Step 1: Sphere: 4(4) = 64","Step 2: Cylinder: 2(3) + 2(3)(5) = 18 + 30 = 48","Step 3: Total: 64 + 48 = 112  351.86"],difficulty:5,requiresGhostCalc:!0}]},"ged-054":{title:"Mean and Median",description:"Calculate central tendency from data sets",mode:"AURA",difficulty:"Expert",estimatedTime:"35-45 min",sector:"Delta",prerequisites:["ged-025"],coordinates:{x:1400,y:400},icon:"",xpRequired:400,tacticalTip:"Tactical Tip: Use calculator memory for running totals. [2nd] [STAT] for statistics.",problems:[{id:"delta1",question:"Find mean: 12, 15, 18, 21, 24",answer:"18",data:[12,15,18,21,24],concept:"mean",solution:["Step 1: Sum all values: 12 + 15 + 18 + 21 + 24 = 90","Step 2: Divide by count: 90  5 = 18"],difficulty:3},{id:"delta2",question:"Find median: 8, 12, 16, 20, 25",answer:"16",data:[8,12,16,20,25],concept:"median",solution:["Step 1: Order data: 8, 12, 16, 20, 25","Step 2: Middle value is 16"],difficulty:3},{id:"delta3",question:"Find mean: 45, 52, 48, 61, 59, 55",answer:"53.33",data:[45,52,48,61,59,55],concept:"mean",solution:["Step 1: Sum all values: 45 + 52 + 48 + 61 + 59 + 55 = 320","Step 2: Divide by count: 320  6  53.33"],difficulty:4},{id:"delta4",question:"Find median: 33, 41, 28, 36, 39, 42",answer:"37.5",data:[33,41,28,36,39,42],concept:"median",solution:["Step 1: Order data: 28, 33, 36, 39, 41, 42","Step 2: Average middle two: (36 + 39)  2 = 37.5"],difficulty:4},{id:"delta5",question:"Find mode: 7, 9, 7, 12, 9, 7, 15",answer:"7",data:[7,9,7,12,9,7,15],concept:"mode",solution:["Step 1: Count frequency: 7 appears 3 times, 9 appears 2 times, 12 appears 1 time, 15 appears 1 time","Step 2: Most frequent value is 7"],difficulty:4},{id:"delta6",question:"Find range: 15, 22, 18, 31, 25, 28",answer:"16",data:[15,22,18,31,25,28],concept:"range",solution:["Step 1: Find min and max: min = 15, max = 31","Step 2: Range = max - min = 31 - 15 = 16"],difficulty:4},{id:"delta7",question:"Find mean and median: 42, 38, 45, 51, 47, 43",answer:"mean=44.33, median=44.5",data:[42,38,45,51,47,43],concept:"mean_median",solution:["Step 1: Mean: Sum  count = 266  6  44.33","Step 2: Median: Ordered data, middle two average = (44 + 45)  2 = 44.5"],difficulty:5},{id:"delta8",question:"Find weighted mean: grades 80(20%), 85(30%), 90(50%)",answer:"86.5",data:[80,85,90],weights:[.2,.3,.5],concept:"weighted_mean",solution:["Step 1: Multiply grades by weights: 800.2=16, 850.3=25.5, 900.5=45","Step 2: Sum weighted scores: 16 + 25.5 + 45 = 86.5"],difficulty:5},{id:"delta9",question:"Find standard deviation: 10, 12, 14, 16, 18",answer:"2.83",data:[10,12,14,16,18],concept:"standard_deviation",solution:["Step 1: Mean = (10+12+14+16+18)5 = 14","Step 2: Variance = [(10-14)+(12-14)+(14-14)+(16-14)+(18-14)]5 = 8","Step 3: Standard deviation = 8  2.83"],difficulty:5,requiresGhostCalc:!0},{id:"delta10",question:"Find quartiles: 12, 15, 18, 21, 24, 27, 30",answer:"Q1=16.5, Q2=21, Q3=25.5",data:[12,15,18,21,24,27,30],concept:"quartiles",solution:["Step 1: Order data and find medians of halves","Step 2: Q1 = median of lower half = 16.5","Step 3: Q2 = median of all = 21","Step 4: Q3 = median of upper half = 25.5"],difficulty:5,requiresGhostCalc:!0}]}},getNodeById=e=>mathContent[e]||null,getAllNodes=()=>Object.values(mathContent),getUnlockedNodes=(e=[])=>Object.values(mathContent).filter(s=>e.includes(s.id)?!1:s.prerequisites.every(i=>e.includes(i))),ReconMissionButton=({onStartRecon:e})=>{const s=async()=>{try{const i=localStorage.getItem("gideon_user_id"),o=localStorage.getItem("gideon_call_sign");if(!i||!o){console.error("Missing profile information for mission tracking");return}const a={profile_id:i,call_sign:o,mission_type:"Reconnaissance",sector_name:"Unknown Territory",accuracy:0,completion_time:0,status:"in_progress",completed_at:new Date().toISOString()},{data:c,error:d}=await supabase.from("student_mission_history").insert([a]).select();d?console.error("Failed to create mission history entry:",d):(console.log("Mission history entry created:",c),e())}catch(i){console.error("Recon mission error:",i)}};return jsxRuntimeExports.jsx("button",{onClick:s,className:"recon-mission-button",style:{position:"absolute",bottom:"20px",right:"20px",backgroundColor:"#00BFFF",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer",fontSize:"1em",fontWeight:"bold",boxShadow:"0 0 10px rgba(0, 191, 255, 0.7)",zIndex:1e3},children:" Start Recon Mission"})},SocraticCoPilot$1=()=>{const[e,s]=reactExports.useState(new Map),[i,o]=reactExports.useState(!1),[a,c]=reactExports.useState(null),[d,h]=reactExports.useState([]),g=nt=>{const it=e.get(nt)||0;s(new Map(e.set(nt,it+1))),it>=2&&b(nt)},b=nt=>{o(!0),h(it=>[...it,{conceptId:nt,timestamp:new Date().toISOString(),type:"TACTICAL_INTEL_DEPLOYED",message:`High friction detected in ${nt}. Deploying Tactical Intel to help you conquer this sector.`}])};return{trackFriction:g,deployTacticalIntel:b,generateSocraticHint:(nt,it,rt)=>{const _e=["Let's look at this Problem together.","What do you notice about the structure?","Which part seems most challenging?","Can you think of a similar Problem you've solved before?"];if(i){const st=Math.floor(Math.random()*_e.length);return{hint:_e[st]||"Warrior, hold your position. You aren't failing; you've hit a high-friction zone. We are deploying Tactical Intel to help you conquer this sector.",requiresIntervention:i}}},resetIntervention:nt=>{o(!1),c(null),h(it=>[...it,{conceptId:nt,timestamp:new Date().toISOString(),type:"INTERVENTION_SUCCESS",message:`Student demonstrated understanding in ${nt}. Tactical Intel deactivated.`}])},getInterventionHistory:()=>d,getFrictionData:()=>{const nt={};return e.forEach((it,rt)=>{nt[rt]=it}),nt},fetchReconConcepts:async nt=>{try{const{data:it,error:rt}=await supabase.from("warrior_achievements").select("*").eq("user_id",nt).eq("status","completed").order("earned_at",{ascending:!0}).limit(3);return rt?(console.error("Error fetching recon concepts:",rt),[]):it||[]}catch(it){return console.error("Failed to fetch recon concepts:",it),[]}}}},MasteryMap=({onNodeSelect:e,selectedNode:s,completedNodes:i=[]})=>{const[o,a]=reactExports.useState(!1),[c,d]=reactExports.useState({x:0,y:0,scale:1}),[h,g]=reactExports.useState(null),[b,j]=reactExports.useState([]),[_,$]=reactExports.useState(null),[et,tt]=reactExports.useState(!1),nt=reactExports.useRef(null),[it]=reactExports.useState(()=>new SocraticCoPilot$1);if(reactExports.useEffect(()=>{a(!0),console.log("MasteryMap: Client-side rendering activated")},[]),reactExports.useEffect(()=>{const at=setTimeout(()=>{o||(console.log("MasteryMap: Force rendering activated after 2 seconds"),a(!0))},2e3);return()=>clearTimeout(at)},[o]),!o)return jsxRuntimeExports.jsx("div",{style:{background:"#1a1a1a",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#FFBF00",fontSize:"20px",fontFamily:"monospace"},children:" Initializing Mastery Map..."});reactExports.useEffect(()=>{(async()=>{try{const ct=localStorage.getItem("gideon_user_name")||"anonymous",{data:lt,error:ft}=await supabase.from("mastery_ledger").select("node_id").eq("user_id",ct).eq("status","mastered");if(lt&&lt.length>0){const mt=lt.map(gt=>gt.node_id);j(mt),localStorage.setItem("completedNodes",JSON.stringify(mt))}else{const mt=localStorage.getItem("completedNodes");mt&&j(JSON.parse(mt))}}catch(ct){console.error("Failed to load reclaimed nodes:",ct);const lt=localStorage.getItem("completedNodes");lt&&j(JSON.parse(lt))}})()},[]);const rt=at=>{at.preventDefault();const ct=at.deltaY>0?.9:1.1;d(lt=>({...lt,scale:Math.max(.5,Math.min(2,lt.scale*ct))}))},_e=at=>{if(at.buttons===1){const ct=at.clientX-c.x,lt=at.clientY-c.y,ft=gt=>{d(jt=>({...jt,x:gt.clientX-ct,y:gt.clientY-lt}))},mt=()=>{document.removeEventListener("mousemove",ft),document.removeEventListener("mouseup",mt)};document.addEventListener("mousemove",ft),document.addEventListener("mouseup",mt)}},st=at=>{const ct=b.includes(at),lt=getNodeById(at);if(!lt)return"locked";const ft=lt.prerequisites.every(mt=>b.includes(mt));return ct?"reclaimed":ft?"unlocked":"locked"},ot=at=>({Foundations:"#9333ea",Advanced:"#22c55e",Expert:"#ef4444"})[at]||"#9333ea",ut=async()=>{try{const at=localStorage.getItem("gideon_user_name")||"anonymous",ct=await it.fetchReconConcepts(at);console.log("Recon Mission Data:",ct),$(ct),tt(!0)}catch(at){console.error("Failed to start recon mission:",at)}},ht=()=>{const at=getAllNodes(),ct=[];return at.forEach(lt=>{lt.prerequisites.forEach(ft=>{ct.push({from:ft,to:lt.id})})}),ct.map((lt,ft)=>{var yt,vt,Ct,pt;const mt=getNodeById(lt.from),gt=getNodeById(lt.to);if(!mt||!gt)return null;const jt=st(lt.from);return st(lt.to),jsxRuntimeExports.jsx(motion.line,{x1:((yt=mt.coordinates)==null?void 0:yt.x)||0,y1:((vt=mt.coordinates)==null?void 0:vt.y)||0,x2:((Ct=gt.coordinates)==null?void 0:Ct.x)||0,y2:((pt=gt.coordinates)==null?void 0:pt.y)||0,stroke:jt.borderColor,strokeWidth:"2",strokeOpacity:.6,initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,delay:ft*.1}},ft)}).filter(Boolean)},dt=()=>getAllNodes().map((at,ct)=>{const lt=st(at.id),ft=ot(at.sector),mt=(s==null?void 0:s.id)===at.id,gt=(h==null?void 0:h.id)===at.id;at.id;const yt=at.id==="ged-002"&&!lt.isLocked;return jsxRuntimeExports.jsxs(motion.g,{children:[lt==="reclaimed"&&jsxRuntimeExports.jsx(motion.circle,{cx:at.coordinates.x,cy:at.coordinates.y,r:35,fill:"none",stroke:"url(#goldShimmer)",strokeWidth:"3",animate:{rotate:[0,360],opacity:[.4,.8,.4]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{transformOrigin:`${at.coordinates.x}px ${at.coordinates.y}px`,pointerEvents:"none"}}),jsxRuntimeExports.jsx(motion.circle,{cx:at.coordinates.x,cy:at.coordinates.y,r:mt?35:gt?30:25,fill:lt.glowColor,stroke:lt.borderColor,strokeWidth:"3",initial:{scale:0,opacity:0},animate:{scale:mt?1.2:gt?1.1:1,opacity:.8},transition:{duration:.3,delay:ct*.1},style:{filter:"blur(8px)"},whileHover:{scale:lt.isLocked?1:1.1},whileTap:{scale:lt.isLocked?1:.95},onClick:()=>!lt.isLocked&&e(at),onHoverStart:()=>g(at),onHoverEnd:()=>g(null)}),jsxRuntimeExports.jsx(motion.circle,{cx:at.coordinates.x,cy:at.coordinates.y,r:20,fill:lt.bgColor,stroke:lt.borderColor,strokeWidth:"3",initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:ct*.1+.2},style:{cursor:lt.isLocked?"not-allowed":"pointer",filter:lt.isLocked?"grayscale(100%)":"none"}}),jsxRuntimeExports.jsx(motion.text,{x:at.coordinates.x,y:at.coordinates.y,textAnchor:"middle",fontSize:"16",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.3,delay:ct*.1+.3},style:{pointerEvents:"none"},children:at.icon}),gt&&jsxRuntimeExports.jsx(motion.text,{x:at.coordinates.x,y:at.coordinates.y+40,textAnchor:"middle",fontSize:"12",fill:"white",initial:{opacity:0,y:at.coordinates.y+40},animate:{opacity:1,y:at.coordinates.y+40},transition:{duration:.2},style:{pointerEvents:"none"},children:at.title}),!lt.isLocked&&at.masteryLevel>0&&jsxRuntimeExports.jsx(motion.circle,{cx:at.coordinates.x,cy:at.coordinates.y,r:23,fill:"none",stroke:ft,strokeWidth:"3",strokeDasharray:`${at.masteryLevel*1.5} ${150-at.masteryLevel*1.5}`,initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1,delay:ct*.1+.5},transform:`rotate(-90 ${at.coordinates.x} ${at.coordinates.y})`,style:{transformOrigin:`${at.coordinates.x}px ${at.coordinates.y}px`}}),yt&&jsxRuntimeExports.jsx(motion.circle,{cx:at.coordinates.x,cy:at.coordinates.y,r:30,fill:"none",stroke:"#FFD700",strokeWidth:"2",initial:{scale:0},animate:{scale:[1,1.3,1],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{filter:"blur(0px)",transform:"translate(-50%, -50%)"}})]},at.id)});return jsxRuntimeExports.jsxs("div",{className:"mastery-map-container",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0",children:[...Array(50)].map((at,ct)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full bg-white",style:{width:Math.random()*3+"px",height:Math.random()*3+"px",left:Math.random()*100+"%",top:Math.random()*100+"%",opacity:Math.random()*.8+.2}},ct))}),jsxRuntimeExports.jsxs("svg",{ref:nt,className:"w-full h-full relative z-10",viewBox:`${c.x} ${c.y} 1200 600`,onWheel:rt,onMouseDown:_e,style:{cursor:"grab"},children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"rgba(147, 51, 234, 0.1)",strokeWidth:"1"})}),jsxRuntimeExports.jsxs("linearGradient",{id:"goldShimmer",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#FFD700",stopOpacity:"0.8"}),jsxRuntimeExports.jsx("stop",{offset:"50%",stopColor:"#FFA500",stopOpacity:"1"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.8"})]})]}),jsxRuntimeExports.jsx("rect",{width:"1200",height:"600",fill:"url(#grid)"}),jsxRuntimeExports.jsxs("g",{opacity:"0.15",children:[jsxRuntimeExports.jsx("rect",{x:"50",y:"350",width:"500",height:"200",fill:"none",stroke:"#CD7F32",strokeWidth:"2",strokeDasharray:"10,5",rx:"20"}),jsxRuntimeExports.jsx("text",{x:"300",y:"380",textAnchor:"middle",fill:"#CD7F32",fontSize:"16",fontWeight:"bold",children:"ZONE ALPHA: FOUNDATIONS FRONTIER"}),jsxRuntimeExports.jsx("text",{x:"300",y:"400",textAnchor:"middle",fill:"#CD7F32",fontSize:"12",opacity:"0.8",children:"The basics they must own"}),jsxRuntimeExports.jsx("rect",{x:"600",y:"50",width:"500",height:"200",fill:"none",stroke:"#C0C0C0",strokeWidth:"2",strokeDasharray:"10,5",rx:"20"}),jsxRuntimeExports.jsx("text",{x:"850",y:"80",textAnchor:"middle",fill:"#C0C0C0",fontSize:"16",fontWeight:"bold",children:"ZONE BRAVO: ALGEBRA HIGHLANDS"}),jsxRuntimeExports.jsx("text",{x:"850",y:"100",textAnchor:"middle",fill:"#C0C0C0",fontSize:"12",opacity:"0.8",children:"The heart of the battle"}),jsxRuntimeExports.jsx("rect",{x:"750",y:"350",width:"400",height:"200",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeDasharray:"10,5",rx:"20"}),jsxRuntimeExports.jsx("text",{x:"950",y:"380",textAnchor:"middle",fill:"#FFD700",fontSize:"16",fontWeight:"bold",children:"ZONE CHARLIE: MEASUREMENT OUTPOSTS"}),jsxRuntimeExports.jsx("text",{x:"950",y:"400",textAnchor:"middle",fill:"#FFD700",fontSize:"12",opacity:"0.8",children:"Geometry and Shapes"}),jsxRuntimeExports.jsx("rect",{x:"300",y:"50",width:"400",height:"200",fill:"none",stroke:"#E5E4E2",strokeWidth:"2",strokeDasharray:"10,5",rx:"20"}),jsxRuntimeExports.jsx("text",{x:"500",y:"80",textAnchor:"middle",fill:"#E5E4E2",fontSize:"16",fontWeight:"bold",children:"ZONE DELTA: DATA STRONGHOLD"}),jsxRuntimeExports.jsx("text",{x:"500",y:"100",textAnchor:"middle",fill:"#E5E4E2",fontSize:"12",opacity:"0.8",children:"Graphs and Stats"})]}),jsxRuntimeExports.jsx("g",{children:ht()}),jsxRuntimeExports.jsx("g",{children:dt()})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-4 left-4 z-20 flex items-center space-x-2 bg-black/50 backdrop-blur-sm rounded-lg p-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>d(at=>({...at,scale:Math.min(2,at.scale*1.2)})),className:"px-3 py-1 bg-purple-600 text-white rounded text-xs hover:bg-purple-700 transition",children:"+"}),jsxRuntimeExports.jsxs("span",{className:"text-white text-xs px-2",children:[Math.round(c.scale*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:()=>d(at=>({...at,scale:Math.max(.5,at.scale*.8)})),className:"px-3 py-1 bg-purple-600 text-white rounded text-xs hover:bg-purple-700 transition",children:"-"}),jsxRuntimeExports.jsx("button",{onClick:()=>d({x:0,y:0,scale:1}),className:"px-3 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700 transition",children:"Reset"})]}),renderLegend(),jsxRuntimeExports.jsxs("div",{className:"absolute top-4 left-4 z-20 bg-black/80 backdrop-blur-sm rounded-lg p-3 border border-white/20",children:[jsxRuntimeExports.jsx("h4",{className:"text-xs font-bold text-white mb-2",children:"MAP LEGEND"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-yellow-400",children:"Gold (Gilded): Mastery Reclaimed"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-purple-400 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-purple-400",children:"Purple (Unlocked): Current Objective"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-gray-600 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Gray (Locked): Future Territory"})]})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"absolute top-4 right-4 z-20 bg-black/80 backdrop-blur-md rounded-lg p-4 max-w-xs",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-2",children:s.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-xs mb-2",children:s.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:"Territory:"}),jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-1 rounded",style:{backgroundColor:ot(s.sector)},children:s.sector})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:"Difficulty:"}),jsxRuntimeExports.jsx("span",{className:"text-yellow-400 text-xs",children:s.difficulty})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:"Est. Time:"}),jsxRuntimeExports.jsx("span",{className:"text-blue-400 text-xs",children:s.estimatedTime})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:"XP Required:"}),jsxRuntimeExports.jsx("span",{className:"text-purple-400 text-sm font-semibold",children:s.xpRequired})]})]})}),b.length>0&&jsxRuntimeExports.jsx(ReconMissionButton,{onStartRecon:ut}),jsxRuntimeExports.jsx(AnimatePresence,{children:et&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>tt(!1)}),jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative bg-gray-900 border-2 border-blue-500 rounded-lg shadow-2xl shadow-blue-500/50 p-6 max-w-md w-full mx-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-blue-400 mb-2",children:"RECON BRIEFING"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Review your conquered concepts"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3 mb-6",children:_&&_.length>0?_.map((at,ct)=>jsxRuntimeExports.jsxs("div",{className:"bg-gray-800 border border-blue-500/30 rounded-lg p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-blue-400 font-semibold",children:[at.achievement_type||"Concept"," #",ct+1]}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:new Date(at.earned_at).toLocaleDateString()})]}),jsxRuntimeExports.jsx("div",{className:"text-gray-300 text-sm mt-1",children:at.concept_id||at.node_id||"Unknown Concept"})]},at.id||ct)):jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-400 py-4",children:[jsxRuntimeExports.jsx("div",{className:"text-blue-400 mb-2",children:""}),jsxRuntimeExports.jsx("p",{children:"No completed concepts available for recon"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>tt(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Close Briefing"}),_&&_.length>0&&jsxRuntimeExports.jsx("button",{className:"px-4 py-2 bg-blue-500 hover:bg-blue-400 text-black rounded-lg font-semibold transition-colors",children:"Start Review"})]})]})]})})]})},CommandCalc=({isOpen,onClose,currentStronghold,onTacticalTip})=>{const[display,setDisplay]=reactExports.useState("0"),[memory,setMemory]=reactExports.useState(""),[activeKeys,setActiveKeys]=reactExports.useState({}),[position,setPosition]=reactExports.useState({x:100,y:100}),[isDragging,setIsDragging]=reactExports.useState(!1),[isMinimized,setIsMinimized]=reactExports.useState(!1);reactExports.useRef(null);const{isInAuraMode}=useNeuro(),nodeContent=getNodeById(currentStronghold==null?void 0:currentStronghold.id),tacticalTip=(nodeContent==null?void 0:nodeContent.tacticalTip)||"",keys=[{id:"2nd",label:"2nd",row:1,col:1,color:"bg-gray-600"},{id:"mode",label:"MODE",row:1,col:2,color:"bg-gray-600"},{id:"del",label:"DEL",row:1,col:3,color:"bg-gray-600"},{id:"algebra",label:"ALGEBRA",row:1,col:4,color:"bg-gray-600"},{id:"7",label:"7",row:2,col:1,color:"bg-gray-700"},{id:"8",label:"8",row:2,col:2,color:"bg-gray-700"},{id:"9",label:"9",row:2,col:3,color:"bg-gray-700"},{id:"div",label:"",row:2,col:4,color:"bg-gray-700"},{id:"x",label:"",row:2,col:5,color:"bg-gray-700"},{id:"4",label:"4",row:3,col:1,color:"bg-gray-700"},{id:"5",label:"5",row:3,col:2,color:"bg-gray-700"},{id:"6",label:"6",row:3,col:3,color:"bg-gray-700"},{id:"1",label:"1",row:3,col:4,color:"bg-gray-700"},{id:"0",label:"0",row:3,col:5,color:"bg-gray-700"},{id:"on",label:"ON",row:4,col:1,color:"bg-green-600"},{id:"sto",label:"STO",row:4,col:2,color:"bg-gray-600"},{id:"off",label:"OFF",row:4,col:3,color:"bg-gray-600"},{id:"frac",label:"n/d",row:5,col:1,color:"bg-blue-600"},{id:"fd",label:"fd",row:5,col:2,color:"bg-blue-600"},{id:"power",label:"^",row:5,col:3,color:"bg-blue-600"},{id:"square",label:"x",row:5,col:4,color:"bg-blue-600"},{id:"sqrt",label:"",row:5,col:5,color:"bg-blue-600"},{id:"enter",label:"ENTER",row:6,col:1,color:"bg-gray-600",span:2},{id:"approx",label:"",row:6,col:3,color:"bg-blue-600"},{id:"clear",label:"CLEAR",row:6,col:4,color:"bg-orange-600"},{id:"ans",label:"ANS",row:6,col:5,color:"bg-gray-600"}],handleKeyPress=keyId=>{if(setActiveKeys(e=>({...e,[keyId]:!0})),isInAuraMode&&tacticalTip&&(tacticalTip.includes("fraction")&&(keyId==="frac"||keyId==="fd")||tacticalTip.includes("power")&&(keyId==="power"||keyId==="square"))){setTimeout(()=>{setActiveKeys(e=>({...e,[keyId]:!1}))},200);return}switch(setTimeout(()=>{setActiveKeys(e=>({...e,[keyId]:!1}))},100),keyId){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":setDisplay(e=>e==="0"?keyId:e+keyId);break;case".":setDisplay(e=>e.includes(".")?e:e+".");break;case"clear":setDisplay("0"),setMemory("");break;case"enter":try{const result=eval(display);setDisplay(result.toString()),setMemory(result.toString())}catch{setDisplay("ERROR")}break}},getGlowClass=e=>isInAuraMode&&tacticalTip&&(tacticalTip.includes("fraction")&&(e==="frac"||e==="fd")||tacticalTip.includes("power")&&(e==="power"||e==="square"))?"bg-yellow-400 shadow-yellow-400/50 border-2 border-yellow-400":"bg-gray-600";return reactExports.useEffect(()=>{if(isInAuraMode&&tacticalTip){const e=tacticalTip.includes("fraction"),s=tacticalTip.includes("power")||tacticalTip.includes("square");(e||s)&&onTacticalTip({type:e?"fraction":"power",message:`Ghost Calculator keys are glowing for ${e?"fraction":"power"} operations`})}},[isInAuraMode,tacticalTip]),jsxRuntimeExports.jsx(AnimatePresence,{children:isOpen&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-xl",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-gray-800 to-gray-900 border-2 border-gray-600 rounded-2xl shadow-2xl",style:{width:isMinimized?"300px":"500px",height:isMinimized?"200px":"600px",left:position.x,top:position.y,position:"fixed"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4 bg-gradient-to-r from-blue-900/50 to-blue-800/50 p-3 rounded-lg border border-blue-400/30",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full animate-pulse shadow-[0_0_10px_rgba(59,130,246,0.5)]"}),jsxRuntimeExports.jsx("span",{className:"text-blue-300 text-sm font-bold tracking-wider",children:"COMMAND CALC: TACTICAL HUD"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>setIsMinimized(!isMinimized),className:"w-6 h-6 flex items-center justify-center rounded bg-blue-700/50 hover:bg-blue-600/50 text-blue-300 text-xs border border-blue-400/30",children:isMinimized?"":""}),jsxRuntimeExports.jsx("button",{onClick:onClose,className:"w-6 h-6 flex items-center justify-center rounded bg-red-600/80 hover:bg-red-500/80 text-white text-xs ml-2 border border-red-400/30",children:""})]})]}),!isMinimized&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-black to-blue-950 border border-blue-400/30 rounded-lg p-3 mb-4 shadow-[0_0_20px_rgba(59,130,246,0.2)]",children:jsxRuntimeExports.jsx("div",{className:"text-right text-blue-400 text-2xl font-mono min-h-[40px] flex items-center justify-end shadow-[0_0_10px_rgba(59,130,246,0.3)]",children:display})}),jsxRuntimeExports.jsx("div",{className:"bg-gray-800 border border-gray-600 rounded p-2 mb-4",children:jsxRuntimeExports.jsxs("div",{className:"text-gray-400 text-xs font-mono text-center",children:["MEMORY: ",memory||"EMPTY"]})}),jsxRuntimeExports.jsx("div",{className:"bg-gray-900 rounded-lg p-2",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-5 gap-1",children:keys.map(e=>jsxRuntimeExports.jsx("button",{onMouseDown:()=>handleKeyPress(e.id),className:`
                          relative h-12 rounded transition-all duration-100 font-mono text-xs font-bold
                          ${e.span===2?"col-span-2":""}
                          ${getGlowClass(e.id)}
                          ${activeKeys[e.id]?"scale-95 ring-2 ring-white/50":"hover:scale-105"}
                          ${e.color}
                        `,children:e.label},e.id))})}),tacticalTip&&jsxRuntimeExports.jsx("div",{className:"mt-4 p-3 bg-blue-900/50 border border-blue-400/30 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),jsxRuntimeExports.jsxs("p",{className:"text-blue-300 text-xs",children:["Tactical Sync: ",tacticalTip]})]})}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:"Drag to move  Click keys to calculate  Minimize to keep visible  Close to dismiss"})})]})]})})})},IdentityStrike=({trigger:e,onComplete:s})=>{const[i,o]=reactExports.useState([]),[a,c]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&d()},[e]);const d=()=>{c(!0);const b=Array.from({length:50},(j,_)=>({id:_,x:0,y:0,angle:Math.PI*2*_/50+Math.random()*.5,velocity:5+Math.random()*10,size:2+Math.random()*4,lifetime:1+Math.random()*2,delay:Math.random()*.2,type:Math.random()>.7?"spark":"particle"}));o(b),setTimeout(()=>{c(!1),o([]),s==null||s()},3e3)},h={initial:{x:0,y:0,scale:0,opacity:1,rotate:0},animate:b=>({x:Math.cos(b.angle)*b.velocity*100,y:Math.sin(b.angle)*b.velocity*100,scale:b.type==="spark"?[0,1.5,.5,0]:[0,1,0],opacity:[1,1,.8,0],rotate:b.type==="spark"?360:0,transition:{duration:b.lifetime,delay:b.delay,ease:b.type==="spark"?"easeOut":"easeOutBack"}}),exit:{opacity:0,scale:0,transition:{duration:.2}}},g={initial:{scale:0,opacity:0},animate:{scale:[0,1.5,1],opacity:[0,.8,0],transition:{duration:1,ease:"easeOut"}},exit:{opacity:0}};return jsxRuntimeExports.jsx(AnimatePresence,{children:a&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center",children:[jsxRuntimeExports.jsx(motion.div,{variants:g,initial:"initial",animate:"animate",exit:"exit",className:"absolute w-32 h-32 rounded-full",style:{background:"radial-gradient(circle, #FFD700 0%, rgba(255, 215, 0, 0.4) 40%, transparent 70%)",filter:"blur(20px)",boxShadow:"0 0 60px #FFD700, 0 0 100px rgba(255, 215, 0, 0.5)"}}),jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,opacity:1},animate:{scale:[0,2,3],opacity:[1,.5,0],borderWidth:[4,2,0]},transition:{duration:1.5,ease:"easeOut"},className:"absolute w-24 h-24 rounded-full border-2",style:{borderColor:"#FFD700"}}),i.map(b=>jsxRuntimeExports.jsx(motion.div,{variants:h,custom:b,initial:"initial",animate:"animate",exit:"exit",className:"absolute rounded-full",style:{width:`${b.size}px`,height:`${b.size}px`,backgroundColor:b.type==="spark"?"#FFD700":"#FFA500",boxShadow:b.type==="spark"?"0 0 10px #FFD700, 0 0 20px rgba(255, 215, 0, 0.5)":"0 0 5px #FFA500",filter:b.type==="spark"?"blur(1px)":"none"}},b.id)),[...Array(8)].map((b,j)=>jsxRuntimeExports.jsx(motion.div,{initial:{pathLength:0,opacity:0,rotate:j*45},animate:{pathLength:1,opacity:[0,1,0],rotate:j*45+Math.random()*10-5},transition:{duration:.3+Math.random()*.2,delay:Math.random()*.3},className:"absolute",style:{width:"60px",height:"2px",background:"linear-gradient(90deg, transparent, #FFD700, transparent)",transformOrigin:"center",filter:"blur(1px)"}},`lightning-${j}`)),jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,opacity:1},animate:{scale:[0,5,0],opacity:[1,.8,0]},transition:{duration:.5,ease:"easeOut"},className:"absolute w-4 h-4 rounded-full",style:{backgroundColor:"#FFFFFF",boxShadow:"0 0 30px #FFD700, 0 0 60px rgba(255, 215, 0, 0.8)"}})]})})},API_ENDPOINTS={gemini:"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent",openai:"https://api.openai.com/v1/chat/completions"},ZONE_TEMPLATES={Alpha:{focus:"Fraction-to-Decimal",tacticalTip:"Tactical Tip: Use [n/d] key for fractions. Press [fd] to toggle between fraction and decimal.",context:"To secure this outpost, convert between fractions and decimals with precision.",examples:["Convert 3/4 to decimal","Convert 0.625 to fraction","Add: 2/3 + 1/4","Divide: (3/4)  (1/2)","Convert 2.125 to mixed number"]},Bravo:{focus:"Variable Substitution",tacticalTip:"Tactical Tip: Use [STO] to store values. Use [ALPHA] + [X,T,,n] for variables.",context:"To breach this stronghold, master calculator memory and variable operations.",examples:["If x = 5, evaluate 3x + 7","If y = -3, evaluate 2y + 4y","Store 42 in memory, then calculate 5x + MEM","If a = 7 and b = 3, evaluate ab - 2ab","Store  in memory, then calculate 2r"]},Charlie:{focus:"Formula Application",tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",context:"To fortify this position, apply formulas for volume and surface area.",examples:["Find volume of cylinder with radius 4, height 10","Find surface area of sphere with radius 6","Find volume of cone with radius 5, height 12","Find surface area of cylinder with radius 7, height 15","Find volume of sphere with radius 8"]},Delta:{focus:"Mean and Median",tacticalTip:"Tactical Tip: Use calculator memory for running totals. [2nd] [STAT] for statistics.",context:"To analyze this battlefield, calculate central tendency from data sets.",examples:["Find mean: 12, 15, 18, 21, 24","Find median: 8, 12, 16, 20, 25","Find mean: 45, 52, 48, 61, 59, 55","Find weighted mean: grades 80(20%), 85(30%), 90(50%)","Find standard deviation: 10, 12, 14, 16, 18"]}},FALLBACK_PROBLEMS={Alpha:[{problem:"Convert 3/4 to decimal",options:["0.75","0.34","0.25","0.8"],correct:"0.75",tacticalTip:"Tactical Tip: Use [n/d] key for fractions. Press [fd] to toggle between fraction and decimal.",explanation:"Step 1: Divide numerator by denominator. Step 2: 3  4 = 0.75",difficulty:2},{problem:"Convert 0.625 to fraction",options:["5/8","3/4","2/3","7/8"],correct:"5/8",tacticalTip:"Tactical Tip: Use [n/d] key for fractions. Press [fd] to toggle between fraction and decimal.",explanation:"Step 1: Write as fraction over 1000. Step 2: Simplify: 625/1000 = 5/8",difficulty:3}],Bravo:[{problem:"If x = 5, evaluate 3x + 7",options:["22","15","12","8"],correct:"22",tacticalTip:"Tactical Tip: Use [STO] to store values. Use [ALPHA] + [X,T,,n] for variables.",explanation:"Step 1: Substitute x = 5. Step 2: 3(5) + 7 = 15 + 7 = 22",difficulty:2},{problem:"If y = -3, evaluate 2y + 4y",options:["6","-6","18","-18"],correct:"6",tacticalTip:"Tactical Tip: Use [STO] to store values. Use [ALPHA] + [X,T,,n] for variables.",explanation:"Step 1: Substitute y = -3. Step 2: 2(-3) + 4(-3) = 2(9) - 12 = 18 - 12 = 6",difficulty:3}],Charlie:[{problem:"Find volume of cylinder with radius 4, height 10",options:["502.65","402.12","603.19","351.86"],correct:"502.65",tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",explanation:"Step 1: V = (4)(10). Step 2: V = (16)(10) = 160  502.65",difficulty:3},{problem:"Find surface area of sphere with radius 6",options:["452.39","301.59","603.19","150.80"],correct:"452.39",tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",explanation:"Step 1: SA = 4(6). Step 2: SA = 4(36) = 144  452.39",difficulty:3}],Delta:[{problem:"Find mean: 12, 15, 18, 21, 24",options:["18","15","21","16"],correct:"18",tacticalTip:"Tactical Tip: Use calculator memory for running totals. [2nd] [STAT] for statistics.",explanation:"Step 1: Sum all values: 12 + 15 + 18 + 21 + 24 = 90. Step 2: Divide by count: 90  5 = 18",difficulty:2},{problem:"Find median: 8, 12, 16, 20, 25",options:["16","12","20","14"],correct:"16",tacticalTip:"Tactical Tip: Use calculator memory for running totals. [2nd] [STAT] for statistics.",explanation:"Step 1: Order data: 8, 12, 16, 20, 25. Step 2: Middle value is 16",difficulty:2}]};class ProblemForge{constructor(s=null,i="gemini"){this.apiKey=s,this.provider=i,this.isOnline=navigator.onLine}checkOnlineStatus(){return this.isOnline=navigator.onLine,this.isOnline}async generateProblemWithAI(s,i){if(!this.checkOnlineStatus()||!this.apiKey)throw new Error("Offline or no API key available");const o=ZONE_TEMPLATES[s]||ZONE_TEMPLATES.Alpha,a=`Create a Level ${i} GED math problem for Zone ${s} with focus on ${o.focus}.
    
    Context: ${o.context}
    Tactical Tip: ${o.tacticalTip}
    
    Examples of similar problems:
    ${o.examples.map(c=>`- ${c}`).join(`
`)}
    
    Return a JSON response with this exact format:
    {
      "problem": "Clear problem statement with context",
      "options": ["Option A", "Option B", "Option C", "Option D"],
      "correct": "Correct answer from options",
      "tacticalTip": "Specific TI-30XS calculator instructions",
      "explanation": "Step-by-step solution explanation",
      "difficulty": ${i}
    }
    
    Requirements:
    - Problem must be appropriate for GED level
    - Include contextual hook related to military/overcomer theme
    - Provide 4 multiple choice options with one correct answer
    - Include specific calculator key instructions
    - Clear step-by-step explanation
    - Difficulty should match the requested level (1-5)`;try{let c;this.provider==="gemini"?c=await this.callGemini(a):this.provider==="openai"&&(c=await this.callOpenAI(a));const d=this.parseAIResponse(c);if(!this.validateProblemFormat(d))throw new Error("Invalid AI response format");return d}catch(c){throw console.error("AI generation failed:",c),c}}async callGemini(s){const i=await fetch(API_ENDPOINTS.gemini+`?key=${this.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}]})});if(!i.ok)throw new Error(`Gemini API error: ${i.status}`);return(await i.json()).candidates[0].content.parts[0].text}async callOpenAI(s){const i=await fetch(API_ENDPOINTS.openai,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:s}],temperature:.7,max_tokens:500})});if(!i.ok)throw new Error(`OpenAI API error: ${i.status}`);return(await i.json()).choices[0].message.content}parseAIResponse(s){try{const i=s.match(/\{[\s\S]*\}/);return JSON.parse(i?i[0]:s)}catch(i){throw console.error("Failed to parse AI response:",i),new Error("Invalid JSON response from AI")}}validateProblemFormat(s){const i=["problem","options","correct","tacticalTip","explanation","difficulty"];for(const o of i)if(!s[o])return console.error(`Missing required field: ${o}`),!1;return!Array.isArray(s.options)||s.options.length!==4?(console.error("Options must be an array of 4 elements"),!1):s.options.includes(s.correct)?s.difficulty<1||s.difficulty>5?(console.error("Difficulty must be between 1 and 5"),!1):!0:(console.error("Correct answer must be in options array"),!1)}getFallbackProblem(s,i){const o=FALLBACK_PROBLEMS[s]||FALLBACK_PROBLEMS.Alpha,a=o.filter(d=>d.difficulty<=i);if(a.length===0)return o[0];const c=Math.floor(Math.random()*a.length);return a[c]}async forgeProblem(s,i){try{if(this.checkOnlineStatus()&&this.apiKey){console.log(`Attempting AI generation for Zone ${s}, Level ${i}`);const a=await this.generateProblemWithAI(s,i);return a.isForge=!0,a.requiresGhostCalc=i>=4,a.source="ai",a}}catch(a){console.warn("AI generation failed, using mock forge:",a.message)}return console.log(`Using mock forge for Zone ${s}, Level ${i}`),generateMockProblem(s,i)}}const problemForge=new ProblemForge,generateMockProblem=(e,s)=>{const i={Alpha:{focus:"Fraction-to-Decimal",tacticalTip:"Tactical Tip: Use [n/d] key for fractions. Press [fd] to toggle between fraction and decimal.",context:"To secure this outpost, convert between fractions and decimals with precision.",generator:()=>{const c=Math.floor(Math.random()*20)+1,d=Math.floor(Math.random()*20)+1;if((Math.random()>.5?"to decimal":"to fraction")==="to decimal"){const g=(c/d).toFixed(3);return{problem:`Convert ${c}/${d} to decimal`,options:[g,(c/d).toFixed(2),(c/d).toFixed(1),(c+d)/d],correct:g,tacticalTip:"Tactical Tip: Use [n/d] key for fractions. Press [fd] to toggle between fraction and decimal.",explanation:`Step 1: Divide numerator by denominator. Step 2: ${c}  ${d} = ${g}`,difficulty:s}}else{const g=Math.random()*.9+.1,b=Math.floor(g),j=g-b,_=[2,4,5,8,10,16,20][Math.floor(Math.random()*7)],$=Math.round(j*_);return{problem:`Convert ${g.toFixed(3)} to fraction`,options:[`${b} ${$}/${_}`,`${$}/${_}`,`${b+1}/${_}`,`${b}/${_}`],correct:`${b} ${$}/${_}`,tacticalTip:"Tactical Tip: Use [n/d] key for fractions. Press [fd] to toggle between fraction and decimal.",explanation:`Step 1: Separate whole number and decimal. Step 2: Convert decimal part to fraction: ${j}  ${$}/${_}`,difficulty:s}}}},Bravo:{focus:"Variable Substitution",tacticalTip:"Tactical Tip: Use [STO] to store values. Use [ALPHA] + [X,T,,n] for variables.",context:"To breach this stronghold, master calculator memory and variable operations.",generator:()=>{const c=Math.floor(Math.random()*10)+1,d=Math.floor(Math.random()*10)+1,h=["+","-","",""],g=h[Math.floor(Math.random()*h.length)];let b,j;switch(g){case"+":b=`${c} + ${d}`,j=c+d;break;case"-":b=`${c} - ${d}`,j=c-d;break;case"":b=`${c}  ${d}`,j=c*d;break;case"":b=`${c}  ${d}`,j=(c/d).toFixed(2);break}return{problem:`If x = ${c} and y = ${d}, evaluate ${b}`,options:[j.toString(),(j+1).toString(),(j-1).toString(),(j*2).toString()],correct:j.toString(),tacticalTip:"Tactical Tip: Use [STO] to store values. Use [ALPHA] + [X,T,,n] for variables.",explanation:`Step 1: Substitute x = ${c} and y = ${d}. Step 2: Calculate ${b} = ${j}`,difficulty:s}}},Charlie:{focus:"Formula Application",tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",context:"To fortify this position, apply formulas for volume and surface area.",generator:()=>{const c=["cylinder","sphere","cone","rectangle"];switch(c[Math.floor(Math.random()*c.length)]){case"cylinder":const h=Math.floor(Math.random()*10)+1,g=Math.floor(Math.random()*10)+1,b=(Math.PI*h*h*g).toFixed(2);return{problem:`Find volume of cylinder with radius ${h}, height ${g}`,options:[b,(Math.PI*h*g).toFixed(2),(2*Math.PI*h*g).toFixed(2),(Math.PI*h*h).toFixed(2)],correct:b,tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",explanation:`Step 1: V = rh. Step 2: V = (${h})(${g}) = ${b}`,difficulty:s};case"sphere":const j=Math.floor(Math.random()*10)+1,_=(4*Math.PI*j*j).toFixed(2);return{problem:`Find surface area of sphere with radius ${j}`,options:[_,(2*Math.PI*j*j).toFixed(2),(Math.PI*j*j).toFixed(2),(3*Math.PI*j*j).toFixed(2)],correct:_,tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",explanation:`Step 1: SA = 4r. Step 2: SA = 4(${j}) = ${_}`,difficulty:s};case"cone":const $=Math.floor(Math.random()*10)+1,et=Math.floor(Math.random()*10)+1,tt=(1/3*Math.PI*$*$*et).toFixed(2);return{problem:`Find volume of cone with radius ${$}, height ${et}`,options:[tt,(Math.PI*$*$*et).toFixed(2),(.5*Math.PI*$*$*et).toFixed(2),(.25*Math.PI*$*$*et).toFixed(2)],correct:tt,tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",explanation:`Step 1: V = (1/3)rh. Step 2: V = (1/3)(${$})(${et}) = ${tt}`,difficulty:s};default:const nt=Math.floor(Math.random()*10)+1,it=Math.floor(Math.random()*10)+1,rt=Math.floor(Math.random()*10)+1,_e=nt*it*rt;return{problem:`Find volume of rectangular prism: ${nt}${it}${rt}`,options:[_e.toString(),(nt+it+rt).toString(),(nt*it).toString(),(nt*rt).toString()],correct:_e.toString(),tacticalTip:"Tactical Tip: Use [x] for squares, [] for roots. Store intermediate results.",explanation:`Step 1: V = l  w  h. Step 2: V = ${nt}  ${it}  ${rt} = ${_e}`,difficulty:s}}}},Delta:{focus:"Mean and Median",tacticalTip:"Tactical Tip: Use calculator memory for running totals. [2nd] [STAT] for statistics.",context:"To analyze this battlefield, calculate central tendency from data sets.",generator:()=>{const c=Math.floor(Math.random()*5)+5,d=[];for(let $=0;$<c;$++)d.push(Math.floor(Math.random()*50)+10);const h=(d.reduce(($,et)=>$+et,0)/d.length).toFixed(2),g=[...d].sort(($,et)=>$-et),b=d.length%2===0?((g[d.length/2-1]+g[d.length/2])/2).toFixed(2):g[Math.floor(d.length/2)],j=Math.random()>.5?"mean":"median",_=j==="mean"?h:b.toString();return{problem:`Find ${j}: ${d.join(", ")}`,options:[_,(parseFloat(_)+1).toString(),(parseFloat(_)-1).toString(),d[0].toString()],correct:_,tacticalTip:"Tactical Tip: Use calculator memory for running totals. [2nd] [STAT] for statistics.",explanation:j==="mean"?`Step 1: Sum all values: ${d.reduce(($,et)=>$+et,0)}. Step 2: Divide by count: ${d.length} = ${h}`:`Step 1: Order data: ${g.join(", ")}. Step 2: Middle value is ${b}`,difficulty:s}}}},a=(i[e]||i.Alpha).generator();return a.isForge=!0,a.requiresGhostCalc=s>=4,a.source="mock",a.zone=e,a},ProblemEngine=({nodeId:e,onProblemComplete:s,onSuccess:i,userName:o})=>{const{triggerIdentityStrike:a,triggerCorrectAnswerStrike:c,switchMode:d,isInVerveMode:h,isInAuraMode:g,isInForgeMode:b,stressLevel:j,isStressed:_,isStalled:$,isJittery:et,isRaging:tt,resetStress:nt}=useNeuro(),[it,rt]=reactExports.useState("concrete"),[_e,st]=reactExports.useState(null),[ot,ut]=reactExports.useState(""),[ht,dt]=reactExports.useState(""),[at,ct]=reactExports.useState(0),[lt,ft]=reactExports.useState(0),[mt,gt]=reactExports.useState(0),[jt,yt]=reactExports.useState(!1),[vt,Ct]=reactExports.useState(!1),[pt,xt]=reactExports.useState(0),[Et,bt]=reactExports.useState(""),[Tt,Ut]=reactExports.useState(0),[Ft,qt]=reactExports.useState(!1),[Ot,St]=reactExports.useState(!1),[Nt,Pt]=reactExports.useState(0),[It,Vt]=reactExports.useState(!1),[zt,Ht]=reactExports.useState(!1),[Gt,Xt]=reactExports.useState(!1),[Wt,Kt]=reactExports.useState(!1),[kt,wt]=reactExports.useState(0),[Rt,Dt]=reactExports.useState(""),[Mt,Zt]=reactExports.useState(""),[ur,sr]=reactExports.useState(!1),[er]=reactExports.useState(()=>new SocraticCoPilot$1),[yr,dr]=reactExports.useState(0),[vr,tr]=reactExports.useState(!1),[Er,hr]=reactExports.useState(""),[wr,nr]=reactExports.useState(!1),ir=e||"ged-001",$t=getNodeById(ir),Yt=($t==null?void 0:$t.problems)||[];console.log("ProblemEngine Debug:"),console.log("- nodeId:",e),console.log("- safeNodeId:",ir),console.log("- nodeContent:",$t),console.log("- problems available:",Yt.length),console.log("- currentProblem:",_e);const pr=reactExports.useCallback(async _t=>{try{const Lt={consecutiveMisses:mt,streak:lt,totalCorrect:pt},At=await missionCoach.generateAuraCoaching(_t,Lt);return Dt(At.message),At.message}catch(Lt){return console.error("Mission Coach error:",Lt),"Warrior, let the Command Calc be your tactical advantage in this operation."}},[mt,lt,pt]),or=reactExports.useCallback(()=>{if(pt>0&&pt%5===0){const _t={totalCorrect:pt,streak:lt,commandCalcUsage:Tt,problemsSolved:pt,accuracyRate:Math.round((pt||0)/((pt||0)+(Nt||0))*100)||0,recentSkills:_e!=null&&_e.tacticalTip?[_e.tacticalTip]:[]};missionCoach.generateCombatCommendation(_t).then(Lt=>{Zt(Lt.message),sr(!0),setTimeout(()=>{sr(!1)},5e3)})}},[pt,lt,Tt,Nt,_e]);reactExports.useEffect(()=>{pt>0&&or()},[pt,or]),reactExports.useEffect(()=>{const Lt=setInterval(async()=>{try{const{data:At}=await supabase.from("friction_logs").select("friction_level").eq("user_id",o).eq("concept_id",(_e==null?void 0:_e.conceptId)||"unknown").eq("status","active").single();if(At){if(dr(At.friction_level),er.trackFriction((_e==null?void 0:_e.conceptId)||"unknown"),At.friction_level<3)nr(!1),tr(!1);else if(At.friction_level>=3&&At.friction_level<=4)nr(!0),tr(!1);else if(At.friction_level>=5){const Bt=er.generateSocraticHint((_e==null?void 0:_e.question)||"",(_e==null?void 0:_e.conceptId)||"unknown",At.friction_level);hr(Bt.hint),tr(!0)}}}catch(At){console.error("Failed to monitor friction:",At)}},2e3);return()=>clearInterval(Lt)},[o,_e,er]);const ar=async(_t,Lt)=>{try{const At=await problemForge.forgeProblem(_t,Lt);return At?(Xt(!0),At):null}catch(At){return console.error("Failed to forge problem:",At),null}},rr=_t=>{if(!_t)return"";if(_t.equation){if(_t.equation.includes("x")&&_t.equation.includes("="))return"Think of this like a balance scale. To keep it even, whatever we do to one side, we must do to the other. If we divide the left side by 2, we do the same to the right!";if(_t.equation.includes("y")&&_t.equation.includes("="))return"Imagine this as a recipe. The equation tells us exactly how to combine ingredients to get our result. Follow the steps precisely!"}return _t.method==="elimination"?"Think of this like solving a puzzle with two pieces. Sometimes we can combine the pieces to eliminate one variable, making it easier to see the solution!":g&&($t!=null&&$t.tacticalTip)?((_e==null?void 0:_e.difficulty)>=4&&dt(" This stronghold requires your machinery. Don't carry the weight yourselfuse Command Calc."),`Command Center Intelligence: ${$t.tacticalTip}`):_t.method==="substitution"?"This is like a detective story. We find one clue, then use it to uncover the next piece of the mystery!":_t.method==="factoring"?"Think of this like breaking down a big number into its building blocks. We're finding the pieces that multiply together to give us our original number!":_t.concept==="slope"?"Imagine walking up a hill. The slope tells us how steep the hill is - how much we go up for every step we take forward!":_t.concept==="y-intercept"?"Think of this as where our journey begins on the y-axis. It's our starting point before we start climbing the hill!":"Every problem has a story. Let's break it down step by step, like following a recipe. Each step builds on the last!"};reactExports.useCallback(()=>Yt[it]||Yt.concrete,[it]);const Jt=reactExports.useCallback(async()=>{if(Yt.length===0){const Lt=($t==null?void 0:$t.sector)||"Alpha",At=Math.min(5,Math.max(3,Math.floor(at/5)+1)),Bt=await ar(Lt,At);if(Bt){st(Bt),ut(""),dt(""),Pt(0);return}}const _t=Yt[Math.floor(Math.random()*Yt.length)];st(_t),ut(""),dt(""),Pt(0),Xt(!1)},[Yt,$t,at,ar]);reactExports.useEffect(()=>{Jt()},[e,Jt]),reactExports.useEffect(()=>{_e!=null&&_e.requiresGhostCalc&&!It&&(Vt(!0),dt(" Warning: Tactical Tool Required - Don't carry the weight yourselfuse Command Calc."))},[_e,It]),reactExports.useEffect(()=>{if(_e!=null&&_e.requiresGhostCalc){const _t=document.querySelector(".command-calc-icon");_t&&_t.classList.add("animate-pulse","shadow-[0_0_15px_rgba(255,215,0,0.6)]")}else{const _t=document.querySelector(".command-calc-icon");_t&&_t.classList.remove("animate-pulse","shadow-[0_0_15px_rgba(255,215,0,0.6)]")}},[_e==null?void 0:_e.requiresGhostCalc]),reactExports.useEffect(()=>{(tt||et||$)&&it!=="concrete"&&(rt("concrete"),d("VERVE"),dt(" Switching to Concrete mode for better understanding"),nt())},[tt,et,$,it,d,rt,dt,nt]);const lr=reactExports.useCallback(async()=>{if(!_e||!ot.trim()||jt)return;yt(!0);const _t=_e.correct||_e.answer;if(ot.trim().toLowerCase()===_t.toLowerCase()){const At=_e!=null&&_e.requiresGhostCalc?2:1;ct(Bt=>Bt+At),ft(Bt=>Bt+1),xt(Bt=>Bt+1),gt(0),Pt(0),At===2?(Ht(!0),dt(" TACTICAL MASTERY! +2 Reps for using Command Calculator!")):(Ht(!1),dt("Excellent! You're building momentum!")),setTimeout(()=>{dt(" Great job! Keep going!")},500);try{const Bt=localStorage.getItem("gideon_user_name")||"anonymous";await supabase.from("mastery_ledger").insert([{user_id:Bt,node_id:e,status:"mastered",created_at:new Date().toISOString()}]),console.log("Mastery recorded for node:",e)}catch(Bt){console.error("Failed to record mastery:",Bt)}i&&i(),at>=4&&(qt(!0),s&&s(e,{correctAnswers:pt+1,auraUsage:Tt,nodeIcon:($t==null?void 0:$t.icon)||""})),setTimeout(()=>{yt(!1),ut(""),dt(""),Jt()},2e3)}else{const At=mt+1,Bt=Nt+1;if(gt(At),Pt(Bt),ft(0),At>=1&&!Wt&&(Kt(!0),wt(0)),Bt===2&&!showAuraCoach){if(setShowAuraCoach(!0),d("AURA"),pr(_e).then(Qt=>{dt(` MISSION COACH: ${Qt}`)}),nt(),_e){const Qt=rr(_e);bt(Qt),Ut(gr=>gr+1)}setTimeout(()=>{setShowAuraCoach(!1),Ct(!0)},4e3)}else if(At>=2&&!Ot){St(!0),d("AURA"),dt(" Feeling frustrated? Let's take a moment to breathe and reset your mind."),nt();try{const Qt=localStorage.getItem("gideon_user_name")||"anonymous";supabase.from("trauma_logs").insert([{user_id:Qt,event_type:"auto_aura_trigger",trigger:"consecutive_misses",stress_level_before:j,created_at:new Date().toISOString()}])}catch(Qt){console.error("Failed to log auto Aura trigger:",Qt)}setTimeout(()=>{St(!1),dt("Now, let's look at the solution together."),Ct(!0)},3e3)}else dt("Not quite right. Would you like to review the solution?"),Ct(!0);setTimeout(()=>{yt(!1)},1e3)}},[_e,ot,mt,lt,at,e,i,s,Jt,Wt,showAuraCoach,Ot,Nt,jt,d,nt,j,Tt,pt,$t,rr]),fr=()=>{if(_e){const _t=rr(_e);bt(_t),Ut(Lt=>Lt+1)}d("AURA"),Ct(!1),dt(" Switching to review mode. Let's break this down together.")},mr=()=>{var _t;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Pictorial Mode"}),jsxRuntimeExports.jsx("p",{className:"text-white/70",children:"Use visual models to understand the problem"})]}),_e&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[jsxRuntimeExports.jsx("div",{className:"text-white text-lg font-semibold mb-4 text-center",children:_e.question}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center mb-6",children:[_e.diagram==="pizza"&&jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0},animate:{scale:1},className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"w-32 h-32 relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 rounded-full bg-yellow-500 border-4 border-yellow-600",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 w-0 h-0 border-l-8 border-l-transparent border-t-8 border-t-transparent transform rotate-45 origin-top-left"}),jsxRuntimeExports.jsx("div",{className:"absolute top-8 right-1/2 w-0 h-0 border-l-8 border-l-transparent border-t-8 border-t-transparent transform -rotate-45 origin-top-right"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 w-0 h-0 border-l-8 border-l-transparent border-t-8 border-t-transparent transform rotate-45 origin-top-left"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 right-1/2 w-0 h-0 border-l-8 border-l-transparent border-t-8 border-t-transparent transform -rotate-45 origin-top-right"})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 w-0 h-0 border-l-8 border-l-transparent border-t-8 border-t-transparent transform rotate-45 origin-top-left"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-1/2 w-0 h-0 border-l-8 border-l-transparent border-b-8 border-b-transparent transform -rotate-45 origin-bottom-left"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-1/2 w-0 h-0 border-l-8 border-l-transparent border-b-8 border-b-transparent transform rotate-45 origin-bottom-right"})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 left-1/2 w-16 h-16 bg-red-500 rounded-full flex items-center justify-center text-white font-bold",children:"1/4"})]}),_e.diagram==="bars"&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"flex space-x-4",children:(_t=_e.bars)==null?void 0:_t.map((Lt,At)=>jsxRuntimeExports.jsx(motion.div,{initial:{scaleY:0},animate:{scaleY:1},transition:{delay:At*.2},className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"w-12 h-24 bg-blue-500 rounded relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-blue-600 rounded-b",style:{height:`${Lt/3*24}px`}}),jsxRuntimeExports.jsxs("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-white text-xs font-semibold",children:[Lt,"/3"]})]})},At))}),_e.diagram==="percentage"&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"w-32 h-32 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-2 bg-green-500 rounded-full"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-2 bg-green-600 rounded-full",style:{clipPath:`polygon(50% 0%, ${100-_e.value}% 0%, ${100-_e.value}% 100%, 50% 100%)`}}),jsxRuntimeExports.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-sm font-bold",children:[_e.value,"%"]})]})})]})]})]})},xr=()=>jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Abstract Mode"}),jsxRuntimeExports.jsx("p",{className:"text-white/70",children:"Solve using algebraic thinking"})]}),_e&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[jsxRuntimeExports.jsx("div",{className:"text-white text-lg font-semibold mb-6 text-center font-mono",children:_e.equation}),jsxRuntimeExports.jsxs("div",{className:"text-center text-sm text-white/60 mb-4",children:["Solve for: ",jsxRuntimeExports.jsx("span",{className:"text-yellow-400 font-bold",children:_e.variable})]}),mt>=1&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-orange-400 text-sm",children:" Strategic insight: Focus on the position of the digit. Every place holds power."})]})]});return jsxRuntimeExports.jsxs("div",{className:"w-full h-full bg-gray-800 rounded-lg p-6",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 space-x-2",children:["concrete","pictorial","abstract"].map(_t=>jsxRuntimeExports.jsx("button",{onClick:()=>rt(_t),className:`px-4 py-2 rounded-lg font-semibold transition-all ${it===_t?"bg-purple-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:_t.charAt(0).toUpperCase()+_t.slice(1)},_t))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-white",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Score: "}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-yellow-400 ml-2",children:at})]}),jsxRuntimeExports.jsxs("div",{className:"text-white",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Streak: "}),jsxRuntimeExports.jsx("span",{className:"text-xl font-bold text-green-400 ml-2",children:lt})]})]}),jsxRuntimeExports.jsxs("div",{className:"min-h-[400px]",children:[Gt&&jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 bg-purple-600/20 border border-purple-400/30 rounded-lg px-3 py-2",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsx("span",{className:"text-purple-300 text-sm font-semibold",children:"AI FORGED PROBLEM"}),jsxRuntimeExports.jsx("span",{className:"text-purple-400 text-xs",children:"Adapted to your progress"})]})}),it==="concrete"&&renderConcreteMode(),it==="pictorial"&&mr(),it==="abstract"&&xr()]}),It&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-xl",children:jsxRuntimeExports.jsxs(motion.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"bg-blue-600 border-2 border-blue-400 rounded-xl p-6 max-w-md mx-4 shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 mx-auto bg-blue-400 rounded-full flex items-center justify-center animate-pulse",children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Tactical Tool Required"}),jsxRuntimeExports.jsx("p",{className:"text-white/90",children:"Don't carry the weight yourselfuse Command Calculator!"}),jsxRuntimeExports.jsxs("div",{className:"mt-4 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-white/20 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-white/80",children:"High-level problems require your machinery"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 bg-white/20 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-white/80",children:"Level 4-5 problems need tactical tools"})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Vt(!1),className:"w-full py-3 bg-white text-blue-600 rounded-lg font-semibold transition hover:bg-gray-100",children:"I Understand - Continue"})]})}),zt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"fixed top-4 right-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-yellow-500 text-black px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xl font-bold",children:" DOUBLE REPS!"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"+2 for Ghost Calc mastery"})]})}),ur&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-50,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.8},className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-yellow-500 border-2 border-yellow-400 rounded-lg px-6 py-4 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center animate-pulse",children:jsxRuntimeExports.jsx("span",{className:"text-black font-bold",children:""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-yellow-900 font-bold text-sm",children:"COMBAT COMMENDATION"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-800 text-xs font-medium",children:Mt})]})]})})}),Wt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-xl",children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-green-900/95 to-green-800/95 border-2 border-green-400/50 rounded-3xl p-8 max-w-2xl w-full mx-4 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto bg-green-400 rounded-full flex items-center justify-center animate-pulse",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:""})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-green-300",children:"HOW TO WIN"}),jsxRuntimeExports.jsx("p",{className:"text-green-200/80 text-sm",children:"Let me show you the exact sequence to solve this problem"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-green-400/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-green-400 font-semibold text-sm mb-2",children:"PROBLEM:"}),jsxRuntimeExports.jsx("p",{className:"text-green-200 text-lg",children:(_e==null?void 0:_e.problem)||(_e==null?void 0:_e.question)})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-green-400/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-green-400 font-semibold text-sm mb-2",children:"TACTICAL TIP:"}),jsxRuntimeExports.jsx("p",{className:"text-green-200 text-sm",children:(_e==null?void 0:_e.tacticalTip)||($t==null?void 0:$t.tacticalTip)})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-green-400/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-green-400 font-semibold text-sm mb-2",children:"STEP-BY-STEP:"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:_e!=null&&_e.explanation?jsxRuntimeExports.jsx("p",{className:"text-green-200 text-sm leading-relaxed",children:_e.explanation}):_e!=null&&_e.solution?_e.solution.map((_t,Lt)=>jsxRuntimeExports.jsx("p",{className:"text-green-200 text-sm",children:_t},Lt)):jsxRuntimeExports.jsx("p",{className:"text-green-200 text-sm",children:"Follow the tactical tip above to solve this problem."})})]}),(_e==null?void 0:_e.requiresGhostCalc)&&jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-yellow-400/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-yellow-400 font-semibold text-sm mb-2",children:"COMMAND CALCULATOR SEQUENCE:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center animate-pulse shadow-[0_0_15px_rgba(255,215,0,0.6)]",children:jsxRuntimeExports.jsx("span",{className:"text-black font-bold",children:""})}),jsxRuntimeExports.jsx("p",{className:"text-yellow-200 text-sm",children:"Use the Command Calculator with the tactical sequence above"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Kt(!1),wt(0),ut(""),dt("Now try it with the tactical guidance!")},className:"flex-1 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition",children:"I'VE GOT IT"}),jsxRuntimeExports.jsx("button",{onClick:()=>{Kt(!1),wt(0),ut(""),dt("Skipping this problem..."),Jt()},className:"px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-semibold transition",children:"Skip"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{type:"text",value:ot,onChange:_t=>ut(_t.target.value),onKeyPress:_t=>_t.key==="Enter"&&lr(),placeholder:"Type your answer here...",className:"w-full px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:border-purple-500 focus:outline-none",disabled:jt}),ht&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`text-center p-3 rounded-lg ${ht.includes("right")||ht.includes("Great")?"bg-green-600":"bg-orange-600"}`,children:ht}),Et&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-blue-900/30 border border-blue-500/30 rounded-lg p-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("h4",{className:"text-blue-300 font-semibold text-sm",children:"Mental Model"})]}),jsxRuntimeExports.jsx("p",{className:"text-blue-200 text-sm leading-relaxed",children:Et}),(_e==null?void 0:_e.solution)&&jsxRuntimeExports.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-500/30",children:[jsxRuntimeExports.jsx("p",{className:"text-blue-300 font-semibold text-xs mb-2",children:"Step-by-Step:"}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:_e.solution.map((_t,Lt)=>jsxRuntimeExports.jsx("p",{className:"text-blue-200 text-xs",children:_t},Lt))})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-blue-500/30",children:jsxRuntimeExports.jsx("p",{className:"text-blue-300 text-xs italic",children:" This isn't a mistake; it's a recalibration. You're getting stronger."})}),jsxRuntimeExports.jsx("button",{onClick:()=>{bt(""),ut(""),dt(""),Jt(),d("VERVE")},className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold text-sm transition",children:"RE-ENGAGE VERVE"})]}),vt&&jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:fr,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition",children:" Review Solution"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:lr,disabled:jt||!ot.trim(),className:"flex-1 py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px] touch-manipulation",children:jt?"Checking...":"Check Answer"}),vt&&jsxRuntimeExports.jsx("button",{onClick:()=>{Ct(!1),ut(""),dt(""),Jt()},className:"px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-semibold transition",children:"Skip"})]})]})]})},ExamEngine$1=({nodeId:e,onComplete:s,userName:i})=>{const{stressLevel:o,isStressed:a}=useNeuro(),[c,d]=reactExports.useState("ready"),[h,g]=reactExports.useState(900),[b,j]=reactExports.useState(0),[_,$]=reactExports.useState([]),[et,tt]=reactExports.useState([]),[nt,it]=reactExports.useState(null),[rt,_e]=reactExports.useState(!1),st=getNodeById(e),ot=(st==null?void 0:st.problems)||[],ut=ot[b];reactExports.useEffect(()=>{if(c==="active"&&h>0){const ft=setTimeout(()=>{g(mt=>mt-1)},1e3);return()=>clearTimeout(ft)}else h===0&&c==="active"&&at()},[c,h]),reactExports.useEffect(()=>{if(c==="active"){const ft=setInterval(()=>{tt(mt=>[...mt,o]),o>75?_e(!0):_e(!1)},2e3);return()=>clearInterval(ft)}},[c,o]);const ht=()=>{d("active"),it(Date.now()),$(new Array(ot.length).fill(null)),tt([])},dt=ft=>{const mt=[..._];mt[b]={answer:ft,timestamp:Date.now(),stressLevel:o,timeSpent:Date.now()-nt},$(mt),b<ot.length-1?j(gt=>gt+1):at()},at=()=>{d("completed");const ft=_.filter((xt,Et)=>xt&&xt.answer===ot[Et].answer).length,mt=ot.length>0?ft/ot.length*100:0,gt=et.length>0?et.reduce((xt,Et)=>xt+Et,0)/et.length:50,jt=Math.max(0,100-gt),yt=(Date.now()-nt)/1e3,vt=ot.length*90,Ct=Math.max(0,Math.min(100,vt/yt*100)),pt=mt*.5+jt*.3+Ct*.2;ct({accuracy:mt,stability:jt,efficiency:Ct,readinessScore:pt,correctAnswers:ft,totalTime:yt,stressSamples:et}),s&&s({accuracy:mt,stability:jt,efficiency:Ct,readinessScore:pt,correctAnswers:ft,totalTime:yt,passed:pt>=80})},ct=async ft=>{try{const mt=localStorage.getItem("gideon_user_name")||"anonymous";await supabase.from("exam_results").insert([{user_id:mt,exam_id:e,accuracy:ft.accuracy,stability:ft.stability,efficiency:ft.efficiency,readiness_score:ft.readinessScore,correct_answers:ft.correctAnswers,total_time:ft.totalTime,stress_samples:ft.stressSamples,passed:ft.passed,created_at:new Date().toISOString()}]),console.log("Exam results logged successfully")}catch(mt){console.error("Failed to log exam results:",mt)}},lt=ft=>{const mt=Math.floor(ft/60),gt=ft%60;return`${mt}:${gt.toString().padStart(2,"0")}`};return c==="ready"?jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-gray-800 rounded-lg p-6 flex flex-col items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto bg-red-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:""})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"GED Stronghold Exam"}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 max-w-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-red-400 font-semibold mb-2",children:"EXAM PROTOCOL"}),jsxRuntimeExports.jsxs("ul",{className:"text-gray-300 text-sm space-y-1 text-left",children:[jsxRuntimeExports.jsx("li",{children:" 15 minutes timed session"}),jsxRuntimeExports.jsx("li",{children:" 10 problems covering all foundations"}),jsxRuntimeExports.jsx("li",{children:" No review options during exam"}),jsxRuntimeExports.jsx("li",{children:" Stay calm and focused"})]})]}),jsxRuntimeExports.jsx("button",{onClick:ht,className:"px-8 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition transform hover:scale-105",children:"BEGIN EXAM"})]})}):c==="active"&&ut?jsxRuntimeExports.jsxs("div",{className:`w-full h-full bg-gray-800 rounded-lg p-6 relative ${rt?"ring-4 ring-blue-400/50":""}`,children:[jsxRuntimeExports.jsx(AnimatePresence,{children:rt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"radial-gradient(circle at center, rgba(59, 130, 246, 0.3) 0%, transparent 70%)",animation:"pulse 2s infinite"}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("div",{className:"text-white",children:jsxRuntimeExports.jsxs("span",{className:"text-sm",children:["Problem ",b+1," of ",ot.length]})}),jsxRuntimeExports.jsx("div",{className:`text-xl font-bold ${h<60?"text-red-400":"text-white"}`,children:lt(h)})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Solve for x:"}),jsxRuntimeExports.jsx("div",{className:"text-2xl text-center text-white font-mono",children:ut.equation})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-4",children:["5","6","8","10"].map(ft=>jsxRuntimeExports.jsxs("button",{onClick:()=>dt(ft),className:"py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition",children:["x = ",ft]},ft))}),o>75&&jsxRuntimeExports.jsx("div",{className:"mt-4 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-blue-400 text-sm",children:" Remember your breathing techniques"})})]}):null},ExamResults=({results:e,userName:s,onClose:i})=>{const[o,a]=reactExports.useState(!1),[c,d]=reactExports.useState({accuracy:0,stability:0,efficiency:0,readiness:0});reactExports.useEffect(()=>{const j=(_,$,et)=>{setTimeout(()=>{const nt=Date.now(),it=()=>{const rt=Date.now(),_e=Math.min((rt-nt)/2e3,1),st=Math.floor(_e*$);d(ot=>({...ot,[_]:st})),_e<1&&requestAnimationFrame(it)};requestAnimationFrame(it)},et)};j("accuracy",e.accuracy,200),j("stability",e.stability,600),j("efficiency",e.efficiency,1e3),j("readiness",e.readinessScore,1400)},[e]);const h=j=>j>=90?"text-green-400":j>=80?"text-blue-400":j>=70?"text-yellow-400":j>=60?"text-orange-400":"text-red-400",g=j=>j>=90?"EXCELLENT":j>=80?"PASS READY":j>=70?"GOOD":j>=60?"NEEDS WORK":"RETAKE REQUIRED",b=j=>{const _=Math.floor(j/60),$=Math.floor(j%60);return`${_}m ${$}s`};return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-xl",children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-gray-900/95 to-gray-800/95 border-2 border-gray-600/50 rounded-3xl p-8 max-w-2xl w-full mx-4 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Exam Results"}),jsxRuntimeExports.jsx("button",{onClick:i,className:"bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-full transition",children:""})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600/30",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"GIDEON READINESS SCORE"}),jsxRuntimeExports.jsxs("div",{className:`text-5xl font-black ${h(e.readinessScore)}`,children:[c.readiness,"%"]}),jsxRuntimeExports.jsx("div",{className:`text-lg font-semibold ${h(e.readinessScore)}`,children:g(e.readinessScore)})]}),e.passed&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:15,stiffness:300,delay:.5},className:"bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg p-3 mt-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-black font-bold",children:"PRIME CERTIFIED"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-lg p-4 border border-green-500/30",children:[jsxRuntimeExports.jsx("div",{className:"text-green-400 text-xs font-semibold mb-1",children:"ACCURACY"}),jsxRuntimeExports.jsxs("div",{className:`text-2xl font-bold ${h(e.accuracy)}`,children:[c.accuracy,"%"]}),jsxRuntimeExports.jsxs("div",{className:"text-gray-400 text-xs",children:[e.correctAnswers,"/",e.correctAnswers+(10-e.correctAnswers)," correct"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-lg p-4 border border-blue-500/30",children:[jsxRuntimeExports.jsx("div",{className:"text-blue-400 text-xs font-semibold mb-1",children:"STABILITY"}),jsxRuntimeExports.jsxs("div",{className:`text-2xl font-bold ${h(e.stability)}`,children:[c.stability,"%"]}),jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-xs",children:"Calm under pressure"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-lg p-4 border border-purple-500/30",children:[jsxRuntimeExports.jsx("div",{className:"text-purple-400 text-xs font-semibold mb-1",children:"EFFICIENCY"}),jsxRuntimeExports.jsxs("div",{className:`text-2xl font-bold ${h(e.efficiency)}`,children:[c.efficiency,"%"]}),jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-xs",children:b(e.totalTime)})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-700/50 rounded-lg p-4 border border-gray-600/30",children:jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.passed?`${s||"Warrior"}, you've demonstrated exceptional readiness! Your accuracy, stability, and efficiency show you're prepared for the GED challenge.`:`${s||"Warrior"}, you're on the right path. Focus on the areas that need improvement and retake the exam when you feel ready.`})}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>a(!o),className:"flex-1 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition",children:[o?"Hide":"Show"," Details"]}),jsxRuntimeExports.jsx("button",{onClick:i,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition transform hover:scale-105",children:"Continue"})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:o&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-black/20 rounded-lg p-4 border border-gray-600/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-semibold mb-3",children:"Performance Breakdown"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Questions Answered:"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[e.correctAnswers+(10-e.correctAnswers),"/10"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Correct Answers:"}),jsxRuntimeExports.jsx("span",{className:"text-green-400",children:e.correctAnswers})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Time Taken:"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:b(e.totalTime)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Average Time per Question:"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:b(e.totalTime/10)})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-600/30",children:[jsxRuntimeExports.jsx("h5",{className:"text-gray-400 text-xs font-semibold mb-2",children:"READINESS SCORE FORMULA"}),jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-xs",children:"(Accuracy  50%) + (Stability  30%) + (Efficiency  20%)"})]})]})})]})})})},WarriorJournal=()=>{const{triggerIdentityStrike:e,isInVerveMode:s,isInAuraMode:i,isInForgeMode:o,showIdentityMirror:a,identityMirrorMessage:c}=useNeuro(),[d,h]=reactExports.useState(!1),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState(!0),$=reactExports.useRef(null);reactExports.useEffect(()=>{(async()=>{try{_(!0);const{data:_e,error:st}=await supabase.from("warrior_journal").select("*").order("created_at",{ascending:!1});if(st){console.error("Error loading journal:",st);return}b(_e||[]),_(!1)}catch(_e){console.error("Error loading journal:",_e),_(!1)}})()},[]);const et=()=>{const rt=g.length;return rt>=50?"Legendary Warrior":rt>=30?"Elite Warrior":rt>=20?"Advanced Warrior":rt>=10?"Skilled Warrior":rt>=5?"Rising Warrior":"Novice Warrior"},tt=()=>g.some(_e=>_e.content.includes("Complex Problem Solving")||_e.content.includes("Guardian of Logic"))?"Maria, Guardian of Logic":`Maria, ${et()}`,nt=()=>g.some(rt=>rt.content.includes("Complex Problem Solving")||rt.content.includes("Guardian of Logic")),it=rt=>new Date(rt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!d),className:`fixed top-4 right-4 z-50 p-3 rounded-full shadow-lg transition-all duration-300 ${s?"bg-linen-100 text-gray-800":i?"bg-blue-900 text-blue-100":o?"bg-yellow-600 text-yellow-100":"bg-gray-800 text-gray-100"}`,style:{border:`2px solid ${s?"#D4AF37":i?"#00008B":o?"#D4AF37":"#4B5563"}`,backdropFilter:"blur(8px)"},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",children:"Journal"})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:d&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"fixed top-0 right-0 h-full w-80 max-w-md bg-linen-50 backdrop-blur-xl border-l-2 border-l-linen-100 shadow-2xl z-40 overflow-hidden",style:{fontFamily:"Georgia, serif"},ref:$,children:[jsxRuntimeExports.jsxs("div",{className:"bg-linen-100 border-b border-linen-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:""}),"Warrior Journal"]}),jsxRuntimeExports.jsx("button",{onClick:()=>h(!1),className:"text-gray-600 hover:text-gray-800 text-sm",children:""})]}),jsxRuntimeExports.jsxs("div",{className:"text-center mt-4 mb-2",children:[jsxRuntimeExports.jsx("div",{className:`text-xl font-serif text-gray-800 mb-1 ${nt()?"prime-ed-glow":""}`,children:tt()}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 uppercase tracking-widest",children:"The Ledger of Valor"})]}),a&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-600 p-4 mt-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-bold text-yellow-800",children:" Identity Mirror"}),jsxRuntimeExports.jsx("div",{className:"text-gray-800 text-sm italic",children:c})]})]}),jsxRuntimeExports.jsx("div",{className:"h-[calc(100vh-250px)] overflow-y-auto space-y-4 p-4",children:j?jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-600 pt-10",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-gray-300 border-t-yellow-600 mx-auto mb-4"}),"Loading your journey..."]}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-600 pt-10",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:""}),jsxRuntimeExports.jsx("div",{className:"text-lg",children:"Your journal is empty"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Begin your journey to record your valor."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:g.map(rt=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-linen-200 rounded-lg p-4 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:rt.type==="victory"?"":rt.type==="valor"?"":""}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold uppercase text-gray-400",children:rt.type})]}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-gray-400",children:it(rt.created_at)})]}),jsxRuntimeExports.jsx("div",{className:"text-gray-800 text-sm leading-relaxed",children:rt.content})]},rt.id))})})]})})]})},ProgressLedger=({userName:e,isOpen:s,onClose:i})=>{const[o,a]=reactExports.useState({totalTerritories:0,neuralStability:0,consistencyStreak:0,weeklyChallenges:0,stressResilience:0,isLoading:!0});reactExports.useEffect(()=>{s&&c()},[s]);const c=async()=>{try{const b=localStorage.getItem("gideon_user_name")||"anonymous",{data:j,error:_}=await supabase.from("mastery_ledger").select("node_id, created_at").eq("user_id",b).eq("status","mastered"),{data:$,error:et}=await supabase.from("trauma_logs").select("created_at, stress_level_before, trigger").eq("user_id",b).eq("event_type","self_regulation_win").eq("trigger","high_stress_breather"),tt=(j==null?void 0:j.length)||0,nt=($==null?void 0:$.length)||0,it=await d(b),rt=await h(b),_e=Math.min(100,nt*10);a({totalTerritories:tt,neuralStability:nt,consistencyStreak:it,weeklyChallenges:rt,stressResilience:_e,isLoading:!1})}catch(b){console.error("Failed to load progress data:",b),a(j=>({...j,isLoading:!1}))}},d=async b=>{try{const j=new Date(Date.now()-2592e6).toISOString(),{data:_}=await supabase.from("mastery_ledger").select("created_at").eq("user_id",b).eq("status","mastered").gte("created_at",j).order("created_at","asc");if(!_||_.length===0)return 0;const $={};_.forEach(it=>{const rt=new Date(it.created_at).toDateString();$[rt]=!0});const et=Object.keys($).sort((it,rt)=>new Date(it)-new Date(rt));let tt=0;const nt=new Date().toDateString();for(let it=et.length-1;it>=0;it--){const rt=et[it],_e=new Date;if(_e.setDate(_e.getDate()-(et.length-1-it)),rt===_e.toDateString())tt++;else break}return tt}catch(j){return console.error("Failed to calculate consistency streak:",j),0}},h=async b=>{try{const j=new Date(Date.now()-6048e5).toISOString(),{data:_}=await supabase.from("mastery_ledger").select("created_at").eq("user_id",b).eq("status","mastered").gte("created_at",j);return(_==null?void 0:_.length)||0}catch(j){return console.error("Failed to calculate weekly challenges:",j),0}},g=({value:b,duration:j=2e3})=>{const[_,$]=reactExports.useState(0);return reactExports.useEffect(()=>{if(s){const et=Date.now(),tt=()=>{const nt=Date.now(),it=Math.min((nt-et)/j,1),rt=Math.floor(it*b);it<1&&requestAnimationFrame(tt),$(rt)};requestAnimationFrame(tt)}},[s,b,j]),_};return s?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-xl",children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 border-2 border-purple-400/50 rounded-3xl p-8 max-w-lg w-full mx-4 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-purple-300",children:"Warrior Progress Ledger"}),jsxRuntimeExports.jsx("button",{onClick:i,className:"bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-full transition",children:""})]}),jsxRuntimeExports.jsx("div",{className:"w-20 h-20 mx-auto bg-purple-400 rounded-full flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:""})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-yellow-400/30",children:[jsxRuntimeExports.jsx("div",{className:"text-yellow-400 text-xs font-semibold mb-1",children:"TOTAL TERRITORIES"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-yellow-300",children:jsxRuntimeExports.jsx(g,{value:o.totalTerritories,duration:1500})}),jsxRuntimeExports.jsx("div",{className:"text-yellow-200 text-xs",children:"Reclaimed"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-blue-400/30",children:[jsxRuntimeExports.jsx("div",{className:"text-blue-400 text-xs font-semibold mb-1",children:"NEURAL STABILITY"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-blue-300",children:jsxRuntimeExports.jsx(g,{value:o.neuralStability,duration:1800})}),jsxRuntimeExports.jsx("div",{className:"text-blue-200 text-xs",children:"Sessions"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-green-400/30",children:[jsxRuntimeExports.jsx("div",{className:"text-green-400 text-xs font-semibold mb-1",children:"CONSISTENCY"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-green-300",children:jsxRuntimeExports.jsx(g,{value:o.consistencyStreak,duration:1200})}),jsxRuntimeExports.jsx("div",{className:"text-green-200 text-xs",children:"Day Streak"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-purple-400/30",children:[jsxRuntimeExports.jsx("div",{className:"text-purple-400 text-xs font-semibold mb-1",children:"WEEKLY"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-purple-300",children:jsxRuntimeExports.jsx(g,{value:o.weeklyChallenges,duration:1e3})}),jsxRuntimeExports.jsx("div",{className:"text-purple-200 text-xs",children:"Challenges"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-cyan-400/30 mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-cyan-400 text-sm font-semibold mb-3",children:"STRESS RESILIENCE"}),jsxRuntimeExports.jsxs("div",{className:"relative h-8 bg-gray-800 rounded-full overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full",initial:{width:"0%"},animate:{width:`${o.stressResilience}%`},transition:{duration:2e3,ease:"easeOut"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("span",{className:"text-white text-xs font-bold",children:[o.stressResilience,"%"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[jsxRuntimeExports.jsx("span",{children:"0%"}),jsxRuntimeExports.jsx("span",{children:"100%"})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-purple-800/50 to-blue-800/50 rounded-xl p-4 border border-purple-400/30",children:jsxRuntimeExports.jsxs("p",{className:"text-purple-200 text-sm leading-relaxed",children:[e||"Wil",", you have successfully navigated ",jsxRuntimeExports.jsx("span",{className:"text-purple-300 font-bold",children:o.weeklyChallenges})," challenges this week. Your focus is becoming your strongest tool."]})}),jsxRuntimeExports.jsx("button",{onClick:i,className:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition transform hover:scale-105",children:"Continue Mission"})]})})}):null},SuccessBadge=({userName:e,isVisible:s,onClose:i,isFirstNode:o})=>{const[a,c]=reactExports.useState(!1),[d,h]=reactExports.useState(null);reactExports.useEffect(()=>{if(s&&o){c(!0),h(localStorage.getItem("gideon_user_id")),g();const _=setTimeout(()=>{c(!1),i&&i()},5e3);return()=>clearTimeout(_)}},[s,o,i]);const g=async()=>{try{const _=localStorage.getItem("gideon_user_id"),$=localStorage.getItem("gideon_call_sign"),et=parseInt(localStorage.getItem("gideon_ai_support_level")||"3");if(!_)return;const tt=it=>it>=5?"from-purple-400 to-purple-600 border-purple-300":it>=3?"from-blue-400 to-blue-600 border-blue-300":"from-orange-400 to-orange-600 border-orange-300",nt={type:"first_success_badge",earned_at:new Date().toISOString(),ai_support_level:et,call_sign:$};await supabase.from("profiles").update({achievements:nt,updated_at:new Date().toISOString()}).eq("id",_),console.log("Badge achievement saved:",nt)}catch(_){console.error("Failed to save badge achievement:",_)}};if(!a||!o)return null;const b=parseInt(localStorage.getItem("gideon_ai_support_level")||"3"),j=b>=5?"from-purple-400 to-purple-600 border-purple-300":b>=3?"from-blue-400 to-blue-600 border-blue-300":"from-orange-400 to-orange-600 border-orange-300";return jsxRuntimeExports.jsx(AnimatePresence,{children:a&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:20,stiffness:300,duration:.6},className:`bg-gradient-to-r ${j} border-2 rounded-2xl p-6 shadow-2xl min-w-[300px]`,children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx(motion.div,{initial:{rotate:-180,scale:0},animate:{rotate:0,scale:1},transition:{delay:.2,duration:.5},className:"text-6xl",children:""}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white",children:"First Victory!"})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:[jsxRuntimeExports.jsxs("p",{className:"text-white/90 text-sm",children:["Welcome to your journey, ",e||"Warrior","!"]}),jsxRuntimeExports.jsxs("p",{className:"text-white/80 text-xs mt-2",children:["Level ",b,"  ",b>=5?"Verve":b>=3?"Aura":"Forge"]})]}),jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},onClick:()=>{c(!1),i&&i()},className:"bg-white/30 hover:bg-white/50 text-white px-4 py-2 rounded-lg text-sm font-semibold transition",children:"Continue Mission"}),[...Array(6)].map((_,$)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0]},transition:{duration:2,delay:$*.2,repeat:1/0,repeatDelay:3},className:"absolute w-2 h-2 bg-yellow-300 rounded-full",style:{top:`${20+Math.random()*60}%`,left:`${10+Math.random()*80}%`}},$))]}),jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},onClick:()=>{c(!1),i&&i()},className:"bg-black/30 hover:bg-black/50 text-black px-4 py-2 rounded-lg text-sm font-semibold transition",children:"Continue Journey"})]})})})},PrimeStudioCard=({userName:e,onProblemSuccess:s,onProblemMiss:i})=>{const{identityStrikeTrigger:o,isInVerveMode:a,isInAuraMode:c,isInForgeMode:d,getModeStyles:h,switchMode:g,selectedNode:b,practiceMode:j,stressLevel:_,isStressed:$}=useNeuro(),[et,tt]=reactExports.useState(!1),[nt,it]=reactExports.useState(!1),[rt,_e]=reactExports.useState(0),[st,ot]=reactExports.useState("Warming up..."),[ut,ht]=reactExports.useState(0),[dt,at]=reactExports.useState(0),[ct,lt]=reactExports.useState([]),[ft,mt]=reactExports.useState(null),[gt,jt]=reactExports.useState(!1),[yt,vt]=reactExports.useState(!1),[Ct,pt]=reactExports.useState(!1),[xt,Et]=reactExports.useState(!1),[bt,Tt]=reactExports.useState(!1),[Ut,Ft]=reactExports.useState(null),[qt,Ot]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{try{const wt=localStorage.getItem("gideon_user_name")||"anonymous",{data:Rt,error:Dt}=await supabase.from("mastery_ledger").select("node_id").eq("user_id",wt).eq("status","mastered");if(Rt&&Rt.length>0){const Mt=Rt.map(Zt=>Zt.node_id);lt(Mt),localStorage.setItem("completedNodes",JSON.stringify(Mt))}else{const Mt=localStorage.getItem("completedNodes");Mt&&lt(JSON.parse(Mt))}}catch(wt){console.error("Failed to load completed nodes:",wt);const Rt=localStorage.getItem("completedNodes");Rt&&lt(JSON.parse(Rt))}})()},[]);const St=kt=>{const wt=getNodeById(kt);return wt?wt.prerequisites.every(Rt=>ct.includes(Rt)):!1},Nt=kt=>{if(getNodeById(kt)){if(!St(kt)){const Dt=getUnlockedNodes(ct).find(Mt=>!ct.includes(Mt.id));console.log(Dt?`Node ${kt} is locked. Try ${Dt.title} first!`:"No unlocked nodes available");return}pt(!0)}},Pt=()=>{if(!b)return null;const kt=getNodeById(b.id||b);if(!kt)return null;if(kt.isStronghold)return{objective:"Complete the 15-minute timed exam",intelligence:"This is your final test. Stay calm, trust your training, and remember: no review options until the end. Your breathing techniques are your secret weapon.",node:kt};const wt=Rt=>Rt.title.includes("Algebra")?"Think of equations as balance scales - what you do to one side, you must do to the other.":Rt.title.includes("Linear")?"Visualize slopes as hills - steeper means faster change, gentler means slower change.":Rt.title.includes("Systems")?"Like solving two mysteries at once - find one clue to unlock the next.":Rt.title.includes("Quadratic")?"Break down complex problems into their building blocks, like factoring numbers.":Rt.title.includes("Functions")?"Functions are machines - put something in, get something predictable out.":"Every problem has a pattern. Find it, and you've found the solution.";return{objective:`Master 5 ${kt.title.includes("Algebra")?"Equations":kt.title.includes("Linear")?"Problems":"Challenges"}`,intelligence:wt(kt),node:kt}};reactExports.useEffect(()=>{const kt=setInterval(()=>{_e(wt=>{const Rt=wt+1;return Rt<10?ot("Warming up..."):Rt<30?ot("Finding your rhythm"):Rt<60?ot("Growing stronger"):ot("In the zone!"),Rt})},1e3);return()=>clearInterval(kt)},[]),reactExports.useEffect(()=>{const kt=Math.min(100,Math.floor((ut||0)/3)*10);at(kt)},[ut]),reactExports.useEffect(()=>{_>75?ft?Date.now()-ft>5e3&&!gt&&jt(!0):mt(Date.now()):(mt(null),jt(!1))},[_,ft,gt]);const It=async()=>{jt(!1),vt(!0),g("AURA");try{const kt=localStorage.getItem("gideon_user_name")||"anonymous";await supabase.from("trauma_logs").insert([{user_id:kt,event_type:"self_regulation_win",stress_level_before:_,trigger:"high_stress_breather",created_at:new Date().toISOString()}]),console.log("Self-regulation win logged to trauma_logs")}catch(kt){console.error("Failed to log self-regulation win:",kt)}},Vt=()=>{vt(!1)},zt=()=>{const kt=ut+1;ht(kt),console.log("Problem solved successfully!"),kt===1&&Ot(!0)},Ht=kt=>{console.log("Problem set completed for node:",kt),tt(!1)},Gt=kt=>{if(Ft(kt),Tt(!1),kt.passed){const wt=[...ct,"stronghold-001"];lt(wt),localStorage.setItem("completedNodes",JSON.stringify(wt));try{const Rt=localStorage.getItem("gideon_user_name")||"anonymous";supabase.from("mastery_ledger").insert([{user_id:Rt,node_id:"stronghold-001",status:"mastered",created_at:new Date().toISOString()}])}catch(Rt){console.error("Failed to log stronghold completion:",Rt)}}},Xt=()=>a?"You're doing great. Stay steady and keep moving forward.":c?"Take a deep breath. You're turning challenges into wisdom right now.":d?"Look how far you've come. What's the next win we're heading for?":"You're right where you need to be. Ready to grow?",Wt=h?h():{borderColor:"#D4AF37",glowColor:"rgba(212, 175, 55, 0.5)"},Kt=()=>a?"radial-gradient(circle at center, #E6E6FA 0%, #D8BFD8 40%, #7B68EE 100%)":c?"radial-gradient(circle at center, #1E90FF 0%, #00008B 50%, #000033 100%)":d?"radial-gradient(circle at center, #FFD700 0%, #D4AF37 50%, #8B4513 100%)":"#FAF9F6";return jsxRuntimeExports.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-black",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:.9},transition:{duration:1.5},className:"absolute inset-0",style:{background:Kt()}},a?"verve":c?"aura":"forge"),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(circle at center, transparent 30%, ${Wt.borderColor}44 100%)`},animate:{opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0}}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative z-10 w-full max-w-md mx-4",children:jsxRuntimeExports.jsx("div",{className:"backdrop-blur-2xl bg-white/20 border-2 rounded-3xl p-10 shadow-2xl",style:{borderColor:Wt.borderColor,boxShadow:`0 0 50px ${Wt.glowColor}, inset 0 0 30px ${Wt.glowColor}`},children:jsxRuntimeExports.jsx("div",{className:"relative z-10 text-center",children:j&&b?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 drop-shadow-md uppercase tracking-widest",children:["Practice: ",jsxRuntimeExports.jsx("span",{style:{color:Wt.borderColor},children:b.title})]}),jsxRuntimeExports.jsx("button",{onClick:()=>tt(!0),className:"w-full py-4 rounded-xl font-bold text-lg transition-all hover:scale-105 active:scale-95 shadow-lg",style:{backgroundColor:Wt.borderColor,color:"white"},children:"Start Practice Session"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("h1",{className:"text-5xl font-black text-white mb-4 tracking-tighter italic drop-shadow-lg",children:["GIDEON ",jsxRuntimeExports.jsx("span",{style:{color:Wt.borderColor},children:"PREP"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xl text-white mb-2 font-medium drop-shadow",children:[jsxRuntimeExports.jsx("span",{className:"font-serif italic font-bold",children:"PrimeED"})," Studio Fully Powered"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>it(!0),className:"flex items-center justify-center space-x-3 mt-8 bg-black/40 w-fit mx-auto px-6 py-3 rounded-full border border-white/20 shadow-inner hover:bg-black/60 transition-all cursor-pointer group",children:[jsxRuntimeExports.jsx(motion.div,{className:"w-3 h-3 bg-green-400 rounded-full shadow-[0_0_10px_#4ade80]",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx("span",{className:"text-white text-xs font-bold tracking-widest font-mono uppercase group-hover:text-green-300 transition-colors",children:"Neural Link Online - ACCESS MASTERY MAP"})]})]})})})}),jsxRuntimeExports.jsxs("div",{className:`fixed bottom-6 left-6 z-40 bg-black/80 backdrop-blur-xl p-4 rounded-xl border border-white/20 max-w-xs ${_>75?"animate-pulse":""}`,children:[jsxRuntimeExports.jsx("h3",{className:`text-xs font-bold uppercase tracking-widest mb-2 ${_>75?"text-red-400":"text-purple-400"}`,children:"YOUR GROWTH COMPASS"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-300 font-mono leading-relaxed",children:Xt()}),jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-2 border-t border-white/10 pt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Energy Level:"}),jsxRuntimeExports.jsxs("span",{className:`text-xs font-bold ${dt>=70?"text-green-400":dt>=40?"text-yellow-400":"text-orange-400"}`,children:[dt,"% ",dt>=70?"(HIGH)":dt>=40?"(MEDIUM)":"(LOW)"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Growth Metric:"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-yellow-400",children:st})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-white/10",children:jsxRuntimeExports.jsx("button",{onClick:()=>Et(!0),className:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-semibold transition transform hover:scale-105 active:scale-95 min-h-[44px] touch-manipulation",children:" Warrior Progress"})}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Learner: ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-bold",children:e||"FRIEND"})]})]}),jsxRuntimeExports.jsxs("div",{className:"fixed bottom-6 right-6 z-40 text-right",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 font-mono tracking-widest",children:"GROWTH MODE ACTIVATED"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-400 font-bold tracking-widest mt-1",children:"YOU ARE CAPABLE OF AMAZING THINGS"})]}),jsxRuntimeExports.jsxs("div",{className:"fixed top-6 right-6 z-50 flex items-center gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center bg-black/40 backdrop-blur-xl p-3 rounded-full border border-white/10 gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>g("VERVE"),className:`w-4 h-4 rounded-full transition-all duration-500 hover:scale-125 ${a?"bg-purple-400 shadow-[0_0_25px_#A855F7]":"bg-gray-600 hover:bg-purple-300"}`,title:"VERVE"}),jsxRuntimeExports.jsx("button",{onClick:()=>g("AURA"),className:`w-4 h-4 rounded-full transition-all duration-500 hover:scale-125 ${c?"bg-blue-500 shadow-[0_0_25px_#3B82F6]":"bg-gray-600 hover:bg-blue-300"}`,title:"AURA"}),jsxRuntimeExports.jsx("button",{onClick:()=>g("FORGE"),className:`w-4 h-4 rounded-full transition-all duration-500 hover:scale-125 ${d?"bg-yellow-400 shadow-[0_0_25px_#EAB308]":"bg-gray-600 hover:bg-yellow-300"}`,title:"FORGE"})]}),jsxRuntimeExports.jsx(WarriorJournal,{})]}),jsxRuntimeExports.jsx(IdentityStrike,{trigger:o}),jsxRuntimeExports.jsx(AnimatePresence,{children:gt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-xl",children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-blue-900/90 border-2 border-blue-400/50 rounded-3xl p-8 max-w-sm w-full mx-4 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto bg-blue-400 rounded-full flex items-center justify-center animate-pulse",children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-blue-300 mb-2",children:"Soft Landing"}),jsxRuntimeExports.jsxs("p",{className:"text-blue-200 text-sm mb-6",children:[e||"Wil",", the energy is high. Want to take a 60-second Aura breather?"]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>jt(!1),className:"flex-1 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition",children:"Maybe Later"}),jsxRuntimeExports.jsx("button",{onClick:It,className:"flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition",children:"Yes, Breathe"})]})]})})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:yt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-xl",children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-blue-900/95 border-2 border-blue-400/50 rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-blue-300 mb-2",children:"Box Breathing"}),jsxRuntimeExports.jsx("p",{className:"text-blue-200 text-sm mb-4",children:"Follow the circle. Inhale for 4, Hold for 4, Exhale for 4."}),jsxRuntimeExports.jsxs("div",{className:"relative w-44 h-44 mx-auto min-h-[176px]",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-blue-400/20 rounded-full",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-2 bg-blue-500/50 rounded-full",animate:{scale:[1,1.4,1],opacity:[.5,.8,.5]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-4 bg-blue-600/70 rounded-full",animate:{scale:[1,1.6,1],opacity:[.7,1,.7]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-6 bg-blue-700/90 rounded-full flex items-center justify-center",animate:{scale:[1,1.8,1],opacity:[.9,1,.9]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-blue-300 text-xs font-mono",children:"4-4-4"})})]}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-blue-400":"bg-gray-600"}`}),jsxRuntimeExports.jsx("span",{className:"text-blue-300 text-sm font-mono",children:"Inhale"}),jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-blue-400":"bg-gray-600"}`}),jsxRuntimeExports.jsx("span",{className:"text-blue-300 text-sm font-mono",children:"Hold"}),jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-blue-400":"bg-gray-600"}`}),jsxRuntimeExports.jsx("span",{className:"text-blue-300 text-sm font-mono",children:"Exhale"})]})}),jsxRuntimeExports.jsx("button",{onClick:Vt,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition",children:"Complete"})]})})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:Ct&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-xl",children:(()=>{const kt=Pt();return kt?jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-purple-900/90 to-blue-900/90 border-2 border-purple-400/50 rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto bg-purple-400 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:kt.node.icon})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-purple-300 mb-2",children:"Mission Briefing"}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-purple-400/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-purple-400 font-semibold text-sm mb-2",children:"OBJECTIVE:"}),jsxRuntimeExports.jsx("p",{className:"text-purple-200 font-bold",children:kt.objective})]}),jsxRuntimeExports.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-blue-400/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-blue-400 font-semibold text-sm mb-2",children:"INTELLIGENCE:"}),jsxRuntimeExports.jsx("p",{className:"text-blue-200 text-sm",children:kt.intelligence})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[jsxRuntimeExports.jsxs("span",{children:["Difficulty: ",kt.node.difficulty]}),jsxRuntimeExports.jsxs("span",{children:["Est. Time: ",kt.node.estimatedTime]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>pt(!1),className:"flex-1 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>{pt(!1),kt.node.isStronghold?Tt(!0):tt(!0)},className:"flex-1 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition transform hover:scale-105",children:kt.node.isStronghold?"BEGIN EXAM":"ENGAGE MISSION"})]})]})}):null})()})}),jsxRuntimeExports.jsx(AnimatePresence,{children:nt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.8},className:"fixed inset-0 z-40 flex items-center justify-center bg-black/95 backdrop-blur-xl",children:jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx(MasteryMap,{onNodeSelect:Nt,selectedNode:null,completedNodes:ct})})},"mastery-map")}),jsxRuntimeExports.jsx(AnimatePresence,{children:et&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-lg",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-3xl p-8 max-w-2xl w-full mx-4 shadow-2xl border-t-[12px]",style:{borderColor:Wt.borderColor},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-black uppercase tracking-tighter",children:"Neural Practice Engine"}),jsxRuntimeExports.jsx("button",{onClick:()=>tt(!1),className:"bg-gray-100 p-3 rounded-full hover:bg-red-500 hover:text-white transition-all",children:""})]}),jsxRuntimeExports.jsx(ProblemEngine,{nodeId:(b==null?void 0:b.id)||"ged-001",onSuccess:zt,onProblemMiss:i,onProblemComplete:Ht,userName:e})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:xt&&jsxRuntimeExports.jsx(ProgressLedger,{userName:e,isOpen:xt,onClose:()=>Et(!1)})}),jsxRuntimeExports.jsx(AnimatePresence,{children:bt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-lg",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-2xl w-full mx-4 shadow-2xl border-t-[12px]",style:{borderColor:Wt.borderColor},children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-black uppercase tracking-tighter",children:"GED Stronghold Exam"}),jsxRuntimeExports.jsx("button",{onClick:()=>Tt(!1),className:"bg-gray-700 p-3 rounded-full hover:bg-red-500 hover:text-white transition-all",children:""})]}),jsxRuntimeExports.jsx(ExamEngine$1,{nodeId:(b==null?void 0:b.id)||"stronghold-001",onComplete:Gt,userName:e})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:Ut&&jsxRuntimeExports.jsx(ExamResults,{results:Ut,userName:e,onClose:()=>Ft(null)})}),jsxRuntimeExports.jsx(AnimatePresence,{children:qt&&jsxRuntimeExports.jsx(SuccessBadge,{userName:e,isVisible:qt,onClose:()=>Ot(!1),isFirstNode:ct.length===1})})]})},SlideInPanel=({isOpen:e,onClose:s,selectedNode:i,userName:o,completedNodes:a,onProblemSuccess:c,onProblemMiss:d,onShowCommandCalc:h})=>jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsxs(motion.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 right-0 bottom-0 w-2/5 max-w-2xl z-40 bg-black/95 backdrop-blur-xl border-l border-white/20 shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[jsxRuntimeExports.jsxs("div",{className:"text-white",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold",children:(i==null?void 0:i.title)||"Neural Practice Engine"}),i&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:[i.sector,"  ",i.difficulty]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/10 hover:bg-red-500 hover:text-white transition-colors",children:""}),jsxRuntimeExports.jsx("button",{onClick:h,className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-semibold transition-colors",children:" COMMAND CALC"})]})]}),jsxRuntimeExports.jsx("div",{className:"h-full overflow-y-auto",children:jsxRuntimeExports.jsx(PrimeStudioCard,{userName:o,practiceMode:!0,selectedNode:i,onProblemSuccess:c,onProblemMiss:d})})]})}),WelcomeKit=({onComplete:e})=>{const[s,i]=reactExports.useState(0),[o,a]=reactExports.useState(!1),c=[{id:1,icon:"",title:"Mission Start",description:"I am one who showed up. I am not my past score; I am my current effort. Every problem is a rep. Every mistake is a recalibration. I am an Overcomer because I am still here.",color:"from-purple-500 to-purple-600"},{id:2,icon:"",title:"The Flow",description:"Verve is for action. Aura is for recalibration. If your stress levels rise, the Command Center will guide you through a reset.",color:"from-blue-500 to-blue-600"},{id:3,icon:"",title:"The Ledger",description:"Your progress is permanent. Watch your Reclaimed Strongholds expand as you build your future.",color:"from-yellow-500 to-yellow-600"}],d=()=>{s>0&&i(b=>b-1)},h=()=>{a(!0),localStorage.setItem("isFirstTimeUser","false"),setTimeout(()=>{e()},2500)},g=c[s];return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-xl",children:[o&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 pointer-events-none",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute left-0 right-0 h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent shadow-[0_0_20px_#3B82F6]",animate:{y:["-10vh","110vh"]},transition:{duration:2.5,ease:"easeInOut"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute left-0 right-0 h-2 bg-gradient-to-r from-transparent via-blue-400 to-transparent opacity-50",animate:{y:["-10vh","110vh"]},transition:{duration:2.5,ease:"easeInOut",delay:.1}})]}),jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0,y:50},transition:{duration:.5},className:"relative z-10 max-w-2xl w-full mx-4",children:jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-br ${g.color} bg-opacity-10 backdrop-blur-2xl border border-white/20 rounded-3xl p-8 shadow-2xl`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center space-x-2 mb-8",children:c.map((b,j)=>jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${j===s?"bg-white scale-125 shadow-lg shadow-white/50":j<s?"bg-white/80":"bg-white/30"}`},b.id))}),jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx(motion.div,{initial:{rotate:-180,scale:0},animate:{rotate:0,scale:1},transition:{type:"spring",damping:15,stiffness:300},className:"w-24 h-24 mx-auto bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border-2 border-white/40 shadow-xl",children:jsxRuntimeExports.jsx("span",{className:"text-5xl filter drop-shadow-lg",children:g.icon})},s),jsxRuntimeExports.jsx(motion.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-3xl font-bold text-white mb-2 drop-shadow-lg",children:g.title},`title-${s}`),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-xl text-white/95 leading-relaxed max-w-md mx-auto font-medium drop-shadow",children:g.description},`desc-${s}`),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex justify-center space-x-4 pt-4",children:[s>0&&!o&&jsxRuntimeExports.jsx("button",{onClick:d,className:"px-6 py-3 bg-white/20 hover:bg-white/30 text-white rounded-lg font-semibold transition backdrop-blur-sm border border-white/30",children:"Previous"}),!o&&jsxRuntimeExports.jsx("button",{onClick:h,className:`px-8 py-4 bg-gradient-to-r ${g.color} hover:opacity-90 text-white rounded-lg font-bold transition transform hover:scale-105 shadow-lg text-lg`,children:s<c.length-1?"Next Step":"INITIALIZE COMMAND CENTER"}),o&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-lg",children:"Deploying Command Center..."})]})]})]}),!o&&jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},onClick:h,className:"absolute top-4 right-4 text-white/70 hover:text-white text-sm underline transition",children:"Skip Briefing"})]})})]})})},TacticalIntel=({isOpen:e,onClose:s,currentStronghold:i})=>{const[o,a]=reactExports.useState(null),c=[{id:"fractions",category:"Fractions",icon:"",tip:"Use [n/d] to enter, [2nd][f<>d] to convert to decimals.",keys:["[n/d]","[2nd][f<>d]"],description:"Direct fraction entry and conversion"},{id:"powers",category:"Powers",icon:"",tip:"Use [^] for any exponent and [x] for squares.",keys:["[^]","[x]"],description:"Exponent shortcuts for speed"},{id:"signs",category:"Signs",icon:"",tip:"Use [(-)] (bottom right) for negative numbers, NOT the minus key.",keys:["[(-)]"],description:"Negative number entry"},{id:"clear",category:"Clear All",icon:"",tip:"Use [on] + [clear] to reset the memory if it gets glitchy.",keys:["[on] + [clear]"],description:"Memory reset troubleshooting"},{id:"toggle",category:"Toggle",icon:"",tip:"Use the [] key above 'enter' to switch between exact answers and decimals.",keys:["[]"],description:"Answer format switching"}],d=()=>{if(!i)return null;const b=i.toLowerCase();return b.includes("frac")||b.includes("fraction")?c[0]:b.includes("quad")||b.includes("power")||b.includes("square")||b.includes("equation")||b.includes("algebra")?c[1]:b.includes("data")||b.includes("graph")?c[4]:null},h=()=>{const b=d();b&&(a(b.id),setTimeout(()=>a(null),3e3))},g=d();return jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-xl",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-blue-900/90 to-blue-800/90 backdrop-blur-xl border border-blue-400/50 rounded-3xl p-8 max-w-4xl w-full mx-4 shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-blue-400 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-blue-300",children:"TACTICAL INTEL"}),jsxRuntimeExports.jsx("p",{className:"text-blue-400 text-sm",children:"TI-30XS Calculator Hacks"})]})]}),jsxRuntimeExports.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full bg-blue-700 hover:bg-red-500 hover:text-white transition-colors",children:""})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:c.map(b=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b.id*.1},className:`bg-blue-950/50 border rounded-xl p-4 transition-all duration-300 ${o===b.id?"border-yellow-400/50 bg-yellow-400/10 shadow-lg shadow-yellow-400/20":"border-blue-400/30 hover:border-blue-400/50"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:b.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-blue-300 font-semibold text-sm mb-1",children:b.category}),jsxRuntimeExports.jsx("p",{className:"text-blue-200 text-xs mb-2",children:b.tip}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:b.keys.map((j,_)=>jsxRuntimeExports.jsx("span",{className:"bg-blue-800/70 text-blue-300 text-xs px-2 py-1 rounded border border-blue-400/30 font-mono",children:j},_))}),jsxRuntimeExports.jsx("p",{className:"text-blue-400/60 text-xs mt-2 italic",children:b.description})]})]})},b.id))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-blue-300 text-sm",children:[jsxRuntimeExports.jsxs("p",{className:"mb-1",children:["Current Stronghold: ",i||"None"]}),g&&jsxRuntimeExports.jsxs("p",{className:"text-yellow-400 text-xs",children:["Relevant: ",g.category]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[g&&jsxRuntimeExports.jsx("button",{onClick:h,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-semibold transition transform hover:scale-105 active:scale-95",children:" Copy to Strategy"}),jsxRuntimeExports.jsx("button",{onClick:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition transform hover:scale-105 active:scale-95",children:"Close Intel"})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t border-blue-400/30",children:jsxRuntimeExports.jsx("p",{className:"text-blue-400/80 text-xs text-center italic",children:" Master these shortcuts to become a GED calculator warrior. Speed matters on test day."})})]})})})},useSessionSync=(e={})=>{var o;const[s,i]=reactExports.useState(()=>{try{const a=localStorage.getItem("gideon_session_data"),c=localStorage.getItem("gideon_call_sign"),d=a?JSON.parse(a):{};return{...e,...d,completedNodes:d.completedNodes||[],combatPower:{...e.combatPower,...d.combatPower},radarData:{...e.radarData,...d.radarData},warriorRank:d.warriorRank||"Recruit",lastActiveSector:d.lastActiveSector||null,deployment_step:d.deployment_step||0,registration_complete:d.registration_complete||!1,is_mission_ready:d.is_mission_ready||!1,userName:c||"Scholar"}}catch(a){return console.error("Failed to parse session data:",a),{...e,completedNodes:[],deployment_step:0,registration_complete:!1,is_mission_ready:!1,userName:localStorage.getItem("gideon_call_sign")||"Scholar"}}});return reactExports.useEffect(()=>{(async()=>{const c=localStorage.getItem("gideon_call_sign");if(c)try{const{data:d}=await supabase.from("profiles").select("full_name, call_sign, username").eq("call_sign",c).single();if(d){const h=d.full_name||d.username||d.call_sign||"Scholar";i(g=>({...g,userName:h})),console.log("User profile loaded:",h)}}catch(d){console.warn("Failed to fetch user profile:",d)}})()},[]),reactExports.useEffect(()=>{var a;((a=s.combatPower)==null?void 0:a.average)>=145&&!s.is_mission_ready&&(i(c=>({...c,is_mission_ready:!0})),supabase.from("profiles").upsert({user_id:s.user_id||"anonymous",is_mission_ready:!0,combat_power:s.combatPower.average,updated_at:new Date().toISOString()}).then(({error:c})=>{c?console.error("Failed to sync mission ready status to Supabase:",c):console.log("Mission ready status synced to Supabase successfully")}))},[(o=s.combatPower)==null?void 0:o.average,s.is_mission_ready]),reactExports.useEffect(()=>{(s.deployment_step>0||s.registration_complete)&&supabase.from("profiles").upsert({user_id:s.user_id||"anonymous",deployment_step:s.deployment_step,registration_complete:s.registration_complete,updated_at:new Date().toISOString()}).then(({error:a})=>{a?console.error("Failed to sync deployment status to Supabase:",a):console.log("Deployment status synced to Supabase successfully")})},[s.deployment_step,s.registration_complete]),reactExports.useEffect(()=>{try{const a={combatPower:s.combatPower||{},radarData:s.radarData||{},warriorRank:s.warriorRank||"Recruit",lastActiveSector:s.lastActiveSector||null,completedNodes:s.completedNodes||[],deployment_step:s.deployment_step||0,registration_complete:s.registration_complete||!1,is_mission_ready:s.is_mission_ready||!1,sessionTimestamp:new Date().toISOString()};localStorage.setItem("gideon_session_data",JSON.stringify(a))}catch(a){console.error("Failed to save session data:",a)}},[s]),{sessionData:s,setSessionData:i,updateSessionData:a=>{i(c=>{const d={...c,...a},h={combatPower:d.combatPower||{},radarData:d.radarData||{},warriorRank:d.warriorRank||"Recruit",lastActiveSector:d.lastActiveSector||null,completedNodes:d.completedNodes||[],deployment_step:d.deployment_step||0,registration_complete:d.registration_complete||!1,is_mission_ready:d.is_mission_ready||!1,sessionTimestamp:new Date().toISOString()};return localStorage.setItem("gideon_session_data",JSON.stringify(h)),d})}}},SocraticCoPilot=({isOpen:e,problemData:s,studentMistake:i,onBreakthrough:o,onClose:a,isMissionActive:c=!1,missionTimeLimit:d=180,onMissionComplete:h=null})=>{const[g,b]=reactExports.useState([]),[j,_]=reactExports.useState(""),[$,et]=reactExports.useState(!1),[tt,nt]=reactExports.useState(!1),[it,rt]=reactExports.useState(""),[_e,st]=reactExports.useState(!1),ot=reactExports.useRef(null),ut=reactExports.useRef(null),[ht,dt]=reactExports.useState(0),[at,ct]=reactExports.useState(!1),[lt,ft]=reactExports.useState(!1),[mt,gt]=reactExports.useState(1),[jt,yt]=reactExports.useState(d),[vt,Ct]=reactExports.useState(null),[pt,xt]=reactExports.useState(100),[Et,bt]=reactExports.useState(!1);reactExports.useEffect(()=>{if(s){rt(s.equation||"x + 5x + 6 = 0"),c&&(yt(d),Ct(Date.now()),bt(!1),xt(100));const St=c?"MISSION CONTROL: Final Simulation Active. System integrity at risk.":`CO-PILOT: Tactical Guidance Active. I see friction in: ${s.concept||"Quadratic Equations"}.`;b([{id:1,sender:"copilot",text:St,timestamp:new Date}]),setTimeout(()=>{et(!0),setTimeout(()=>{const Nt=c?"Mission Briefing: You have 3 minutes to complete this high-stakes simulation. Maintain focus and accuracy under pressure.":"What happens to the sign when we move -5 to the other side of the equation?";b(Pt=>[...Pt,{id:2,sender:"copilot",text:Nt,timestamp:new Date}]),et(!1)},1500)},500)}},[s,c]),reactExports.useEffect(()=>{if(c&&vt){const St=setInterval(()=>{const Nt=(Date.now()-vt)/1e3,Pt=Math.max(0,d-Nt);yt(Pt);const It=Math.max(0,100-ht*10),Vt=Math.max(0,Pt/d*30),zt=Math.min(100,It+Vt);if(xt(zt),Pt<=0||Et){clearInterval(St),bt(!0),yt(0);const Ht=Pt<=0?"MISSION FAILED: Time expired. System integrity compromised.":`MISSION COMPLETE: Success Probability: ${zt.toFixed(1)}%. Combat Power adjusted.`;b(Gt=>[...Gt,{id:g.length+1,sender:"copilot",text:Ht,timestamp:new Date}]),h&&Pt<=0&&h(zt,Nt)}},100)}},[c,vt,ht,Et]),reactExports.useEffect(()=>{var St;(St=ut.current)==null||St.scrollIntoView({behavior:"smooth"})},[g]),reactExports.useEffect(()=>{if(g.length>0&&!c&&g.filter(Nt=>Nt.sender==="copilot").pop()&&!tt){const Nt=setTimeout(()=>{nt(!0)},6e4);return()=>clearTimeout(Nt)}},[g,tt,c]);const Tt=()=>{if(j.trim()&&!$){const St={id:g.length+1,sender:"student",text:j.trim(),timestamp:new Date};b(Nt=>[...Nt,St]),_(""),st(!0),setTimeout(()=>st(!1),500),setTimeout(()=>{et(!0),setTimeout(()=>{Ut(j.trim()),et(!1)},1e3)},300)}},Ut=St=>{let Nt="";if(St.toLowerCase().includes("excellent")||St.toLowerCase().includes("perfect")||St.toLowerCase().includes("great")||St.toLowerCase().includes("correct"))dt(0),ct(!1),ft(!1),c&&xt(It=>Math.min(100,It+5));else{const It=ht+1;dt(It),It>=3&&ct(!0),It>=5&&ft(!0),c&&xt(Vt=>Math.max(0,Vt-15))}St.toLowerCase().includes("negative")||St.toLowerCase().includes("minus")?Nt="Excellent! Now what happens when we add 25 to both sides?":St.toLowerCase().includes("positive")||St.toLowerCase().includes("plus")?Nt="Wait - let me check that. What would -5 + 5 equal?":St.includes("20")||St.includes("twenty")?Nt="Perfect! Now we have x + 5x + 20 = 0. What method could we use to solve this?":St.toLowerCase().includes("factor")||St.toLowerCase().includes("quadratic")?Nt="Great choice! Can you see two numbers that multiply to 20 and add to 5?":lt?(Nt=getBridgeGapResponse((s==null?void 0:s.concept)||"Unknown",mt).analogy,gt(1)):at?(Nt=getBridgeGapResponse((s==null?void 0:s.concept)||"Unknown",mt).analogy,gt(Math.max(1,mt-1))):Nt="Interesting approach. Walk me through your thinking step by step.";const Pt={id:g.length+1,sender:"copilot",text:Nt,timestamp:new Date,metadata:{difficulty:mt,stallDetected:at,fallbackMode:lt,consecutiveIncorrect:ht,missionTimer:jt,successProbability:pt,isMissionActive:c,visualType:(bridgeGapResponse==null?void 0:bridgeGapResponse.visual)||"blocks"}};b(It=>[...It,Pt]),nt(!1)},Ft=()=>{b(St=>[...St,{id:g.length+1,sender:"copilot",text:"Hint: Look for two numbers that multiply to 6 and add to 5. Think about factors of 6.",timestamp:new Date}]),nt(!1)},qt=()=>{a&&a()},Ot=St=>{St.key==="Enter"&&!St.shiftKey&&(St.preventDefault(),Tt())};return e?jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 backdrop-blur-sm z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(11, 14, 20, 0.9)",backgroundImage:`
            linear-gradient(rgba(177, 156, 217, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(177, 156, 217, 0.03) 1px, transparent 1px)
          `},children:[jsxRuntimeExports.jsxs("div",{className:"comms-bubble md:hidden",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-verve rounded-full animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-white font-bold",children:"COMMS"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"w-full max-w-2xl neon-card",children:[jsxRuntimeExports.jsx("div",{className:`glass-panel border-b p-6 rounded-t-2xl ${c?"border-red-500":""}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${c?"bg-red-500":"bg-verve"}`}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:`text-2xl font-bold holographic-text ${c?"text-red-500":""}`,children:c?"MISSION CONTROL":"TACTICAL COMMS"}),jsxRuntimeExports.jsx("p",{className:"text-sm data-text-secondary mt-1",children:c?"Final Simulation Active":"Recovery Engine Analysis"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[c&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs data-text-secondary",children:"TIME REMAINING:"}),jsxRuntimeExports.jsxs("div",{className:`text-sm font-mono ${pt<72.5?"text-red-500":"text-verve"}`,style:{textShadow:pt<72.5?"0 0 10px rgba(255, 49, 49, 0.8)":"0 0 5px rgba(177, 156, 217, 0.5)"},children:[Math.floor(jt/60),":",(jt%60).toString().padStart(2,"0")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"text-xs data-text-secondary",children:"CALL SIGN:"}),jsxRuntimeExports.jsx("div",{className:"text-sm font-mono text-verve",children:callSign||"WARRIOR"})]})]}),jsxRuntimeExports.jsx("button",{onClick:a,className:"data-text-secondary hover:text-white transition-colors text-2xl",children:""})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"neon-card p-4 mb-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs data-text-secondary mb-2",children:"CURRENT PROBLEM"}),jsxRuntimeExports.jsx("div",{className:"text-forge font-mono text-lg font-bold",children:it})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4 neon-card rounded-lg max-h-96",children:[g.map(St=>{var Nt,Pt;return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${St.sender==="student"?"justify-end":"justify-start"} mb-3`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${St.sender==="student"?"glass-panel text-black data-text":`neon-card text-white data-text bridge-gap-message ${((Nt=St.metadata)==null?void 0:Nt.visualType)||"blocks"}`}`,children:[St.text,((Pt=St.metadata)==null?void 0:Pt.visualType)&&jsxRuntimeExports.jsx("div",{className:`visual-indicator ${St.metadata.visualType}`})]})},St.id)}),$&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"neon-card p-3 phase-btn aura-glow text-black data-text",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-black rounded-full animate-pulse"}),jsxRuntimeExports.jsxs("span",{className:"typewriter",children:["DECODING RESPONSE",jsxRuntimeExports.jsx("span",{className:"animate-pulse",children:"..."})]})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"neon-card p-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{ref:ot,type:"text",value:j,onChange:St=>_(St.target.value),onKeyPress:Ot,placeholder:"Awaiting transmission...",className:`flex-1 neon-input px-4 py-3 text-lg ${_e?"border-green-400":"border-verve focus:aura-glow"}`,style:{boxShadow:_e?"0 0 10px rgba(34, 197, 94, 0.5)":"none"},disabled:$}),jsxRuntimeExports.jsx("button",{onClick:Tt,disabled:$||!j.trim(),className:"phase-btn verve-glow text-black font-bold py-3 px-6 disabled:cursor-not-allowed",children:"TRANSMIT"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:Ft,disabled:tt||$||c,className:`phase-btn glass-panel data-text-secondary hover:text-verve disabled:cursor-not-allowed px-4 py-2 text-sm ${c?"opacity-50 cursor-not-allowed":""}`,children:tt?"HINT DEPLOYED":c?"HINTS DISABLED":"DEPLOY HINT"}),jsxRuntimeExports.jsx("button",{onClick:qt,className:"phase-btn glass-panel data-text-secondary hover:text-forge px-4 py-2 text-sm",children:"ABORT MISSION"})]})]})]})]})]})}):null},MasteryGauge=({masteryPercentage:e,label:s,size:i=200})=>{const a=(g=>g<=30?{color:"#B19CD9",animation:"pulse 2s infinite",glow:"0 0 20px rgba(177, 156, 217, 0.6)",label:"Verve"}:g<=89?{color:"#00D9FF",animation:"pulse 1.5s infinite",glow:"0 0 15px rgba(0, 217, 255, 0.5)",label:"Aura"}:{color:"#FF8C00",animation:"pulse 0.5s infinite",glow:"0 0 25px rgba(255, 140, 0, 0.8)",label:"Forge"})(e),c=(i-20)/2,d=2*Math.PI*c,h=d-d*e/100;return jsxRuntimeExports.jsxs("div",{className:"relative inline-block",children:[jsxRuntimeExports.jsxs("div",{className:"relative",style:{width:`${i}px`,height:`${i}px`,backdropFilter:"blur(12px)"},children:[jsxRuntimeExports.jsxs("svg",{width:i,height:i,className:"transform -rotate-90",children:[jsxRuntimeExports.jsx("circle",{cx:i/2,cy:i/2,r:c,fill:"transparent",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"20"}),jsxRuntimeExports.jsx("circle",{cx:i/2,cy:i/2,r:c,fill:"transparent",stroke:a.color,strokeWidth:"20",strokeDasharray:d,strokeDashoffset:h,style:{transition:"stroke-dashoffset 1s ease-in-out",filter:`drop-shadow(${a.glow})`,animation:a.animation}})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",style:{color:a.color,textShadow:a.glow},children:[jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold",style:{fontFamily:"JetBrains Mono, monospace"},children:[Math.round(e),"%"]}),jsxRuntimeExports.jsx("div",{className:"text-xs uppercase tracking-wider mt-1",style:{fontFamily:"Inter, sans-serif"},children:a.label})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full border-2 opacity-50",style:{borderColor:a.color,animation:a.animation,boxShadow:a.glow}})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-2 text-sm",style:{color:"rgba(255, 255, 255, 0.7)"},children:s})]})},HexagonalRadar=({data:e,size:s=300})=>(Math.max(...Object.values(e)),Math.min(...Object.values(e)),jsxRuntimeExports.jsx("div",{className:"radar-container",children:jsxRuntimeExports.jsx("div",{className:"hexagonal-radar",style:{width:"100%",maxWidth:"400px",height:"auto",viewBox:"0 0 400 400",transform:"scale(1)",transformOrigin:"center"},children:jsxRuntimeExports.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 400 400",style:{filter:"drop-shadow(0 0 10px rgba(177, 156, 217, 0.3))"},children:[jsxRuntimeExports.jsx("polygon",{points:hexPoints.map(i=>`${i.x},${i.y}`).join(" "),fill:"none",stroke:"rgba(255, 255, 255, 0.2)",strokeWidth:"2"}),webLines,jsxRuntimeExports.jsx("circle",{cx:s/2,cy:s/2,r:"8",fill:"#FF8C00",fillOpacity:"0.8",stroke:"#FF8C00",strokeWidth:"3",style:{filter:"drop-shadow(0 0 15px rgba(255, 140, 0, 0.8))"}}),jsxRuntimeExports.jsx("text",{x:s/2,y:s/2,textAnchor:"middle",className:"text-sm font-bold fill-current",style:{fill:"#FF8C00",fontSize:"14px",fontFamily:"JetBrains Mono, monospace",filter:"drop-shadow(0 0 8px rgba(255, 140, 0, 0.8))"},children:"RANGE QUAL"})]})})})),analyzeFrictionPoints=(e,s={})=>{const i=Object.entries(e).map(([o,a])=>{const c=s[o]||60,d=100/c,h=a*d;return{axis:o,score:a,time:c,speed:d,efficiency:h}}).sort((o,a)=>a.efficiency-o.efficiency);return{lowestSectors:i.slice(0,3),sectorAnalysis:i,recommendations:i.map(o=>o.efficiency<30?{axis:o.axis,priority:"critical",action:`CRITICAL: ${o.axis.toUpperCase()} speed is ${o.speed.toFixed(1)} q/min. Return to Verve-Sector 3 for re-verification.`}:o.efficiency<50?{axis:o.axis,priority:"high",action:`ALERT: ${o.axis.toUpperCase()} showing significant friction. Deploy targeted practice drills.`}:{axis:o.axis,priority:"medium",action:`MAINTAIN: Continue current ${o.axis.toUpperCase()} strategy with focused practice.`})}},MissionDebrief=({missionData:e,sessionData:s,radarData:i,timePerQuestion:o,missionSuccess:a,elapsed:c})=>{const{projectedScore:d,breakdown:h,lowestSectors:g,recommendations:b}=analyzeFrictionPoints(i,o),j=a&&d>=145;return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed inset-0 flex items-center justify-center z-50 p-4",style:{backgroundColor:"rgba(11, 14, 20, 0.95)"},children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:`w-full max-w-4xl neon-card p-8 ${j?"border-green-400":"border-red-500"}`,style:{boxShadow:j?"0 0 30px rgba(34, 197, 94, 0.5)":"0 0 30px rgba(255, 49, 49, 0.8)"},children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:`text-3xl font-bold mb-4 ${j?"text-green-400":"text-red-500"}`,children:j?"MISSION COMPLETE":"MISSION FAILED"}),jsxRuntimeExports.jsx("div",{className:"text-xl data-text-secondary mb-6",children:"Final Simulation Results"})]}),jsxRuntimeExports.jsx("div",{className:"text-center mb-8",children:jsxRuntimeExports.jsxs("div",{className:"inline-block px-6 py-3 neon-card rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-sm data-text-secondary mb-2",children:"CALL SIGN:"}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-mono text-verve font-bold",children:s.warriorRank||"WARRIOR"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-lg data-text-secondary mb-2",children:"PROJECTED GED SCORE"}),jsxRuntimeExports.jsxs("div",{className:`text-5xl font-bold ${d>=145?"text-green-400":"text-red-500"}`,children:[d,"/200"]}),jsxRuntimeExports.jsx("div",{className:"text-sm data-text-secondary mt-2",children:d>=145?"PASSING SCORE":"BELOW PASSING THRESHOLD"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-lg data-text-secondary mb-2",children:"MISSION TIME"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-mono text-verve",children:[Math.floor(c/60),":",(c%60).toString().padStart(2,"0")]}),jsxRuntimeExports.jsx("div",{className:"text-sm data-text-secondary mt-2",children:j?"COMPLETED WITHIN TIME LIMIT":"TIME EXPIRED"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-verve",children:"Performance Breakdown"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:h.map((_,$)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 neon-card rounded",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium data-text",children:_.axis}),jsxRuntimeExports.jsxs("div",{className:"text-sm data-text-secondary",children:["Score: ",_.score,"/100 | Weight: ",(_.weight*100).toFixed(0),"% | Contribution: ",_.weightedContribution.toFixed(1)]})]}),jsxRuntimeExports.jsx("div",{className:"text-right",children:jsxRuntimeExports.jsxs("div",{className:`text-2xl font-bold ${_.percentage>=70?"text-green-400":_.percentage>=50?"text-yellow-400":"text-red-500"}`,children:[_.percentage.toFixed(0),"%"]})})]},$))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-verve",children:"Friction Analysis"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:b.map((_,$)=>jsxRuntimeExports.jsx("div",{className:`p-4 neon-card rounded ${_.priority==="critical"?"border-red-500":_.priority==="high"?"border-orange-400":"border-yellow-400"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full ${_.priority==="critical"?"bg-red-500":_.priority==="high"?"bg-orange-400":"bg-yellow-400"}`}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:`font-medium ${_.priority==="critical"?"text-red-500":_.priority==="high"?"text-orange-400":"text-yellow-400"}`,children:[_.axis.toUpperCase()," - ",_.priority.toUpperCase()]}),jsxRuntimeExports.jsx("div",{className:"text-sm data-text-secondary mt-1",children:_.action})]})]})},$))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-4 text-verve",children:"Immediate Action Items"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:g.map((_,$)=>jsxRuntimeExports.jsxs("div",{className:"p-4 neon-card rounded border-red-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium text-red-500",children:[_.axis.toUpperCase()," - CRITICAL FRICTION"]}),jsxRuntimeExports.jsxs("div",{className:"text-sm data-text-secondary",children:["Speed: ",_.speed.toFixed(1)," q/min | Efficiency: ",_.efficiency.toFixed(1)]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm data-text-secondary",children:"Return to Verve-Sector 3 for re-verification and speed drills."})]},$))})]}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>{window.location.href="/tacticalintel"},className:`phase-btn font-bold py-4 px-8 text-lg ${j?"bg-green-400 text-black hover:bg-green-500":"bg-red-500 text-white hover:bg-red-600"}`,children:j?"RETURN TO TACTICAL DASHBOARD":"RETURN TO TRAINING"})})]})})},TacticalIntelDashboard=()=>{const{sessionData:e,setSessionData:s}=useSessionSync({combatPower:{math:75,rla:82,science:68,socialStudies:71,total:296,average:74,sovereigntyProgress:145,decayedSectors:{math:!1,rla:!1,science:!1,socialStudies:!1}},radarData:{numberSense:85,algebra:72,geometry:68,dataAnalysis:45,fractions:58,appliedMath:78},warriorRank:"Specialist",timePerQuestion:{math:60,rla:60,science:60,socialStudies:60},completedNodes:[],hasRegistered:!1}),[i,o]=reactExports.useState(!1),[a,c]=reactExports.useState(null),[d,h]=reactExports.useState(!1),[g,b]=reactExports.useState(null),[j,_]=reactExports.useState(!1),[$,et]=reactExports.useState(180),[tt,nt]=reactExports.useState(100),[it,rt]=reactExports.useState({step1:!1,step2:!1,step3_govId:!1,step3_calculator:!1,step3_location:!1});reactExports.useEffect(()=>{const lt=document.documentElement;j?(lt.style.setProperty("--primary-accent","#FF3131"),lt.style.setProperty("--verve","#FF3131"),lt.style.setProperty("--aura","#FF3131"),lt.style.setProperty("--forge","#FF3131"),lt.style.setProperty("--glass-border","rgba(255, 49, 49, 0.3)"),lt.style.setProperty("--glass-bg","rgba(255, 49, 49, 0.08)")):(lt.style.setProperty("--primary-accent","#00D9FF"),lt.style.setProperty("--verve","#B19CD9"),lt.style.setProperty("--aura","#00D9FF"),lt.style.setProperty("--forge","#FF8C00"),lt.style.setProperty("--glass-border","rgba(177, 156, 217, 0.3)"),lt.style.setProperty("--glass-bg","rgba(255, 255, 255, 0.08)"))},[j]),reactExports.useEffect(()=>{let lt;return j&&$>0&&(lt=setInterval(()=>{et(ft=>{const mt=ft-1;if(mt<=0){const gt=new CustomEvent("missionComplete",{detail:{missionSuccess:!1,elapsed:180,probability:0,sessionData:e,radarData:e.radarData,timePerQuestion:e.timePerQuestion}});return window.dispatchEvent(gt),_(!1),0}return mt})},1e3)),()=>{lt&&clearInterval(lt)}},[j,$,e]),reactExports.useEffect(()=>{const lt=ft=>{b({missionData:ft.detail,sessionData:e,radarData:e.radarData,timePerQuestion:e.timePerQuestion,missionSuccess:ft.detail.missionSuccess,elapsed:ft.detail.elapsed}),h(!0),_(!1)};return window.addEventListener("missionComplete",lt),()=>window.removeEventListener("missionComplete",lt)},[e]);const _e=[{day:"Mon",reps:24},{day:"Tue",reps:18},{day:"Wed",reps:32},{day:"Thu",reps:28},{day:"Fri",reps:15},{day:"Sat",reps:41},{day:"Sun",reps:37}],st=[{concept:"Quadratic Equations",accuracy:45,priority:"high"},{concept:"Linear Functions",accuracy:78,priority:"medium"},{concept:"Polynomial Division",accuracy:52,priority:"high"},{concept:"Coordinate Geometry",accuracy:85,priority:"low"}];_e.reduce((lt,ft)=>lt+ft.reps,0);const ot=Math.max(..._e.map(lt=>lt.reps)),ut=()=>{const lt=st.find(ft=>ft.accuracy<60);lt&&(c({id:lt.concept.toLowerCase().replace(" ","_"),concept:lt.concept,equation:"x + 5x + 6 = 0",difficulty:lt.accuracy}),o(!0))},ht=()=>{o(!1),c(null);const lt={...e.combatPower,math:Math.min(100,e.combatPower.math+10),total:e.combatPower.total+10},ft=Math.round((lt.math+lt.rla+lt.science+lt.socialStudies)/4);lt.average=ft,s({...e,combatPower:lt}),ft>=145&&supabase.from("profiles").update({is_mission_ready:!0}).eq("user_id",e.user_id||"anonymous").then(({error:mt})=>{mt?console.error("Failed to update mission ready status:",mt):console.log("Mission ready status updated successfully")})},dt=()=>{window.open("https://ged.com","_blank"),rt(lt=>({...lt,step1:!0})),supabase.from("profiles").update({deployment_step:1}).eq("user_id",e.user_id||"anonymous").then(({error:lt})=>{lt?console.error("Failed to update deployment step 1:",lt):console.log("Deployment step 1 updated successfully")})},at=()=>{rt(lt=>({...lt,step2:!0})),supabase.from("profiles").update({deployment_step:2}).eq("user_id",e.user_id||"anonymous").then(({error:lt})=>{lt?console.error("Failed to update deployment step 2:",lt):console.log("Deployment step 2 updated successfully")})},ct=lt=>{const ft={...it,[`step3_${lt}`]:!0};rt(ft),ft.step3_govId&&ft.step3_calculator&&ft.step3_location?supabase.from("profiles").update({deployment_step:3,registration_complete:!0}).eq("user_id",e.user_id||"anonymous").then(({error:gt})=>{gt?console.error("Failed to complete registration:",gt):(console.log("Registration completed successfully"),s(jt=>({...jt,hasRegistered:!0})))}):supabase.from("profiles").update({deployment_step:3}).eq("user_id",e.user_id||"anonymous").then(({error:gt})=>{gt?console.error("Failed to update deployment step 3:",gt):console.log("Deployment step 3 updated successfully")})};return jsxRuntimeExports.jsxs("div",{className:`min-h-screen text-white transition-colors duration-700 ${j?"bg-red-950/20":""}`,style:{backgroundColor:"#0b0e14"},children:[jsxRuntimeExports.jsx("div",{className:"glass-panel border-b border-white/10",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-6",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm opacity-50",children:"Warrior Status"}),jsxRuntimeExports.jsx("div",{className:"text-xl font-bold text-aura holographic-text",children:e.hasRegistered?"FIELD OPERATIVE":e.warriorRank}),e.hasRegistered&&jsxRuntimeExports.jsx("div",{className:"text-sm text-orange-400 ml-2",children:"- EXAM PENDING"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 max-w-md ml-8",children:[jsxRuntimeExports.jsx("div",{className:"text-sm opacity-50 mb-1",children:"Sovereignty Progress"}),jsxRuntimeExports.jsx("div",{className:"w-full bg-white/10 rounded-full h-3",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-forge",style:{width:`${e.combatPower.sovereigntyProgress/200*100}%`,boxShadow:"0 0 10px rgba(255, 140, 0, 0.5)"}})}),jsxRuntimeExports.jsxs("div",{className:"text-xs opacity-50 mt-1",children:[e.combatPower.sovereigntyProgress,"/200"]})]}),j&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 ml-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs opacity-50 mb-1",children:"MISSION TIMER"}),jsxRuntimeExports.jsxs("div",{className:`text-2xl font-bold ${$<=30?"text-red-500 animate-pulse":"text-white"}`,children:[Math.floor($/60),":",($%60).toString().padStart(2,"0")]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs opacity-50 mb-1",children:"SUCCESS PROB"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold text-white",children:[tt.toFixed(1),"%"]})]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"neon-card p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-6 holographic-text",children:"Mastery Heatmap"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[jsxRuntimeExports.jsx(MasteryGauge,{masteryPercentage:e.combatPower.math,label:"Math"}),jsxRuntimeExports.jsx(MasteryGauge,{masteryPercentage:e.combatPower.rla,label:"RLA"}),jsxRuntimeExports.jsx(MasteryGauge,{masteryPercentage:e.combatPower.science,label:"Science"}),jsxRuntimeExports.jsx(MasteryGauge,{masteryPercentage:e.combatPower.socialStudies,label:"Social Studies"})]})]}),jsxRuntimeExports.jsxs("div",{className:"neon-card p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-6 holographic-text",children:"Reps & Momentum"}),jsxRuntimeExports.jsx("div",{className:"flex items-end justify-between h-32 gap-2",children:_e.map((lt,ft)=>jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[jsxRuntimeExports.jsx(motion.div,{className:"w-full rounded-t transition-all duration-300",style:{height:`${lt.reps/ot*100}%`,backgroundColor:lt.reps===ot?"#ff8c00":"rgba(255,255,255,0.1)"},initial:{height:0},animate:{height:`${lt.reps/ot*100}%`}}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-50 mt-2",children:lt.day})]},ft))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:`neon-card p-6 border-l-4 ${j?"border-red-600":"border-forge"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${j?"bg-red-600":"bg-forge"}`}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold holographic-text",children:j?"MISSION ACTIVE":"INTEL"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm opacity-80 mb-4",children:["You are currently stalling on ",jsxRuntimeExports.jsx("span",{className:"text-forge font-bold",children:"Quadratic Equations"}),"."]}),jsxRuntimeExports.jsx("button",{onClick:ut,className:"w-full bg-forge text-black font-bold py-3 rounded hover:bg-orange-400 transition-colors",children:"DEPLOY BREAKTHROUGH"})]}),jsxRuntimeExports.jsxs("div",{className:"neon-card p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-6 holographic-text",children:"Range Qualification"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(HexagonalRadar,{data:e.radarData,size:250},JSON.stringify(e.radarData))})]}),e.combatPower.average>=145&&jsxRuntimeExports.jsxs("div",{className:"neon-card p-6",style:{borderLeft:"4px solid #B19CD9"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#B19CD9"}}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold holographic-text",style:{color:"#B19CD9"},children:"DEPLOYMENT READINESS"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:"#B19CD9"},children:"Mission Briefing"}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded border",style:{borderColor:"#B19CD9",backgroundColor:"rgba(177, 156, 217, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full bg-verve text-black text-xs font-bold flex items-center justify-center",children:"1"}),jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Identity Creation"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80 mb-2",children:"Register with official GED testing services"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"w-full py-2 rounded font-medium transition-colors",style:{backgroundColor:"#B19CD9",color:"#000"},children:"GED.COM REGISTRATION"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded border",style:{borderColor:"#B19CD9",backgroundColor:"rgba(177, 156, 217, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full bg-verve text-black text-xs font-bold flex items-center justify-center",children:"2"}),jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Tactical Validation"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80 mb-2",children:'Take official "GED Ready" practice test using current Forge stats'}),jsxRuntimeExports.jsxs("div",{className:"text-xs opacity-60",children:[jsxRuntimeExports.jsxs("div",{children:[" Current Combat Power: ",e.combatPower.average]}),jsxRuntimeExports.jsx("div",{children:" Recommended Baseline: 145+"}),jsxRuntimeExports.jsx("div",{children:" Validation Status: Ready"})]}),jsxRuntimeExports.jsx("button",{onClick:at,className:"w-full mt-2 py-2 rounded font-medium transition-colors",style:{backgroundColor:"#B19CD9",color:"#000"},children:"COMPLETE VALIDATION"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded border",style:{borderColor:"#B19CD9",backgroundColor:"rgba(177, 156, 217, 0.05)"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full bg-verve text-black text-xs font-bold flex items-center justify-center",children:"3"}),jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Scheduling"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm opacity-80 mb-2",children:"Exam Day Essentials Checklist"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-xs opacity-60",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"rounded",checked:it.step3_govId,onChange:()=>ct("govId")}),jsxRuntimeExports.jsx("span",{children:"Valid Government ID"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"rounded",checked:it.step3_calculator,onChange:()=>ct("calculator")}),jsxRuntimeExports.jsx("span",{children:"Approved Calculator"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"rounded",checked:it.step3_location,onChange:()=>ct("location")}),jsxRuntimeExports.jsx("span",{children:"Test Location Confirmed"})]})]})]})]})]})]})]})}),jsxRuntimeExports.jsx(SocraticCoPilot,{isOpen:i,problemData:a,onBreakthrough:ht,onClose:()=>o(!1),isMissionActive:j,missionTimeLimit:180,onMissionComplete:(lt,ft)=>{}}),jsxRuntimeExports.jsx(MissionDebrief,{isOpen:d,missionData:g,sessionData:e,radarData:e.radarData,timePerQuestion:e.timePerQuestion,missionSuccess:(g==null?void 0:g.missionSuccess)||!1,elapsed:(g==null?void 0:g.elapsed)||0,onClose:()=>h(!1)})]})},RangeQual=({onComplete:e,callSign:s})=>{const[i,o]=reactExports.useState(1),[a,c]=reactExports.useState(0),[d,h]=reactExports.useState(0),[g,b]=reactExports.useState(null),[j,_]=reactExports.useState(""),[$,et]=reactExports.useState(""),[tt,nt]=reactExports.useState(!1),[it,rt]=reactExports.useState(1),[_e,st]=reactExports.useState(0),[ot,ut]=reactExports.useState(0),ht={1:()=>{const ct=Math.floor(Math.random()*20)+1,lt=Math.floor(Math.random()*20)+1;return{question:`${ct} + ${lt}`,answer:ct+lt,type:"addition"}},2:()=>{const ct=Math.floor(Math.random()*50)+10,lt=Math.floor(Math.random()*30)+1;return{question:`${ct} - ${lt}`,answer:ct-lt,type:"subtraction"}},3:()=>{const ct=Math.floor(Math.random()*10)+1,lt=Math.floor(Math.random()*9)+1;return{question:`${ct*lt}  ${ct}`,answer:lt,type:"division"}},4:()=>{const ct=Math.floor(Math.random()*10)+1,lt=Math.floor(Math.random()*9)+1;return{question:`${ct}.${lt}  10`,answer:ct*10+lt,type:"decimal_multiplication"}},5:()=>{const ct=Math.floor(Math.random()*9)+1,lt=Math.floor(Math.random()*8)+2;return{question:`${ct}/${lt}  ${lt}`,answer:ct,type:"fraction_simplification"}},6:()=>{const ct=Math.floor(Math.random()*20)+10,lt=[10,25,50,75][Math.floor(Math.random()*4)];return{question:`${lt}% of ${ct}`,answer:ct*lt/100,type:"percentage"}},7:()=>{const ct=Math.floor(Math.random()*10)+1,lt=Math.floor(Math.random()*10)+1;return{question:`${ct}:${lt} ratio, if total is ${ct*3}`,answer:ct*3,type:"ratio"}},8:()=>{const ct=Math.floor(Math.random()*50)+20,lt=[10,20,25,50][Math.floor(Math.random()*4)];return{question:`${ct} increased by ${lt}%`,answer:ct*(1+lt/100),type:"percent_change"}},9:()=>{const ct=Math.floor(Math.random()*10)+1;return{question:`3x + 5 = ${ct*3+5}`,answer:ct,type:"linear_equation"}},10:()=>{const ct=Math.floor(Math.random()*10)+1;return{question:`2x - 3 = ${ct*2-3}`,answer:ct,type:"linear_equation"}}};reactExports.useEffect(()=>{dt()},[i]);const dt=()=>{const ct=ht[i];ct&&(b(ct()),_(""),et(""))},at=()=>{if(!(!g||!j.trim())&&tt)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-gradient-to-br from-slate-800 to-slate-900 border-2 border-lavender-500/30 rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl",style:{boxShadow:"0 0 50px rgba(230, 230, 250, 0.3), inset 0 0 30px rgba(230, 230, 250, 0.1)"},children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-lavender-400",style:{fontFamily:"Courier New, monospace"},children:"RANGE QUAL COMPLETE"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-white text-lg",style:{fontFamily:"Courier New, monospace"},children:["TERMINATION LEVEL: ",it]}),jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-sm",style:{fontFamily:"Courier New, monospace"},children:"STARTING SECTOR ASSIGNED"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>e(it),className:"w-full py-3 bg-gradient-to-r from-lavender-600 to-lavender-700 hover:from-lavender-700 hover:to-lavender-800 text-white rounded-lg font-bold transition-all transform hover:scale-105",style:{fontFamily:"Courier New, monospace"},children:"PROCEED TO THE FORGE"})]})})})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:[jsxRuntimeExports.jsx("style",{jsx:!0,children:`
        .warrior-text {
          font-family: 'Courier New', monospace;
          letter-spacing: 0.05em;
        }
        .glow-lavender {
          text-shadow: 0 0 20px rgba(230, 230, 250, 0.5);
        }
        .range-panel {
          background: rgba(0, 0, 0, 0.7);
          backdrop-filter: blur(10px);
          border: 1px solid rgba(230, 230, 250, 0.2);
        }
      `}),jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"range-panel rounded-2xl p-8 max-w-2xl w-full mx-4 shadow-2xl",style:{boxShadow:"0 0 50px rgba(230, 230, 250, 0.3), inset 0 0 30px rgba(230, 230, 250, 0.1)"},children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-lavender-400 glow-lavender warrior-text mb-2",children:"RANGE QUALIFICATION"}),jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-sm warrior-text uppercase tracking-widest",children:"ADAPTIVE DIAGNOSTIC SCAN"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-white warrior-text",children:["LEVEL: ",i,"/10"]}),jsxRuntimeExports.jsx("div",{className:"text-lavender-300 warrior-text",children:getLevelDescription(i)}),jsxRuntimeExports.jsxs("div",{className:"text-orange-400 warrior-text",children:["CONSECUTIVE INCORRECT: ",d,"/2"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-2 bg-gray-800 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{className:"h-full bg-gradient-to-r from-lavender-500 to-gold-500",initial:{width:"0%"},animate:{width:`${i/10*100}%`},transition:{duration:.5}})}),g&&jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-black/50 rounded-lg p-6 border border-lavender-500/20",children:jsxRuntimeExports.jsxs("div",{className:"text-4xl font-bold text-white warrior-text",children:[g.question," = ?"]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("input",{type:"number",value:j,onChange:ct=>_(ct.target.value),onKeyPress:ct=>ct.key==="Enter"&&at(),placeholder:"Enter your answer",className:"flex-1 px-4 py-3 bg-gray-800 border border-lavender-500/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-lavender-500 warrior-text"}),jsxRuntimeExports.jsx("button",{onClick:at,className:"px-6 py-3 bg-lavender-600 hover:bg-lavender-700 text-white rounded-lg font-bold transition-all transform hover:scale-105 warrior-text",children:"SUBMIT"})]}),$&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`text-lg font-bold warrior-text ${$.includes("CORRECT")?"text-green-400":"text-red-400"}`,children:$})]})]})})]})},MiniTraining=({onComplete:e,terminationLevel:s})=>{const[i,o]=reactExports.useState(0),[a,c]=reactExports.useState(!1);if(reactExports.useEffect(()=>{c(!0)},[]),!a)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"text-amber-400 text-xl",children:" Initializing Training Module..."})});const d=[{title:"PHASE 1: VERVE",subtitle:"Healing & Foundation",color:"lavender",icon:"",description:"Your first phase focuses on restoring mathematical confidence and creating a sanctuary for learning. VERVE represents the gentle healing needed to overcome math anxiety.",benefits:[" Release calculation anxiety"," Create learning sanctuary"," Awaken dormant potential"," Build mathematical confidence"]},{title:"PHASE 2: AURA",subtitle:"Territory & Conquest",color:"cyan",icon:"",description:"AURA phase is about systematic territory conquest. You'll master GED sectors with tactical precision and build operational confidence.",benefits:[" Master GED sectors systematically"," Conquer mathematical territories"," Forge tactical precision"," Build operational confidence"]},{title:"PHASE 3: FORGE",subtitle:"Integration & Mastery",color:"amber",icon:"",description:"FORGE phase integrates all skills into combat-ready mastery. This is where you achieve GED sovereignty and join the elite warriors.",benefits:[" Develop mathematical intuition"," Integrate combat-ready skills"," Join elite warriors"," Achieve GED sovereignty"]}],h=()=>{i<d.length-1?o(i+1):e()},g=_=>{const $={lavender:{bg:"from-lavender-600 to-lavender-700",text:"text-lavender-400",border:"border-lavender-500/30",glow:"shadow-lavender-500/20"},cyan:{bg:"from-cyan-600 to-cyan-700",text:"text-cyan-400",border:"border-cyan-500/30",glow:"shadow-cyan-500/20"},amber:{bg:"from-slate-800 to-slate-900",text:"text-amber-400",border:"border-slate-700/30",glow:"shadow-amber-400/10"}};return $[_]||$.lavender},b=d[i],j=g(b.color);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-10px); }
        }
        
        .warrior-text {
          font-family: 'Courier New', monospace;
          letter-spacing: 0.05em;
        }
        
        .glow-${b.color} {
          text-shadow: 0 0 20px ${b.color==="lavender"?"rgba(230, 230, 250, 0.5)":b.color==="cyan"?"rgba(0, 191, 255, 0.5)":"rgba(255, 191, 0, 0.5)"};
        }
      `}),jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6},className:"max-w-4xl w-full",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5},className:"text-center mb-8",children:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1],y:[0,-5,0]},transition:{scale:{duration:3,repeat:1/0},y:{duration:3,repeat:1/0}},className:"text-8xl mb-4",children:b.icon})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},className:`bg-gradient-to-br ${j.bg} border-2 ${j.border} rounded-2xl p-8 shadow-2xl ${j.glow}`,style:{boxShadow:`0 0 50px ${j.glow}, inset 0 0 30px ${j.glow.replace("0.2","0.1")}`},children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:`text-4xl font-black ${j.text} mb-2 warrior-text glow-${b.color}`,children:b.title}),jsxRuntimeExports.jsx("p",{className:`${j.text} text-lg warrior-text`,children:b.subtitle})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-gray-200 text-lg leading-relaxed warrior-text",children:b.description}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},className:"space-y-3",children:b.benefits.map((_,$)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+$*.1},className:"text-white warrior-text flex items-center space-x-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:_.split(" ")[0]}),jsxRuntimeExports.jsx("span",{children:_.split(" ").slice(1).join(" ")})]},$))}),jsxRuntimeExports.jsx("div",{className:"flex justify-center gap-2",children:d.map((_,$)=>jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${$===i?`${j.text} w-8`:$<i?"bg-gray-500":"bg-gray-700"}`},$))}),jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:1.2,duration:.5},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:`w-full py-4 bg-gradient-to-r ${j.bg} hover:opacity-90 text-white rounded-xl font-bold text-lg transition-all transform hover:scale-105 warrior-text`,children:i<d.length-1?"NEXT PHASE ":" BEGIN TRAINING"})]})}),i===1&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.4,duration:.6},className:"mt-8 bg-gradient-to-r from-blue-600/20 to-cyan-600/20 border border-cyan-500/30 rounded-xl p-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-cyan-400 warrior-text",children:"SOCRATIC CO-PILOT"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 warrior-text",children:"Your AI companion that guides you through challenges without giving answers. It asks questions to help you discover solutions yourself, building true understanding and confidence."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 text-sm",children:[jsxRuntimeExports.jsx("div",{className:"text-cyan-300 warrior-text",children:" Step-by-step guidance"}),jsxRuntimeExports.jsx("div",{className:"text-cyan-300 warrior-text",children:" Builds understanding"}),jsxRuntimeExports.jsx("div",{className:"text-cyan-300 warrior-text",children:" Safety net"})]})]})})]})})]})},DiagnosticFlow=()=>{const[e,s]=reactExports.useState("diagnostic"),[i,o]=reactExports.useState(null),[a,c]=reactExports.useState(!1),[d,h]=reactExports.useState(null),[g,b]=reactExports.useState(""),j=useNavigate(),_=nt=>{o(String(nt)),nt&&nt<60?(h({id:"quadratic_equations",concept:"Quadratic Equations",equation:"x + 5x + 6 = 0",difficulty:nt}),c(!0)):s("training")},$=()=>{s("complete"),localStorage.setItem("gideon_stage_2_complete","true"),setTimeout(()=>{j("/verve")},2e3)},et=()=>{c(!1),h(null),s("training")},tt=()=>{c(!1)};return e==="diagnostic"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(RangeQual,{onComplete:_}),jsxRuntimeExports.jsx(SocraticCoPilot,{isOpen:a,problemData:d,studentMistake:g,onBreakthrough:et,onClose:tt})]}):e==="training"?jsxRuntimeExports.jsx(MiniTraining,{onComplete:$,terminationLevel:String(i)}):e==="complete"?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#0a0a0b"},children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.6},className:"text-6xl mb-4",children:""}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-amber-400",style:{fontFamily:"Courier New, monospace"},children:"TRAINING INITIALIZED"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-lg",children:"Redirecting to your mission briefing..."}),jsxRuntimeExports.jsx("div",{className:"animate-pulse text-cyan-400",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto"})})]})}):null},MissionLandingPage=()=>{const e=useNavigate(),[s,i]=reactExports.useState("");reactExports.useEffect(()=>{const c=localStorage.getItem("gideon_call_sign");c&&i(c);const d=localStorage.getItem("gideon_ai_support_level");d||localStorage.setItem("gideon_ai_support_level","3");const h=localStorage.getItem("gideon_user_id");h||localStorage.setItem("gideon_user_id","temp-"+Date.now()),console.log("Session data initialized:",{callSign:c,aiSupportLevel:d||"3",userId:h||"temp-"+Date.now()})},[]);const o=()=>{s?(console.log("User has call sign, navigating to onboarding:",s),e("/onboarding")):(console.log("New user, navigating to recruitment"),e("/recruitment"))},a=()=>{window.open("https://ko-fi.com/willcee127","_blank")};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen text-white font-mono overflow-x-hidden",style:{backgroundColor:"#0a0a0b"},children:[jsxRuntimeExports.jsxs("section",{className:"relative min-h-screen flex items-center justify-center px-4",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-10",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/20 via-black to-orange-900/20"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-12 gap-px h-full",children:[...Array(144)].map((c,d)=>jsxRuntimeExports.jsx("div",{className:"border border-cyan-500/10 opacity-30",style:{animationDelay:`${d*.1}s`,animationDuration:"2s",animationIterationCount:"infinite"}},d))})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"relative z-10 max-w-4xl mx-auto text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.5},className:"absolute -top-8 -right-8 bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-bold",children:" LIVE SYSTEMS ACTIVE"}),jsxRuntimeExports.jsxs(motion.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},className:"text-4xl md:text-6xl font-black mb-6 leading-tight",children:["Math is the #1 Reason Students",jsxRuntimeExports.jsx("span",{className:"text-orange-500",children:"Fail"})," GED."]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.6},className:"text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto",children:"We Built a Recovery Engine to Fix It."}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-cyan-600 hover:bg-cyan-700 text-black px-8 py-4 rounded-lg font-bold text-lg transition-all duration-200 shadow-lg shadow-cyan-500/50",children:" START MISSION (FREE)"}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-orange-600 hover:bg-orange-700 text-white px-8 py-4 rounded-lg font-bold text-lg transition-all duration-200 shadow-lg shadow-orange-500/50",children:" SUPPORT THE BUILD"})]})]})]}),jsxRuntimeExports.jsx("section",{className:"bg-gray-900 py-20 px-4",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8},className:"text-center mb-16",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl font-black text-orange-500 mb-4",children:"73%"}),jsxRuntimeExports.jsxs("h2",{className:"text-3xl font-bold text-white mb-4",children:["of students who fail GED Math exam",jsxRuntimeExports.jsx("span",{className:"text-cyan-400",children:"never retake it."})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Gideon Prep stops the bleed by identifying the exact moment you struggle and intervening before you quit."})]})})}),jsxRuntimeExports.jsx("section",{className:"bg-black py-20 px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx(motion.h2,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},className:"text-3xl font-bold text-center text-white mb-12",children:"THE THREE PILLARS OF RECOVERY"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-gray-900 border border-cyan-500/30 rounded-lg p-8",children:[jsxRuntimeExports.jsx("div",{className:"text-cyan-400 text-4xl mb-4",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Adaptive Gravity"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Difficulty shifts in real-time based on your wins. If you're struggling, the system adapts. If you're excelling, it challenges you harder."})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-gray-900 border border-cyan-500/30 rounded-lg p-8",children:[jsxRuntimeExports.jsx("div",{className:"text-cyan-400 text-4xl mb-4",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Socratic Co-Pilot"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Breaks walls into steps instead of just giving answers. We guide you through the process so you learn the method, not just memorize solutions."})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gray-900 border border-cyan-500/30 rounded-lg p-8",children:[jsxRuntimeExports.jsx("div",{className:"text-orange-400 text-4xl mb-4",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Tactical Intel"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Strategic advantage monitoring for high-friction moments. When you're stuck, Tactical Intel deploys breakthrough guidance to help you conquer the sector."})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"bg-gray-900 py-20 px-4",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"THE WARRIOR IDENTITY"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-300 mb-12 max-w-3xl mx-auto",children:"A section explaining the shift from 'Student' to 'Warrior.' Use icons for Combat Power, Sectors, and Reps."}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-8 mb-12",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:""}),jsxRuntimeExports.jsx("div",{className:"text-white font-bold",children:"Combat Power"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:""}),jsxRuntimeExports.jsx("div",{className:"text-white font-bold",children:"Sectors"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl mb-2",children:""}),jsxRuntimeExports.jsx("div",{className:"text-white font-bold",children:"Reps"})]})]})]})})}),jsxRuntimeExports.jsx("section",{className:"bg-black py-20 px-4 border-t border-gray-800",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto text-center",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-400 mb-4",children:"THE MISSION BUILDER"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-500 italic",children:"Built by William M. Council II. I use the same high-stakes automation logic I build for businesses to ensure no warrior is left behind."})]})})}),jsxRuntimeExports.jsx("footer",{className:"bg-gray-900 border-t border-gray-800 py-8 px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-8 text-gray-400",children:[jsxRuntimeExports.jsx("a",{href:"https://ko-fi.com/willcee127",target:"_blank",rel:"noopener noreferrer",className:"hover:text-cyan-400 transition-colors",children:" Support the Mission"}),s&&jsxRuntimeExports.jsx("button",{onClick:()=>e("/commander?access=will_prime"),className:"hover:text-cyan-400 transition-colors",children:" Commander Dashboard"}),jsxRuntimeExports.jsx("a",{href:"/privacy",className:"hover:text-cyan-400 transition-colors",children:" Privacy"}),jsxRuntimeExports.jsx("a",{href:"/terms",className:"hover:text-cyan-400 transition-colors",children:" Terms"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center mt-8 text-gray-500 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-orange-400 font-bold",children:"RECRUITMENT PHASE: ALPHA"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 mx-2",children:""}),jsxRuntimeExports.jsx("span",{className:"text-orange-300",children:"gideon-prep-prime.vercel.app"})]}),jsxRuntimeExports.jsx("div",{className:"text-orange-400 font-bold text-lg mb-2",children:"JOIN THE ELITE  ENROLLMENT OPENING SOON"})," 2026 Gideon Prep - Tactical Training Systems"]})]})})]})},RedAlertSimulation=({isMissionActive:e,missionTimer:s,successProbability:i,children:o})=>{const[a,c]=reactExports.useState(0);return reactExports.useEffect(()=>{if(e){const d=setInterval(()=>{c(h=>(h+2)%100)},50);return()=>clearInterval(d)}},[e]),reactExports.useEffect(()=>{const d=document.createElement("style");return d.textContent=`
      @keyframes scanning {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      
      @keyframes radial-pulse {
        0% { transform: scale(1); opacity: 0.1; }
        50% { transform: scale(1.1); opacity: 0.3; }
        100% { transform: scale(1); opacity: 0.1; }
      }
      
      .scanning-line {
        animation: scanning 2s linear infinite;
      }
      
      .radial-pulse {
        animation: radial-pulse 3s ease-in-out infinite;
      }
      
      .red-alert-bg {
        background: radial-gradient(circle at center, rgba(255, 49, 49, 0.1) 0%, transparent 70%);
      }
      
      .red-alert-border {
        border-color: #FF3131;
        box-shadow: 0 0 20px rgba(255, 49, 49, 0.3);
      }
      
      .red-alert-text {
        color: #FF3131;
        text-shadow: 0 0 10px rgba(255, 49, 49, 0.8);
      }
      
      .mission-critical {
        animation: pulse 1s ease-in-out infinite;
        border-color: #FF3131;
      }
      
      @keyframes pulse {
        0%, 100% { box-shadow: 0 0 10px rgba(255, 49, 49, 0.3); }
        50% { box-shadow: 0 0 20px rgba(255, 49, 49, 0.8); }
      }
    `,document.head.appendChild(d),()=>{document.head.removeChild(d)}},[]),jsxRuntimeExports.jsxs("div",{className:`relative min-h-screen ${e?"red-alert-bg":""}`,children:[e&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 pointer-events-none z-50",children:jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-red-500 opacity-50",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-red-500 scanning-line",style:{transform:`translateX(${a-50}%)`,boxShadow:"0 0 10px rgba(255, 49, 49, 0.8)"}})})}),e&&jsxRuntimeExports.jsx("div",{className:"fixed top-4 right-4 z-50",children:jsxRuntimeExports.jsx("div",{className:`px-4 py-2 rounded-lg neon-card ${i<72.5?"mission-critical":""}`,children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs data-text-secondary mb-1",children:"MISSION TIMER"}),jsxRuntimeExports.jsxs("div",{className:`text-2xl font-mono font-bold ${i<72.5?"red-alert-text":"text-verve"}`,children:[Math.floor(s/60),":",(s%60).toString().padStart(2,"0")]}),jsxRuntimeExports.jsxs("div",{className:"text-sm data-text-secondary mt-1",children:["SUCCESS PROBABILITY: ",i.toFixed(1),"%"]}),i<72.5&&jsxRuntimeExports.jsx("div",{className:"text-xs red-alert-text font-bold mt-2",children:" MISSION CRITICAL"})]})})}),jsxRuntimeExports.jsx("div",{className:e?"radial-pulse":"",children:o})]})},VictorySequence=({isActive:e,onVictoryComplete:s,children:i})=>{const o=reactExports.useRef(null),[a,c]=reactExports.useState([]),[d,h]=reactExports.useState(!1),[g,b]=reactExports.useState(!1),j=reactExports.useRef(null);reactExports.useEffect(()=>{if(e){const et=Array.from({length:50},(tt,nt)=>({id:nt,x:window.innerWidth/2,y:window.innerHeight/2,vx:(Math.random()-.5)*8,vy:(Math.random()-.5)*8,size:Math.random()*4+2,color:Math.random()>.5?"#FF8C00":"#FFD700",life:1}));c(et),setTimeout(()=>b(!0),500),setTimeout(()=>h(!0),800),setTimeout(()=>{h(!1),b(!1),s&&s()},2e3),setTimeout(()=>c([]),3e3)}else c([]),h(!1),b(!1)},[e]),reactExports.useEffect(()=>{const et=o.current;if(!et)return;const tt=et.getContext("2d");if(!tt)return;let nt;const it=()=>{tt.clearRect(0,0,et.width,et.height),a.forEach((_e,st)=>{_e.x+=_e.vx,_e.y+=_e.vy,_e.life-=.02,_e.vy+=.2,_e.life>0&&(tt.save(),tt.globalAlpha=_e.life,tt.fillStyle=_e.color,tt.beginPath(),tt.arc(_e.x,_e.y,_e.size,0,Math.PI*2),tt.fill(),tt.restore())});const rt=a.filter(_e=>_e.life>0);c(rt),nt=requestAnimationFrame(it)};return it(),()=>{cancelAnimationFrame(nt)}},[a]);const _=()=>{j.current&&j.current.play().catch(et=>console.error("Audio playback failed:",et))},$=()=>{"vibrate"in navigator&&navigator.vibrate([200,100,200])};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",style:{backgroundColor:"rgba(0, 0, 0, 0.8)"},children:[jsxRuntimeExports.jsx("canvas",{ref:o,width:window.innerWidth,height:window.innerHeight,className:"absolute inset-0",style:{mixBlendMode:"screen"}}),jsxRuntimeExports.jsx(AnimatePresence,{children:g&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"victory-text",children:[jsxRuntimeExports.jsx("div",{className:"glitch-text",children:"FORGE COMMAND ACTIVE"}),jsxRuntimeExports.jsx("div",{className:"sub-text",children:"TEST READY"})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:d&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:jsxRuntimeExports.jsx("div",{className:"explosion-text",children:jsxRuntimeExports.jsx("div",{className:"glitch-text",children:"ENERGY CORE: MAXIMUM"})})})})]})}),jsxRuntimeExports.jsxs("audio",{ref:j,preload:"auto",children:[jsxRuntimeExports.jsx("source",{src:"/sounds/forge-power-up.mp3",type:"audio/mpeg"}),jsxRuntimeExports.jsx("source",{src:"/sounds/forge-power-up.ogg",type:"audio/ogg"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{_(),$()},className:"hidden",children:"Test Effects"}),jsxRuntimeExports.jsx("div",{className:`forge-mode ${e?"active":""}`,children:i})]})},StageIcon=({level:e,isPulsing:s=!1})=>{const o=(c=>c>=5?"VERVE":c>=3?"AURA":"FORGE")(e),a=()=>{switch(o){case"VERVE":return jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M12 2L4 7V12C4 16.5 7.5 20.5 12 22C16.5 20.5 20 16.5 20 12V7L12 2Z",stroke:"var(--verve-lavender)",strokeWidth:"2",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M12 8L14 10L12 12L10 10L12 8Z",fill:"var(--verve-lavender)"})]});case"AURA":return jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",stroke:"var(--aura-electric-blue)",strokeWidth:"2",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"var(--aura-electric-blue)"})]});case"FORGE":return jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M3 3L7 7L3 11L7 15L3 19L7 23L11 19L15 23L19 19L23 23L19 19L23 15L19 11L23 7L19 3L15 7L11 3L7 7L3 3Z",stroke:"var(--forge-orange)",strokeWidth:"2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"10",y:"10",width:"4",height:"4",fill:"var(--forge-orange)"})]});default:return null}};return jsxRuntimeExports.jsx(motion.div,{animate:s?{scale:[1,1.2,1],opacity:[1,.7,1]}:{},transition:{duration:.6,repeat:s?2:0,ease:"easeInOut"},className:"stage-icon",children:a()})},StatusReport=({userName:e,fullName:s,callSign:i,streak:o,aiSupportLevel:a,maxStreak:c=5})=>{const[d,h]=reactExports.useState(!1),[g,b]=reactExports.useState([]),[j,_]=reactExports.useState(!1),[$,et]=reactExports.useState(o),[tt,nt]=reactExports.useState(!1),[it,rt]=reactExports.useState(!1),_e=yt=>yt>=5?"VERVE":yt>=3?"AURA":"FORGE",st=yt=>{switch(yt){case 5:return"HEAVY SUPPORT";case 4:return"STABILIZING";case 3:return"BALANCED";case 2:return"ADVANCING";case 1:return"INDEPENDENT";default:return"BALANCED"}},ot=yt=>{switch(yt){case 5:return"text-purple-400";case 4:return"text-purple-300";case 3:return"text-emerald-400";case 2:return"text-cyan-400";case 1:return"text-cyan-300";default:return"text-emerald-400"}},ut=(yt,vt)=>{const Ct=[];for(let pt=0;pt<vt;pt++)pt<yt?Ct.push(""):Ct.push("");return Ct},ht=async()=>{_(!0);const yt=document.createElement("div");yt.className="fixed top-4 right-4 z-50",yt.innerHTML='<div class="w-3 h-3 rounded-full lavender-pulse"></div>',document.body.appendChild(yt);try{const vt=localStorage.getItem("gideon_user_id");if(!vt){console.warn("No profile ID found for mission history"),b([]);return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(vt)){console.error("Invalid profile ID format:",vt),b([]);return}console.log("Fetching mission history for profile:",vt);const{data:pt,error:xt}=await supabase.from("student_mission_history").select("id, mission_type, sector_name, accuracy, completion_time, status, completed_at").eq("profile_id",vt).order("completed_at",{ascending:!1}).limit(5);if(xt){console.error("Mission history query error:",xt),b([]);return}b(pt||[]),console.log(`Loaded ${(pt==null?void 0:pt.length)||0} mission records`)}catch(vt){console.error("Failed to fetch mission history:",vt),b([])}finally{_(!1),yt.parentNode&&yt.parentNode.removeChild(yt)}};reactExports.useEffect(()=>{(()=>{const vt=localStorage.getItem("gideon_user_id");vt&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(vt)?rt(!0):(rt(!1),console.warn("Profile verification failed:",vt))})()},[]);const dt=()=>{h(!0),ht()};reactExports.useEffect(()=>{o!==$&&(et(o),o>=5&&$<5&&(nt(!0),setTimeout(()=>nt(!1),1200)))},[o,$]);const at=ut(o,c),ct=_e(a),lt=st(a),ft=ot(a),mt=o/c*100,gt=o<$,jt=o===c;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!it&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed top-4 right-4 z-50",children:jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-200 animate-pulse shadow-[0_0_10px_rgba(230, 230, 250, 0.8)]"})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},transition:{duration:.5,ease:"easeOut"},className:"fixed top-4 right-4 z-50 pointer-events-none",children:[jsxRuntimeExports.jsxs("div",{className:"aura-hud-panel rounded-2xl p-6 min-w-[320px] backdrop-blur-xl border-2 shadow-2xl pointer-events-auto",children:[jsxRuntimeExports.jsx("div",{className:"mb-4 pb-4 border-b border-white/20",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse shadow-[0_0_10px_rgba(34,197,94,0.5)]"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 font-mono uppercase tracking-widest operator-label",children:"OPERATOR"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-white font-mono",children:i||"WARRIOR"}),s&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 font-mono mt-1",children:s})]})]})}),jsxRuntimeExports.jsxs("div",{className:"mb-4 pb-4 border-b border-white/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 font-mono uppercase tracking-widest hud-label",children:"STATUS"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(StageIcon,{level:a,isPulsing:tt}),jsxRuntimeExports.jsxs("span",{className:`text-sm font-bold font-mono ${ft} level-label`,children:["LVL ",a]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 font-mono stage-label",children:ct})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 font-mono",children:lt})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4 pb-4 border-b border-white/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 font-mono uppercase tracking-widest power-label",children:"POWER"}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-mono text-white",children:[o,"/",c]})]}),jsxRuntimeExports.jsx("div",{className:"relative w-full bg-black/50 rounded-full h-3 overflow-hidden",children:jsxRuntimeExports.jsxs(motion.div,{initial:{width:gt?`${$/c*100}%`:"0%",opacity:gt?1:0},animate:{width:`${mt}%`,opacity:1},transition:{duration:gt?.3:.5,ease:gt?"easeIn":"easeOut"},className:"h-full rounded-full relative overflow-hidden",style:{backgroundColor:"var(--aura-primary)"},children:[jt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:.6,repeat:2},className:"absolute inset-0 bg-white"}),gt&&jsxRuntimeExports.jsx(motion.div,{initial:{x:0,opacity:1},animate:{x:"100%",opacity:0},transition:{duration:.3,ease:"easeIn"},className:"absolute inset-0 bg-red-500"})]},`power-bar-${o}`)}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-1 mt-2",children:at.map((yt,vt)=>jsxRuntimeExports.jsx(motion.span,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:vt*.1,duration:.3},className:"text-sm",children:yt},vt))})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:dt,className:"w-full py-2 px-4 aura-hud-button rounded-lg text-xs font-mono uppercase tracking-widest flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:"Mission Logs"})]})}),jsxRuntimeExports.jsx("div",{className:"absolute -top-1 -right-1",children:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.2,1],opacity:[.8,.3,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-4 h-4 rounded-full aura-bg-primary"})})]}),jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute -top-2 -right-2",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full aura-bg-primary flex items-center justify-center shadow-lg",children:jsxRuntimeExports.jsx("span",{className:"text-white text-xs font-bold",children:a})})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:d&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>h(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 h-full w-full max-w-md bg-black/95 backdrop-blur-xl border-l border-white/20 shadow-2xl overflow-hidden",onClick:yt=>yt.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/20",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white font-mono",children:"Mission Logs"}),jsxRuntimeExports.jsx("button",{onClick:()=>h(!1),className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/10 hover:bg-red-500 hover:text-white transition-all",children:""})]}),jsxRuntimeExports.jsx("div",{className:"p-6 overflow-y-auto h-full",children:j?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-32",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"})}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-400 py-8",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-mono",children:"No missions completed yet"}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-2",children:"Complete training missions to see your history"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:g.map((yt,vt)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:vt*.1},className:"aura-hud-panel rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-bold text-white font-mono",children:yt.mission_type}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 font-mono",children:new Date(yt.completed_at).toLocaleDateString()})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Sector:"}),jsxRuntimeExports.jsx("span",{className:"text-white font-mono",children:yt.sector_name})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Accuracy:"}),jsxRuntimeExports.jsxs("span",{className:"text-white font-mono",children:[yt.accuracy,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Time:"}),jsxRuntimeExports.jsxs("span",{className:"text-white font-mono",children:[yt.completion_time,"s"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Status:"}),jsxRuntimeExports.jsx("span",{className:`font-mono ${yt.status==="completed"?"text-green-400":"text-yellow-400"}`,children:yt.status.toUpperCase()})]})]})]},yt.id))})})]})})})]})},CapstoneCertificate=({isVisible:e,onClose:s})=>{var et;const[i,o]=reactExports.useState(null),[a,c]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{const tt=localStorage.getItem("gideon_user_id");if(!tt){console.error("No profile ID found in localStorage"),alert("Profile verification failed. Please restart your session."),s();return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(tt)){console.error("Invalid profile ID format:",tt),alert("Profile verification failed. Invalid session data."),s();return}console.log("Loading profile data for ID:",tt);const{data:it,error:rt}=await supabase.from("profiles").select("id, full_name, call_sign, email, ai_support_level, current_streak, created_at, updated_at").eq("id",tt).single();if(rt){console.error("Database error:",rt),rt.code==="PGRST116"?alert("Profile not found. Please complete identity verification."):alert("Failed to verify profile. Please try again."),s();return}if(!it){console.error("No profile data returned"),alert("Profile data incomplete. Please contact support."),s();return}if(!it.full_name||!it.call_sign){console.error("Missing required profile fields:",it),alert("Profile incomplete. Please complete your identity information."),s();return}console.log("Profile data loaded successfully:",{id:it.id,call_sign:it.call_sign,full_name:it.full_name,ai_support_level:it.ai_support_level}),it.ai_support_level===1?(o(it),c(!0),await h(it)):(console.log("Student not yet GED Ready. Current level:",it.ai_support_level),alert(`Capstone Certificate requires Level 1 (Forge Certified). Current level: ${it.ai_support_level}`),s())}catch(tt){console.error("Unexpected error in loadProfileData:",tt),alert("An unexpected error occurred. Please try again."),s()}},h=async tt=>{try{const nt={type:"capstone_certificate",earned_at:new Date().toISOString(),ai_support_level:tt.ai_support_level,call_sign:tt.call_sign,full_name:tt.full_name,readiness_score:g(tt)};await supabase.from("profiles").update({achievements:nt,capstone_earned:!0,updated_at:new Date().toISOString()}).eq("id",tt.id),console.log("Capstone achievement saved:",nt)}catch(nt){console.error("Failed to save capstone achievement:",nt)}},g=tt=>{let nt=0;return nt+=(6-tt.ai_support_level)*20,nt+=Math.min(tt.current_streak*10,30),nt+=25,Math.min(nt,100)},b=tt=>[{level:5,name:"VERVE",description:"Heavy Support - Building Foundation"},{level:4,name:"TRANSITION",description:"Stabilizing - Growing Confidence"},{level:3,name:"AURA",description:"Balanced - Finding Your Rhythm"},{level:2,name:"ADVANCEMENT",description:"Advancing - Developing Independence"},{level:1,name:"FORGE",description:"Independent - GED Ready"}].filter(it=>it.level>=tt);if(!a||!i)return null;const j=g(i),_=b(i.ai_support_level),$=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return jsxRuntimeExports.jsx(AnimatePresence,{children:a&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0,rotateY:-90},animate:{scale:1,opacity:1,rotateY:0},exit:{scale:.8,opacity:0,rotateY:90},transition:{type:"spring",damping:20,stiffness:300,duration:.8},className:"relative bg-gradient-to-br from-amber-50 to-orange-50 border-4 border-orange-400 rounded-2xl p-8 max-w-4xl w-full mx-4 shadow-2xl",style:{boxShadow:"0 25px 50px -12px rgba(251, 146, 60, 0.25)",background:"linear-gradient(135deg, #fffbeb 0%, #fed7aa 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5},className:"inline-block",children:jsxRuntimeExports.jsx("div",{className:"text-6xl mb-4",children:""})}),jsxRuntimeExports.jsx(motion.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"text-4xl font-bold text-orange-800 mb-2 certificate-title",style:{fontFamily:"Orbitron, monospace"},children:"GIDEON CAPSTONE CERTIFICATE"}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.5},className:"text-lg text-orange-600 font-semibold stage-label",style:{fontFamily:"Orbitron, monospace"},children:"GED READY  FORGE CERTIFIED"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white/60 rounded-lg p-6 mb-6 border-2 border-orange-300",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-semibold uppercase tracking-wider mb-1",children:"Legal Name"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-gray-800",style:{fontFamily:"Inter, sans-serif"},children:i.full_name})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 font-semibold uppercase tracking-wider mb-1",children:"Operator Designation"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-orange-600",style:{fontFamily:"Orbitron, monospace"},children:i.call_sign})]})]})}),jsxRuntimeExports.jsx("div",{className:"text-center mb-6",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5},className:"inline-block bg-gradient-to-r from-orange-400 to-orange-600 text-white rounded-full px-6 py-3 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold uppercase tracking-wider",style:{fontFamily:"Orbitron, monospace"},children:"Readiness Score"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold",children:[j,"%"]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white/40 rounded-lg p-6 mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-orange-800 mb-4 text-center",style:{fontFamily:"Orbitron, monospace"},children:"Journey Progression"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:_.map((tt,nt)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1.1+nt*.1,duration:.4},className:"flex items-center justify-between p-3 rounded-lg bg-white/60",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${tt.level<=i.ai_support_level?"bg-orange-500":"bg-gray-400"}`,children:6-tt.level}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-gray-800",style:{fontFamily:"Orbitron, monospace"},children:tt.name}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",style:{fontFamily:"Inter, sans-serif"},children:tt.description})]})]}),tt.level<=i.ai_support_level&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:1.3+nt*.1,duration:.3},className:"text-green-500 text-xl",children:""})]},tt.level))})]}),jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",style:{fontFamily:"Inter, sans-serif"},children:[jsxRuntimeExports.jsxs("p",{children:["Issued on ",$]}),jsxRuntimeExports.jsxs("p",{className:"mt-1",children:["Certificate ID: GID-",(et=i.id)==null?void 0:et.slice(0,8).toUpperCase()]})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.6,duration:.5},className:"text-xs text-gray-500 italic",style:{fontFamily:"Inter, sans-serif"},children:'"The territory is yours because you earned it, one rep at a time."'})]}),jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.8,duration:.5},onClick:()=>{c(!1),s&&s()},className:"absolute top-4 right-4 bg-orange-500 hover:bg-orange-600 text-white rounded-full p-2 shadow-lg transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:.15,scale:1},transition:{delay:2.2,duration:1},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1],opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 rounded-full",style:{width:"200px",height:"200px",background:"radial-gradient(circle, rgba(255, 140, 0, 0.4) 0%, rgba(255, 140, 0, 0.1) 50%, transparent 100%)",filter:"blur(20px)",transform:"translate(-50%, -50%)",left:"50%",top:"50%"}}),jsxRuntimeExports.jsxs("svg",{width:"200",height:"200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"relative z-10",style:{transform:"rotate(-15deg)"},children:[jsxRuntimeExports.jsx("path",{d:"M3 3L7 7L3 11L7 15L3 19L7 23L11 19L15 23L19 19L23 23L19 19L23 15L19 11L23 7L19 3L15 7L11 3L7 7L3 3Z",stroke:"#FF8C00",strokeWidth:"1.5",fill:"none",opacity:"0.8"}),jsxRuntimeExports.jsx("rect",{x:"10",y:"10",width:"4",height:"4",fill:"#FF8C00",opacity:"0.6"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"8",stroke:"#FF8C00",strokeWidth:"0.5",fill:"none",opacity:"0.4"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:.4},transition:{delay:2.5,duration:1},className:"absolute inset-0 flex items-center justify-center",style:{transform:"translate(-50%, -50%) rotate(-15deg)",left:"50%",top:"50%"},children:jsxRuntimeExports.jsx("div",{className:"text-orange-600 font-bold text-xs",style:{fontFamily:"Orbitron, monospace",letterSpacing:"0.2em",textTransform:"uppercase"},children:"FORGE CERTIFIED"})})]})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:.1},transition:{delay:2,duration:1},className:"absolute top-0 left-0 w-full h-full pointer-events-none",style:{background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(251, 146, 60, 0.1) 10px, rgba(251, 146, 60, 0.1) 20px)",borderRadius:"1rem"}})]})})})},ReadinessReport=({isVisible:e,onClose:s,profileId:i})=>{const[o,a]=reactExports.useState(null),[c,d]=reactExports.useState(!1);reactExports.useEffect(()=>{e&&i&&h()},[e,i]);const h=async()=>{d(!0);try{const{data:it,error:rt}=await supabase.from("final_readiness_summary").select("*").eq("profile_id",i).single();if(rt){console.error("Failed to fetch readiness data:",rt),a(null);return}a(it),console.log("Readiness data loaded:",it)}catch(it){console.error("Unexpected error fetching readiness data:",it),a(null)}finally{d(!1)}};if(!e)return null;if(c)return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:jsxRuntimeExports.jsx("div",{className:"bg-black/90 border border-orange-400 rounded-2xl p-8 max-w-2xl mx-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-orange-400 border-t-transparent mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-orange-400 text-lg",style:{fontFamily:"Orbitron, monospace"},children:"LOADING READINESS REPORT..."})]})})});if(!o)return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:jsxRuntimeExports.jsx("div",{className:"bg-black/90 border border-red-400 rounded-2xl p-8 max-w-2xl mx-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-6xl",children:""}),jsxRuntimeExports.jsx("p",{className:"text-red-400 text-lg",style:{fontFamily:"Orbitron, monospace"},children:"READINESS DATA UNAVAILABLE"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",style:{fontFamily:"Inter, sans-serif"},children:"Unable to load your readiness summary. Please try again later."}),jsxRuntimeExports.jsx("button",{onClick:s,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors",children:"Close"})]})})});const{full_name:g,call_sign:b,verve_missions:j,aura_missions:_,forge_missions:$,total_missions:et,readiness_score:tt}=o,nt=$>0;return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",damping:25,stiffness:300,duration:.8},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:jsxRuntimeExports.jsxs(motion.div,{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-black border border-gray-600 rounded-2xl p-8 max-w-4xl w-full mx-4 shadow-2xl",style:{background:"linear-gradient(135deg, #111827 0%, #1f2937 50%, #000000 100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsxs(motion.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},className:"text-3xl font-bold text-white mb-2",style:{fontFamily:"Orbitron, monospace"},children:["FINAL READINESS REPORT: ",g," (",b,")"]}),nt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7,duration:.5},className:"inline-block bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 py-2 rounded-full",children:jsxRuntimeExports.jsx("span",{className:"font-bold text-sm",style:{fontFamily:"Orbitron, monospace"},children:"GED READY"})})]}),jsxRuntimeExports.jsx("div",{className:"text-center mb-8",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.9,duration:.5},className:"inline-block bg-gray-800 border border-gray-600 rounded-lg px-6 py-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-400 mb-1",style:{fontFamily:"Inter, sans-serif"},children:"Overall Readiness"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-white",style:{fontFamily:"Orbitron, monospace"},children:[tt,"%"]})]})}),jsxRuntimeExports.jsx("div",{className:"text-center mb-6",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1,duration:.5},className:"text-sm text-gray-400",style:{fontFamily:"Inter, sans-serif"},children:["Total Missions Completed: ",et]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.5},className:"bg-gradient-to-br from-purple-900/50 to-purple-800/30 border border-purple-400/50 rounded-xl p-6 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-purple-200 flex items-center justify-center",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M12 2L4 7V12C4 16.5 7.5 20.5 12 22C16.5 20.5 20 16.5 20 12V7L12 2Z",stroke:"#E6E6FA",strokeWidth:"2",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M12 8L14 10L12 12L10 10L12 8Z",fill:"#E6E6FA"})]})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-purple-300",style:{fontFamily:"Orbitron, monospace"},children:"VERVE"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-white",style:{fontFamily:"Orbitron, monospace"},children:j}),jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-400 mt-2",style:{fontFamily:"Inter, sans-serif"},children:"Recovery-Phase Missions"})]})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.4,duration:.5},className:"bg-gradient-to-br from-blue-900/50 to-blue-800/30 border border-blue-400/50 rounded-xl p-6 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-blue-200 flex items-center justify-center",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",stroke:"#7DF9FF",strokeWidth:"2",fill:"none"}),jsxRuntimeExports.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#7DF9FF"})]})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-blue-300",style:{fontFamily:"Orbitron, monospace"},children:"AURA"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-white",style:{fontFamily:"Orbitron, monospace"},children:_}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-400 mt-2",style:{fontFamily:"Inter, sans-serif"},children:"Growth-Phase Missions"})]})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.6,duration:.5},className:"bg-gradient-to-br from-orange-900/50 to-orange-800/30 border border-orange-400/50 rounded-xl p-6 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-orange-200 flex items-center justify-center",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M3 3L7 7L3 11L7 15L3 19L7 23L11 19L15 23L19 19L23 23L19 19L23 15L19 11L23 7L19 3L15 7L11 3L7 7L3 3Z",stroke:"#FF8C00",strokeWidth:"2",fill:"none"}),jsxRuntimeExports.jsx("rect",{x:"10",y:"10",width:"4",height:"4",fill:"#FF8C00"})]})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-orange-300",style:{fontFamily:"Orbitron, monospace"},children:"FORGE"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-white",style:{fontFamily:"Orbitron, monospace"},children:$}),jsxRuntimeExports.jsx("p",{className:"text-xs text-orange-400 mt-2",style:{fontFamily:"Inter, sans-serif"},children:"Independent-Phase Missions"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.8,duration:.5},className:"inline-block",children:nt?jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",style:{fontFamily:"Inter, sans-serif"},children:"MISSION ACCOMPLISHED"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold",style:{fontFamily:"Inter, sans-serif"},children:"IN PROGRESS"})]})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:.5},className:"text-xs text-gray-500",style:{fontFamily:"Inter, sans-serif"},children:["Generated on ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2.2,duration:.5},onClick:s,className:"absolute top-4 right-4 bg-gray-700 hover:bg-gray-600 text-white rounded-full p-2 shadow-lg transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})};class StatusReportErrorBoundary extends React.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,i){console.error("StatusReport Error Boundary caught an error:",s,i),this.setState({error:s,errorInfo:i}),console.warn("Error logged to monitoring service")}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"fixed top-4 right-4 z-40",children:jsxRuntimeExports.jsxs("div",{className:"bg-black/80 backdrop-blur-sm border border-red-500/50 rounded-lg p-3 text-white text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{children:"Status Report Offline"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-gray-400",children:[this.props.callSign||"WARRIOR","  Level ",this.props.aiSupportLevel||"?"]})]})}):this.props.children}}class CapstoneCertificateErrorBoundary extends React.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,i){console.error("CapstoneCertificate Error Boundary caught an error:",s,i),this.setState({error:s,errorInfo:i}),console.warn("Certificate error logged to monitoring service")}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-orange-400 rounded-lg p-6 max-w-md mx-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-4xl",children:""}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-orange-800",style:{fontFamily:"Orbitron, monospace"},children:"Certificate Available"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",style:{fontFamily:"Inter, sans-serif"},children:"Congratulations on achieving GED Ready status! Your certificate is ready but encountered a display issue."}),jsxRuntimeExports.jsx("button",{onClick:this.props.onClose,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition-colors",children:"Close"})]})})}):this.props.children}}class GenericErrorBoundary extends React.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,i){console.error("Generic Error Boundary caught an error:",s,i),this.setState({error:s,errorInfo:i})}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"fixed top-4 left-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-red-900/90 backdrop-blur-sm border border-red-500 rounded-lg p-3 text-white text-xs max-w-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),jsxRuntimeExports.jsx("span",{children:"System Error"})]}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-red-200",children:this.props.fallbackMessage||"An unexpected error occurred"})]})}):this.props.children}}class AssetPreloader{constructor(){this.loadedAssets=new Set,this.loadingPromises=new Map}async preloadSVGs(){const i=Object.entries({verveShield:`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L4 7V12C4 16.5 7.5 20.5 12 22C16.5 20.5 20 16.5 20 12V7L12 2Z" 
                stroke="#E6E6FA" strokeWidth="2" fill="none"/>
          <path d="M12 8L14 10L12 12L10 10L12 8Z" fill="#E6E6FA"/>
        </svg>
      `,auraBolt:`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" 
                stroke="#7DF9FF" strokeWidth="2" fill="none"/>
          <circle cx="12" cy="12" r="2" fill="#7DF9FF" />
        </svg>
      `,forgeHammer:`
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3L7 7L3 11L7 15L3 19L7 23L11 19L15 23L19 19L23 23L19 19L23 15L19 11L23 7L19 3L15 7L11 3L7 7L3 3Z" 
                stroke="#FF8C00" strokeWidth="2" fill="none"/>
          <rect x="10" y="10" width="4" height="4" fill="#FF8C00" />
        </svg>
      `,forgeHammerSeal:`
        <svg width="200" height="200" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3L7 7L3 11L7 15L3 19L7 23L11 19L15 23L19 19L23 23L19 19L23 15L19 11L23 7L19 3L15 7L11 3L7 7L3 3Z" 
                stroke="#FF8C00" strokeWidth="1.5" fill="none" opacity="0.8"/>
          <rect x="10" y="10" width="4" height="4" fill="#FF8C00" opacity="0.6"/>
          <circle cx="12" cy="12" r="8" stroke="#FF8C00" strokeWidth="0.5" fill="none" opacity="0.4"/>
        </svg>
      `}).map(async([o,a])=>{if(this.loadedAssets.has(o))return;const c=new Blob([a],{type:"image/svg+xml"}),d=URL.createObjectURL(c);return new Promise((h,g)=>{const b=new Image;b.onload=()=>{this.loadedAssets.add(o),URL.revokeObjectURL(d),h(o)},b.onerror=g,b.src=d})});await Promise.all(i),console.log("SVG assets preloaded:",Array.from(this.loadedAssets))}async preloadFonts(){const i=[{family:"Orbitron",weight:"400",style:"normal"},{family:"Orbitron",weight:"700",style:"normal"},{family:"Orbitron",weight:"900",style:"normal"},{family:"Inter",weight:"400",style:"normal"},{family:"Inter",weight:"600",style:"normal"}].map(o=>{const a=`${o.family}-${o.weight}-${o.style}`;return this.loadedAssets.has(a)?Promise.resolve(a):new Promise((c,d)=>{const h=new FontFace(o.family,`url(https://fonts.gstatic.com/s/${o.family.toLowerCase()}/v${this.getRandomVersion()}.woff2) format('woff2')`,{weight:o.weight,style:o.style});h.load().then(()=>{document.fonts.add(h),this.loadedAssets.add(a),c(a)}).catch(d)})});await Promise.all(i),console.log("Fonts preloaded:",Array.from(this.loadedAssets).filter(o=>o.includes("Orbitron")||o.includes("Inter")))}getRandomVersion(){return Math.floor(Math.random()*20)+1}async initialize(){try{await Promise.all([this.preloadSVGs(),this.preloadFonts()]),console.log("Asset preloading completed successfully")}catch(s){console.error("Asset preloading failed:",s)}}isLoaded(s){return this.loadedAssets.has(s)}getLoadingStatus(){return{totalAssets:this.loadedAssets.size,loadedAssets:Array.from(this.loadedAssets)}}}const assetPreloader=new AssetPreloader,ForgeProtectedRoute=({children:e})=>{const s=useNavigate();return reactExports.useEffect(()=>{localStorage.getItem("gideon_stage_2_complete")==="true"||s("/verve")},[s]),localStorage.getItem("gideon_stage_2_complete")==="true"?e:jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-red-400 mb-4",children:" ACCESS DENIED"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-300 mb-4",children:"Forge Stage Locked"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-6",children:"You must complete Stage 2 (Aura) to access Stage 3 (Forge)"}),jsxRuntimeExports.jsx("button",{onClick:()=>s("/verve"),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition-all",children:"Return to Verve"})]})})};function App(){var kt;const{sessionData:e,setSessionData:s}=useSessionSync({combatPower:{math:75,rla:82,science:68,socialStudies:71},radarData:{numberSense:85,algebra:72,geometry:68,dataAnalysis:45,fractions:58,appliedMath:78},warriorRank:"Specialist"}),[i,o]=reactExports.useState(0),[a,c]=reactExports.useState(0),[d,h]=reactExports.useState(()=>parseInt(localStorage.getItem("gideon_ai_support_level")||"3")),[g,b]=reactExports.useState(null),[j,_]=reactExports.useState(!1),[$,et]=reactExports.useState(!1),[tt,nt]=reactExports.useState(!1),[it,rt]=reactExports.useState(!1),[_e,st]=reactExports.useState(!1),[ot,ut]=reactExports.useState(!1),[ht,dt]=reactExports.useState(!1),[at,ct]=reactExports.useState(!1),[lt,ft]=reactExports.useState(180),[mt,gt]=reactExports.useState(100),[jt,yt]=reactExports.useState(!1),[vt,Ct]=reactExports.useState(!1),[pt,xt]=reactExports.useState(()=>({fullName:localStorage.getItem("gideon_full_name")||"",callSign:localStorage.getItem("gideon_call_sign")||"",email:localStorage.getItem("gideon_email")||""})),Et=reactExports.useRef(Date.now()),Tt=(()=>{switch(d){case 5:return{primaryColor:"var(--verve-lavender)",secondaryColor:"var(--verve-lavender-light)",accentColor:"var(--verve-ghost-white)",borderColor:"var(--verve-lavender)",glowColor:"var(--verve-glow)",hudIntensity:"high",theme:"verve"};case 3:return{primaryColor:"var(--aura-electric-blue)",secondaryColor:"var(--aura-electric-blue-light)",accentColor:"var(--aura-light-blue)",borderColor:"var(--aura-electric-blue)",glowColor:"var(--aura-glow)",hudIntensity:"medium",theme:"aura"};case 1:return{primaryColor:"var(--forge-orange)",secondaryColor:"var(--forge-orange-light)",accentColor:"var(--forge-orange-accent)",borderColor:"var(--forge-orange)",glowColor:"var(--forge-glow)",hudIntensity:"minimal",theme:"forge"};default:return{primaryColor:"var(--aura-electric-blue)",secondaryColor:"var(--aura-electric-blue-light)",accentColor:"var(--aura-light-blue)",borderColor:"var(--aura-electric-blue)",glowColor:"var(--aura-glow)",hudIntensity:"medium",theme:"aura"}}})();reactExports.useEffect(()=>{const wt=document.documentElement;wt.style.setProperty("--aura-primary",Tt.primaryColor),wt.style.setProperty("--aura-secondary",Tt.secondaryColor),wt.style.setProperty("--aura-accent",Tt.accentColor),wt.style.setProperty("--aura-border",Tt.borderColor),wt.style.setProperty("--aura-glow",Tt.glowColor),wt.style.setProperty("--aura-intensity",Tt.hudIntensity),document.body.className=document.body.className.replace(/aura-\w+/g,""),document.body.classList.add(`aura-${Tt.theme}`),console.log(`Dynamic HUD Applied: ${Tt.theme.toUpperCase()} (Level ${d})`)},[d,Tt]),reactExports.useEffect(()=>{const wt=()=>{xt({fullName:localStorage.getItem("gideon_full_name")||"",callSign:localStorage.getItem("gideon_call_sign")||"",email:localStorage.getItem("gideon_email")||""})};wt();const Rt=Dt=>{var Mt;(Mt=Dt.key)!=null&&Mt.startsWith("gideon_")&&wt()};return window.addEventListener("storage",Rt),()=>{window.removeEventListener("storage",Rt)}},[]),reactExports.useEffect(()=>{assetPreloader.initialize()},[]),reactExports.useEffect(()=>{localStorage.getItem("gideon_call_sign")&&(e.lastActiveSector?e.combatPower.average>=90?window.location.href="/mastery-map":e.combatPower.average>=75?window.location.href="/tacticalintel":window.location.href="/mission":window.location.href="/recruitment")},[e.combatPower.average,e.lastActiveSector]),reactExports.useEffect(()=>{var wt;((wt=e==null?void 0:e.combatPower)==null?void 0:wt.average)>=174&&!jt&&(yt(!0),console.log("FORGE COMMAND ACTIVATED"))},[(kt=e==null?void 0:e.combatPower)==null?void 0:kt.average,jt]),reactExports.useEffect(()=>{const wt=localStorage.getItem("gideon_selected_node");if(wt){const Rt=getNodeById(wt);Rt&&(b(Rt),_(!0),localStorage.removeItem("gideon_selected_node"))}},[]),useNavigate();const Ut=()=>{_(!1),b(null)},Ft=()=>{s(Rt=>({...Rt,combatPower:{...Rt.combatPower,total:Rt.combatPower.total+25}})),o(Rt=>Rt+1);const wt=(g==null?void 0:g.title)||"General Practice";Vt(wt)},qt=()=>{nt(!0)},Ot=()=>{nt(!1)},St=()=>{st(!0)},Nt=()=>{st(!1)},Pt=()=>{ut(!1)},It=()=>{dt(!1)},Vt=async wt=>{const Rt=Date.now(),Dt=Math.round((Rt-Et.current)/6e4);if(!(Dt<1)){try{const Mt=localStorage.getItem("gideon_user_id")||(e==null?void 0:e.user_id)||"anonymous";await supabase.from("study_sessions").insert({profile_id:Mt,duration_minutes:Dt,subject_area:wt,created_at:new Date().toISOString()}),console.log(`Study session logged: ${Dt} minutes in ${wt}`)}catch(Mt){console.error("Failed to log study session:",Mt)}Et.current=Date.now()}},zt=wt=>{if(wt){const Rt=a+1;c(Rt),Rt>=5&&Ht()}else c(0)},Ht=async()=>{const wt=Math.max(1,d-1);h(wt),c(0),localStorage.setItem("gideon_ai_support_level",String(wt)),s(Rt=>({...Rt,aiSupportLevel:wt}));try{const Rt=localStorage.getItem("gideon_user_id")||(e==null?void 0:e.user_id)||"anonymous";localStorage.getItem("gideon_call_sign")&&(await supabase.from("profiles").update({ai_support_level:wt,current_streak:0,updated_at:new Date().toISOString()}).eq("id",Rt),console.log(`AI Support Level reduced to ${wt} - Student becoming more independent`),Gt(wt))}catch(Rt){console.error("Failed to sync AI support level:",Rt)}},Gt=wt=>{const Rt=Mt=>Mt>=5?"bg-purple-600":Mt>=3?"bg-blue-500":"bg-orange-600",Dt=document.createElement("div");Dt.className=`fixed top-4 right-4 ${Rt(wt)} text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-pulse`,Dt.innerHTML=`
      <div class="flex items-center space-x-2">
        <span class="text-xl"></span>
        <div>
          <div class="font-bold">Level Up!</div>
          <div class="text-sm">AI Support Reduced to Level ${wt}</div>
        </div>
      </div>
    `,document.body.appendChild(Dt),setTimeout(()=>{Dt.parentNode&&Dt.parentNode.removeChild(Dt)},3e3)},Xt=()=>{Ft(),zt(!0)},Wt=()=>{zt(!1)};e!=null&&e.completedNodes;const Kt=(e==null?void 0:e.userName)||"Scholar";return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(NeuroProvider,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-black text-white",children:[jsxRuntimeExports.jsx(StatusReportErrorBoundary,{callSign:pt.callSign,aiSupportLevel:d,children:jsxRuntimeExports.jsx(StatusReport,{userName:Kt,fullName:pt.fullName,callSign:pt.callSign,streak:a,aiSupportLevel:d})}),jsxRuntimeExports.jsx(CapstoneCertificateErrorBoundary,{onClose:Pt,children:jsxRuntimeExports.jsx(CapstoneCertificate,{isVisible:ot,onClose:Pt})}),jsxRuntimeExports.jsx(ReadinessReport,{isVisible:ht,onClose:It,profileId:localStorage.getItem("gideon_user_id")}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Navigate,{to:"/recruitment",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/recruitment",element:jsxRuntimeExports.jsx(Initiation,{onComplete:wt=>{console.log("Initiation completed:",wt)}})}),jsxRuntimeExports.jsx(Route,{path:"/initiation",element:jsxRuntimeExports.jsx(Initiation,{onComplete:wt=>{console.log("Initiation completed:",wt)}})}),jsxRuntimeExports.jsx(Route,{path:"/verve",element:jsxRuntimeExports.jsx(MissionLandingPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/mission",element:jsxRuntimeExports.jsx(MissionLandingPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/tacticalintel",element:jsxRuntimeExports.jsx(TacticalIntelDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/forge",element:jsxRuntimeExports.jsx(ForgeProtectedRoute,{children:jsxRuntimeExports.jsx(MasteryMap,{})})}),jsxRuntimeExports.jsx(Route,{path:"/mastery-map",element:jsxRuntimeExports.jsx(ForgeProtectedRoute,{children:jsxRuntimeExports.jsx(MasteryMap,{})})}),jsxRuntimeExports.jsx(Route,{path:"/diagnostic",element:jsxRuntimeExports.jsx(DiagnosticFlow,{})}),jsxRuntimeExports.jsx(Route,{path:"/exam",element:jsxRuntimeExports.jsx(ExamEngine,{})})]}),jsxRuntimeExports.jsx(SlideInPanel,{isOpen:j,onClose:Ut,selectedNode:g,onProblemSuccess:Xt,onProblemMiss:Wt,onShowIntel:qt,onShowCommandCalc:St}),$&&jsxRuntimeExports.jsx(WelcomeKit,{onClose:()=>et(!1)}),tt&&jsxRuntimeExports.jsx(TacticalIntel,{onClose:Ot}),_e&&jsxRuntimeExports.jsx(CommandCalc,{onClose:Nt}),at&&jsxRuntimeExports.jsx(RedAlertSimulation,{timer:lt,successProbability:mt,onComplete:()=>ct(!1)}),vt&&jsxRuntimeExports.jsx(VictorySequence,{onComplete:()=>Ct(!1)})]})})})}console.log("V1.0.19 - ROBUST STATE PERSISTENCE");console.log("App Mounting...");client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
